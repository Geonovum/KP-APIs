<!DOCTYPE html><html lang="en"><!-- HTML-Header ============================================================================== --><head><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta content="text/html; charset=utf-8" http-equiv="content-type"><meta name="generator" content="ReSpec 24.5.2"><style>/* --- ISSUES/NOTES --- */
.issue-label {
    text-transform: initial;
}

.warning > p:first-child { margin-top: 0 }
.warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
span.warning { padding: .1em .5em .15em; }

.issue.closed span.issue-number {
    text-decoration: line-through;
}

.warning {
    border-color: #f11;
    border-width: .2em;
    border-style: solid;
    background: #fbe9e9;
}

.warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
}

li.task-list-item {
    list-style: none;
}

input.task-list-item-checkbox {
    margin: 0 0.35em 0.25em -1.6em;
    vertical-align: middle;
}

.issue a.respec-gh-label {
  padding: 5px;
  margin: 0 2px 0 2px;
  font-size: 10px;
  text-transform: none;
  text-decoration: none;
  font-weight: bold;
  border-radius: 4px;
  position: relative;
  bottom: 2px;
  border: none;
}

.issue a.respec-label-dark {
  color: #fff;
  background-color: #000;
}

.issue a.respec-label-light {
  color: #000;
  background-color: #fff;
}
</style>
    
    
    <!-- Invullen: de titel van de standaard of het document ==================================== -->
    <title>API Designrules Extensions (Nederlandse API Strategie IIb)</title>
    <!-- Invullen: de naam van de lokale CSS file =============================================== -->
    <link rel="stylesheet" type="text/css" href="./media/style.css">
    <link rel="shortcut icon" type="image/x-icon" href="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.ico">
    
    
<!-- ============================================================================================ -->
<!-- File. . . :  index.html                                                                      -->
<!-- Bevat . . :  Template voor de index.html die verplicht is voor respec                        -->
<!--              Gebaseerd op https://github.com/Geonovum/respec/wiki                            -->
<!--              Deze file moet worden neergezet in de root-directory van de                     -->
<!--              betreffende standaard.                                                          -->
<!-- Door. . . :  Linda van den Brink                                                             -->
<!-- ============================================================================================ -->
<!-- ============================================================================================ -->
<!-- Log . . . :  2019503 - LvdB - Initiele versie                                                --> 
<!--                                                                                              -->
<!-- 
====================================================================================================
0        1         2         3         4         5         6         7         8         9         0
1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
================================================================================================= -->
  <style id="respec-mainstyle">/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* Override code highlighter background */
.hljs {
  background: transparent !important;
}

/* --- INLINES --- */
h1 abbr,
h2 abbr,
h3 abbr,
h4 abbr,
h5 abbr,
h6 abbr,
a abbr {
  border: none;
}

dfn {
  font-weight: bold;
}

a.internalDFN {
  color: inherit;
  border-bottom: 1px solid #99c;
  text-decoration: none;
}

a.externalDFN {
  color: inherit;
  border-bottom: 1px dotted #ccc;
  text-decoration: none;
}

a.bibref {
  text-decoration: none;
}

#references :target {
  background: #eaf3ff;
}

cite .bibref {
  font-style: normal;
}

code {
  color: #c83500;
}

th code {
  color: inherit;
}

/* --- TOC --- */

.toc a,
.tof a {
  text-decoration: none;
}

a .secno,
a .figno {
  color: #000;
}

ul.tof,
ol.tof {
  list-style: none outside none;
}

.caption {
  margin-top: 0.5em;
  font-style: italic;
}

/* --- TABLE --- */

table.simple {
  border-spacing: 0;
  border-collapse: collapse;
  border-bottom: 3px solid #005a9c;
}

.simple th {
  background: #005a9c;
  color: #fff;
  padding: 3px 5px;
  text-align: left;
}

.simple th[scope="row"] {
  background: inherit;
  color: inherit;
  border-top: 1px solid #ddd;
}

.simple td {
  padding: 3px 10px;
  border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
  background: #f0f6ff;
}

/* --- DL --- */

.section dd>p:first-child {
  margin-top: 0;
}

.section dd>p:last-child {
  margin-bottom: 0;
}

.section dd {
  margin-bottom: 1em;
}

.section dl.attrs dd,
.section dl.eldef dd {
  margin-bottom: 0;
}

#issue-summary>ul,
.respec-dfn-list {
  column-count: 2;
}

#issue-summary li,
.respec-dfn-list li {
  list-style: none;
}

details.respec-tests-details {
  margin-left: 1em;
  display: inline-block;
  vertical-align: top;
}

details.respec-tests-details>* {
  padding-right: 2em;
}

details.respec-tests-details[open] {
  z-index: 999999;
  position: absolute;
  border: thin solid #cad3e2;
  border-radius: 0.3em;
  background-color: white;
  padding-bottom: 0.5em;
}

details.respec-tests-details[open]>summary {
  border-bottom: thin solid #cad3e2;
  padding-left: 1em;
  margin-bottom: 1em;
  line-height: 2em;
}

details.respec-tests-details>ul {
  width: 100%;
  margin-top: -0.3em;
}

details.respec-tests-details>li {
  padding-left: 1em;
}

a[href].self-link:hover {
  opacity: 1;
  text-decoration: none;
  background-color: transparent;
}

h2,
h3,
h4,
h5,
h6 {
  position: relative;
}

aside.example .marker > a.self-link {
  color: inherit;
}

h2>a.self-link,
h3>a.self-link,
h4>a.self-link,
h5>a.self-link,
h6>a.self-link {
  border: none;
  color: inherit;
  font-size: 83%;
  height: 2em;
  left: -1.6em;
  opacity: .5;
  position: absolute;
  text-align: center;
  text-decoration: none;
  top: 0;
  transition: opacity .2s;
  width: 2em;
}

h2>a.self-link::before,
h3>a.self-link::before,
h4>a.self-link::before,
h5>a.self-link::before,
h6>a.self-link::before {
  content: "§";
  display: block;
}

@media (max-width: 767px) {
  dd {
    margin-left: 0;
  }

  /* Don't position self-link in headings off-screen */
  h2>a.self-link,
  h3>a.self-link,
  h4>a.self-link,
  h5>a.self-link,
  h6>a.self-link {
    left: auto;
    top: auto;
  }
}

@media print {
  .removeOnSave {
    display: none;
  }
}
</style><link rel="stylesheet" href="https://tools.geostandaarden.nl/respec/style/GN-CV.css"><link rel="shortcut icon" type="image/x-icon" href="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.ico"><style>/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8;
}

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold;
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080;
}

.hljs-string,
.hljs-doctag {
  color: #d14;
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold;
}

.hljs-subst {
  font-weight: normal;
}

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold;
}

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal;
}

.hljs-regexp,
.hljs-link {
  color: #009926;
}

.hljs-symbol,
.hljs-bullet {
  color: #990073;
}

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3;
}

.hljs-meta {
  color: #999;
  font-weight: bold;
}

.hljs-deletion {
  background: #fdd;
}

.hljs-addition {
  background: #dfd;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style><script id="initialUserConfig" type="application/json">{
  "specStatus": "GN-CV",
  "specType": "HR",
  "pubDomain": "api",
  "publishDate": "2020-01-17",
  "previousPublishDate": "2019-07-15",
  "previousMaturity": "GN-VV",
  "editors": [
    {
      "name": "Jasper Roes",
      "company": "Het Kadaster",
      "companyURL": "http://www.kadaster.nl/"
    },
    {
      "name": "Linda van den Brink",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    }
  ],
  "authors": [],
  "shortName": "API-Strategie-ext",
  "github": "https://github.com/geonovum/KP-APIs/",
  "issueBase": "https://github.com/geonovum/KP-APIs/issues/",
  "localBiblio": {
    "OAuth2": {
      "href": "https://tools.ietf.org/html/rfc6749",
      "title": "The OAuth 2.0 Authorization Framework",
      "authors": [
        "D. Hardt"
      ],
      "date": "October 2012",
      "publisher": "The Internet Engineering Task Force"
    },
    "Expert": {
      "href": "https://www.forumstandaardisatie.nl/sites/bfs/files/Expertadvies%20OAuth%202.0.pdf",
      "title": "Expertadvies OAuth 2.0",
      "authors": [
        "P. Dam"
      ],
      "date": "24 februari 2017",
      "publisher": "Forum Standaardisatie"
    },
    "JWT": {
      "href": "https://tools.ietf.org/html/rfc7519",
      "title": "JSON Web Token (JWT)",
      "authors": [
        "M. Jones, J. Bradley, N. Sakimura"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "JWS": {
      "href": "https://tools.ietf.org/html/rfc7515",
      "title": "JSON Web Signature (JWS)",
      "authors": [
        "M. Jones, J. Bradley, N. Sakimura"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "JWE": {
      "href": "https://tools.ietf.org/html/rfc7516",
      "title": "JSON Web Encryption (JWE)",
      "authors": [
        "M. Jones, J. Hildebrand"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "JWK": {
      "href": "https://tools.ietf.org/html/rfc7517",
      "title": "JSON Web Key (JWK))",
      "authors": [
        "M. Jones"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "JWA": {
      "href": "https://tools.ietf.org/html/rfc7518",
      "title": "JSON Web Algorithms (JWA)",
      "authors": [
        "M. Jones"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "PKCE": {
      "href": "https://tools.ietf.org/html/rfc7636",
      "title": "Proof Key for Code Exchange by OAuth Public Clients",
      "authors": [
        "N. Sakimura, J. Bradley, N. Agarwal"
      ],
      "date": "september 2015",
      "publisher": "IETF"
    },
    "Introspection": {
      "href": "https://tools.ietf.org/html/rfc7662",
      "title": "OAuth 2.0 Token Introspection",
      "authors": [
        "J. Richer"
      ],
      "date": "October 2015",
      "publisher": "IETF"
    },
    "OpenID.Core": {
      "href": "https://openid.net/specs/openid-connect-core-1_0.html",
      "title": "OpenID Connect Core 1.0",
      "authors": [
        "N. Sakimura, J. Bradley, M. Jones, B. de Medeiros, C. Mortimore"
      ],
      "date": "November 8 2014",
      "publisher": "OpenID foundation"
    },
    "iGOV.OpenID": {
      "href": "https://openid.net/specs/openid-igov-openid-connect-1_0.html",
      "title": "International Government Assurance Profile (iGov) for OpenID Connect 1.0 - draft 3",
      "authors": [
        "M. Varley, P. Grassi"
      ],
      "date": "October 5 2018",
      "publisher": "OpenID foundation"
    },
    "iGOV.OAuth2": {
      "href": "https://openid.net/specs/openid-igov-oauth2-1_0.html",
      "title": "International Government Assurance Profile (iGov) for OAuth 2.0",
      "authors": [
        "J. Richer, M. Varley, P. Grassi"
      ],
      "date": "October 5 2018",
      "publisher": "OpenID foundation"
    },
    "OpenID.Discovery": {
      "href": "https://openid.net/specs/openid-connect-discovery-1_0.html",
      "title": "OpenID Connect Discovery 1.0",
      "authors": [
        "N. Sakimura, J. Bradley, M. Jones, E. Jay"
      ],
      "date": "November 8 2014",
      "publisher": "OpenID foundation"
    },
    "I-D.ietf-oauth-pop-architecture": {
      "href": "https://tools.ietf.org/html/draft-ietf-oauth-pop-architecture-08",
      "title": "OAuth 2.0 Proof-of-Possession (PoP) Security Architecture",
      "authors": [
        "P. Hunt, J. Richer, W. Mills, P. Mishra, H. Tschofenig"
      ],
      "date": "July 8, 2016",
      "publisher": "IETF"
    },
    "HEART.OAuth2": {
      "href": "https://openid.net/specs/openid-heart-oauth2-1_0.html",
      "title": "Health Relationship Trust Profile for OAuth 2.0",
      "authors": [
        "J. Richer"
      ],
      "date": "April 25, 2017",
      "publisher": "OpenID foundation"
    },
    "JWS.JWE.Algs": {
      "href": "https://www.iana.org/assignments/jose/jose.xhtml#web-signature-encryption-algorithms",
      "title": "IANA JSON Web Signatures and Encryption Algorithms registry",
      "authors": [
        "Jim Schaad, Jeff Hodges, Joe Hildebrand, Sean Turner"
      ],
      "date": "",
      "publisher": "IANA"
    },
    "BCP195": {
      "href": "https://tools.ietf.org/html/bcp195",
      "title": "Recommendations for Secure Use of Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS)",
      "authors": [
        "Y. Sheffer, R. Holz, P. Saint-Andre"
      ],
      "date": "May 2015",
      "publisher": "IETF"
    },
    "HAL": {
      "href": "http://stateless.co/hal_specification.html",
      "title": "HAL - Hypertext Application Language",
      "authors": [
        "Mike Kelly"
      ],
      "date": " 2013-09-18"
    }
  },
  "publishISODate": "2020-01-17T00:00:00.000Z",
  "generatedSubtitle": "Consultatieversie 17 januari 2020"
}</script><meta name="description" content="The API strategy consists of a core — a generic set of rules for all government APIs — and various extensions that only pertain to a specific application or that are not maure enough for the core set."><script type="application/ld+json">{
  "@context": [
    "http://schema.org",
    {
      "@vocab": "http://schema.org/",
      "@language": "en",
      "foaf": "http://xmlns.com/foaf/0.1/",
      "datePublished": {
        "@type": "http://www.w3.org/2001/XMLSchema#date"
      },
      "inLanguage": {
        "@language": null
      },
      "isBasedOn": {
        "@type": "@id"
      },
      "license": {
        "@type": "@id"
      }
    }
  ],
  "id": "https://docs.geostandaarden.nl/api/cv-hr-API-Strategie-ext-20200117/",
  "type": [
    "TechArticle"
  ],
  "name": "API Designrules Extensions (Nederlandse API Strategie IIb)",
  "inLanguage": "en",
  "license": "https://creativecommons.org/licenses/by/4.0/legalcode",
  "datePublished": "2020-01-17",
  "copyrightHolder": {
    "name": "Geonovum",
    "url": "https://www.geonovum.nl/"
  },
  "discussionUrl": "https://github.com/geonovum/KP-APIs/issues/",
  "alternativeHeadline": "",
  "isBasedOn": "https://docs.geostandaarden.nl/api/vv-hr-API-Strategie-ext-20190715/",
  "description": "The API strategy consists of a core — a generic set of rules for all government APIs — and various extensions that only pertain to a specific application or that are not maure enough for the core set.",
  "editor": [
    {
      "type": "Person",
      "name": "Jasper Roes",
      "worksFor": {
        "name": "Het Kadaster",
        "url": "http://www.kadaster.nl/"
      }
    },
    {
      "type": "Person",
      "name": "Linda van den Brink",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl"
      }
    }
  ],
  "contributor": [],
  "citation": [
    {
      "id": "https://tools.ietf.org/html/rfc8142",
      "type": "TechArticle",
      "name": "GeoJSON Text Sequences",
      "url": "https://tools.ietf.org/html/rfc8142"
    },
    {
      "id": "https://httpwg.org/specs/rfc6585.html",
      "type": "TechArticle",
      "name": "Additional HTTP Status Codes",
      "url": "https://httpwg.org/specs/rfc6585.html"
    },
    {
      "id": "https://tools.ietf.org/html/rfc7807",
      "type": "TechArticle",
      "name": "Problem Details for HTTP APIs",
      "url": "https://tools.ietf.org/html/rfc7807"
    }
  ]
}</script></head>  
  <!-- HTML-Body ================================================================================ -->
  <body class="h-entry"><div class="head">
  <a href="https://www.geonovum.nl/" class="logo"><img id="Geonovum" alt="Geonovum" width="132" height="67" src="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.svg"></a>
  <h1 class="title p-name" id="title">API Designrules Extensions (Nederlandse API Strategie IIb)</h1>
  
  <h2>Geonovum Handreiking<br>
  Consultatieversie <time class="dt-published" datetime="2020-01-17">17 januari 2020</time></h2>
  <dl>
    <dt>This version:</dt><dd><a class="u-url" href="https://docs.geostandaarden.nl/api/cv-hr-API-Strategie-ext-20200117/">https://docs.geostandaarden.nl/api/cv-hr-API-Strategie-ext-20200117/</a></dd><dt>Latest published version:</dt><dd><a href="https://docs.geostandaarden.nl/api/API-Strategie-ext/">https://docs.geostandaarden.nl/api/API-Strategie-ext/</a></dd>
    
    <dt>Vorige versie:</dt><dd><a href="https://docs.geostandaarden.nl/api/vv-hr-API-Strategie-ext-20190715/">https://docs.geostandaarden.nl/api/vv-hr-API-Strategie-ext-20190715/</a></dd>
    <dt>Latest editor's draft:</dt><dd><a href="https://geonovum.github.io/KP-APIs/API-strategie-extensies/">https://geonovum.github.io/KP-APIs/API-strategie-extensies/</a></dd>
    <dt>Editors:</dt>
    <dd class="p-author h-card vcard"><span class="p-name fn">Jasper Roes</span>, <a class="p-org org h-org h-card" href="http://www.kadaster.nl/">Het Kadaster</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Linda van den Brink</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl">Geonovum</a></dd>
    <dt>Author:</dt>
    <dt>Participate:</dt><dd>
      <a href="https://github.com/geonovum/KP-APIs/">GitHub geonovum/KP-APIs</a>
    </dd><dd>
      <a href="https://github.com/geonovum/KP-APIs/issues/">File a bug</a>
    </dd><dd>
      <a href="https://github.com/geonovum/KP-APIs/commits/gh-pages">Commit history</a>
    </dd><dd>
      <a href="https://github.com/geonovum/KP-APIs/pulls/">Pull requests</a>
    </dd>
  </dl>
  
  
    <dl>
          <dt>Rechtenbeleid:</dt>
          <dd>
            <div class="copyright" style="margin: 0.25em 0;">
              <abbr title="Creative Commons Attribution 4.0 International Public License">
              <a href="https://creativecommons.org/licenses/by/4.0/legalcode"><img width="115" height="40" src="https://tools.geostandaarden.nl/respec/style/logos/cc-by.svg" alt="Creative Commons Attribution 4.0 International Public License"></a>
            </abbr>
              <div style="display:inline-block; vertical-align:top">
                <p style="font-size: small;">Creative Commons Attribution 4.0 International Public License<br>(CC-BY)</p>
              </div>
            </div>
          </dd>
        </dl>
  <hr title="Separator for header">
</div>
    <section id="abstract" class="introductory"><h2>Abstract</h2>
      <p>The API strategy consists of a <em>core</em> — a generic set of rules for all government APIs — and various <em>extensions</em> that only pertain to a specific application or that are not maure enough for the core set.</p>
      <p>These extensions are described in this docuement. It is indicated whether an extension is stable or in development.</p>
    </section>
    <section id="sotd" class="introductory"><h2>Status of This Document</h2><p>
    <em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current Geonovum publications and the latest revision of this document can be found via <a href="https://www.geonovum.nl/geo-standaarden/alle-standaarden">https://www.geonovum.nl/geo-standaarden/alle-standaarden</a>(in Dutch).</em>
  </p><p>



    Dit is een door de werkgroep goedgekeurde consultatieversie. Commentaar over dit document kan gestuurd worden naar
    <a href="mailto:geo-standaarden@geonovum.nl">
        geo-standaarden@geonovum.nl</a>.






</p><p>Ten opzichte van de vorige versie van de API strategie (15-7-2019) is de status terug gezet naar consultatie versie. Dit om beter weer te geven dat nog actief aan de API designrules extensions gewerkt wordt. De huidige versie bevat dan ook een aantal inhoudelijke veranderingen ten opzichte van de versie van 15-7-2019. De sectie API security is behoorlijk aangepast en er is een sectie Signing &amp; Encryption bijgekomen</p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><span class="secno">1. </span>Introduction</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#reading-guide"><span class="secno">1.1 </span>Reading Guide</a></li></ol></li><li class="tocline"><a class="tocxref" href="#example-a-stable-extension"><span class="secno">2. </span>Example: a stable extension</a></li><li class="tocline"><a class="tocxref" href="#example-an-extension-that-is-still-under-development"><span class="secno">3. </span>Example: an extension that is still under development</a></li><li class="tocline"><a class="tocxref" href="#api-security"><span class="secno">4. </span>API Security</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#identification"><span class="secno">4.1 </span>Identification</a></li><li class="tocline"><a class="tocxref" href="#authentication"><span class="secno">4.2 </span>Authentication</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#end-user-authentication"><span class="secno">4.2.1 </span>End user authentication</a></li><li class="tocline"><a class="tocxref" href="#system-authentication"><span class="secno">4.2.2 </span>System authentication</a></li></ol></li><li class="tocline"><a class="tocxref" href="#authorisation"><span class="secno">4.3 </span>Authorisation</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#authorisation-errors"><span class="secno">4.3.1 </span>Authorisation errors</a></li><li class="tocline"><a class="tocxref" href="#public-identifiers"><span class="secno">4.3.2 </span>Public identifiers</a></li></ol></li><li class="tocline"><a class="tocxref" href="#security-for-webbrowser-api-clients"><span class="secno">4.4 </span>security for webbrowser API clients</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#cors-policy"><span class="secno">4.4.1 </span>CORS-policy</a></li><li class="tocline"><a class="tocxref" href="#csp-policy"><span class="secno">4.4.2 </span>CSP-policy</a></li><li class="tocline"><a class="tocxref" href="#subresource-integrity"><span class="secno">4.4.3 </span>Subresource integrity</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#versionering"><span class="secno">5. </span>Versionering</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#deprication-of-a-major-api-version"><span class="secno">5.1 </span>Deprication of a major API version</a></li><li class="tocline"><a class="tocxref" href="#the-warning-response-header"><span class="secno">5.2 </span>The Warning response header</a></li></ol></li><li class="tocline"><a class="tocxref" href="#json"><span class="secno">6. </span>JSON</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#field-names-in-snake_case-camelcase-uppercamelcase-or-kebab-case"><span class="secno">6.1 </span>Field names in <code>snake_case</code>, <code>camelCase</code>, <code>UpperCamelCase</code>, or <code>kebab-case</code>?</a></li><li class="tocline"><a class="tocxref" href="#pretty-print"><span class="secno">6.2 </span>Pretty print</a></li><li class="tocline"><a class="tocxref" href="#do-not-use-envelope"><span class="secno">6.3 </span>Do not use envelope</a></li><li class="tocline"><a class="tocxref" href="#json-encoded-post-put-and-patch-payloads"><span class="secno">6.4 </span>JSON-encoded <code>POST</code>, <code>PUT</code>, and <code>PATCH</code> payloads</a></li></ol></li><li class="tocline"><a class="tocxref" href="#filtering"><span class="secno">7. </span>Filtering</a></li><li class="tocline"><a class="tocxref" href="#sorting"><span class="secno">8. </span>Sorting</a></li><li class="tocline"><a class="tocxref" href="#search"><span class="secno">9. </span>Search</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#wildcards"><span class="secno">9.1 </span>Wildcards</a></li><li class="tocline"><a class="tocxref" href="#aliases-for-common-queries"><span class="secno">9.2 </span>Aliases for common queries</a></li></ol></li><li class="tocline"><a class="tocxref" href="#time-travelling"><span class="secno">10. </span>Time travelling</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#level-of-support"><span class="secno">10.1 </span>Level of support</a></li><li class="tocline"><a class="tocxref" href="#robustness"><span class="secno">10.2 </span>Robustness</a></li></ol></li><li class="tocline"><a class="tocxref" href="#geo-support"><span class="secno">11. </span>GEO support</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#result-response"><span class="secno">11.1 </span>Result (response)</a></li><li class="tocline"><a class="tocxref" href="#call-requests"><span class="secno">11.2 </span>Call (requests)</a></li><li class="tocline"><a class="tocxref" href="#crs-negotiation"><span class="secno">11.3 </span>CRS-negotiation</a></li><li class="tocline"><a class="tocxref" href="#crs-transformation"><span class="secno">11.4 </span>CRS transformation</a></li></ol></li><li class="tocline"><a class="tocxref" href="#paging"><span class="secno">12. </span>Paging</a></li><li class="tocline"><a class="tocxref" href="#caching"><span class="secno">13. </span>Caching</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#etag"><span class="secno">13.1 </span>ETag</a></li><li class="tocline"><a class="tocxref" href="#last-modified"><span class="secno">13.2 </span>Last-Modified</a></li></ol></li><li class="tocline"><a class="tocxref" href="#rate-limiting"><span class="secno">14. </span>Rate limiting</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#expose-api-key"><span class="secno">14.1 </span>Expose API-key</a></li></ol></li><li class="tocline"><a class="tocxref" href="#error-handling"><span class="secno">15. </span>Error handling</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#http-status-codes"><span class="secno">15.1 </span>HTTP status codes</a></li></ol></li><li class="tocline"><a class="tocxref" href="#signing-and-encryption"><span class="secno">16. </span>Signing and Encryption</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#signing"><span class="secno">16.1 </span>Signing</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#detached-enveloping-and-enveloped-signatures"><span class="secno">16.1.1 </span>Detached, Enveloping and Enveloped signatures</a></li><li class="tocline"><a class="tocxref" href="#canonicalization"><span class="secno">16.1.2 </span>Canonicalization</a></li><li class="tocline"><a class="tocxref" href="#signing-within-encoding-formats"><span class="secno">16.1.3 </span>Signing within encoding formats</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#signing-xml"><span class="secno">16.1.3.1 </span>Signing XML</a></li><li class="tocline"><a class="tocxref" href="#signing-json"><span class="secno">16.1.3.2 </span>Signing JSON</a></li></ol></li><li class="tocline"><a class="tocxref" href="#signing-requests-response"><span class="secno">16.1.4 </span>Signing requests/response</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#signing-requests-respone-with-knowledge-of-encoding-format"><span class="secno">16.1.4.1 </span>Signing requests/respone with knowledge of encoding format</a></li><li class="tocline"><a class="tocxref" href="#signing-requests-response-without-knowledge-of-encoding-format"><span class="secno">16.1.4.2 </span>Signing requests/response without knowledge of encoding format</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#encryption"><span class="secno">16.2 </span>Encryption</a></li></ol></li><li class="tocline"><a class="tocxref" href="#informative-api-principles"><span class="secno">17. </span><strong>Informative API Principles</strong></a><ol class="toc"><li class="tocline"><a class="tocxref" href="#api-11-encrypt-connections-using-at-least-tls-v1-3"><span class="secno">17.1 </span><span name="api-11" class="formerLink"></span>API-11: Encrypt connections using at least TLS v1.3</a></li><li class="tocline"><a class="tocxref" href="#api-12-allow-access-to-an-api-only-if-an-api-key-is-provided"><span class="secno">17.2 </span><span name="api-12" class="formerLink"></span>API-12: Allow access to an API only if an API key is provided</a></li><li class="tocline"><a class="tocxref" href="#api-13-accept-tokens-as-http-headers-only"><span class="secno">17.3 </span><span name="api-13" class="formerLink"></span>API-13: Accept tokens as HTTP headers only</a></li><li class="tocline"><a class="tocxref" href="#api-14-use-oauth-2-0-for-authorisation"><span class="secno">17.4 </span><span name="api-14" class="formerLink"></span>API-14: Use OAuth 2.0 for authorisation</a></li><li class="tocline"><a class="tocxref" href="#api-15-use-pkioverheid-certificates-for-access-restricted-or-purpose-limited-api-authentication"><span class="secno">17.5 </span><span name="api-15" class="formerLink"></span>API-15: Use PKIoverheid certificates for access-restricted or purpose-limited API authentication</a></li><li class="tocline"><a class="tocxref" href="#api-21-inform-users-of-a-deprecated-api-actively"><span class="secno">17.6 </span><span name="api-21" class="formerLink"></span>API-21: Inform users of a deprecated API actively</a></li><li class="tocline"><a class="tocxref" href="#api-22-json-first-apis-receive-and-send-json"><span class="secno">17.7 </span><span name="api-22" class="formerLink"></span>API-22: JSON first - APIs receive and send JSON</a></li><li class="tocline"><a class="tocxref" href="#api-23-apis-may-provide-a-json-schema"><span class="secno">17.8 </span><span name="api-23" class="formerLink"></span>API-23: APIs may provide a JSON Schema</a></li><li class="tocline"><a class="tocxref" href="#api-24-support-content-negotiation"><span class="secno">17.9 </span><span name="api-24" class="formerLink"></span>API-24: Support content negotiation</a></li><li class="tocline"><a class="tocxref" href="#api-25-check-the-content-type-header-settings"><span class="secno">17.10 </span><span name="api-25" class="formerLink"></span>API-25: Check the Content-Type header settings</a></li><li class="tocline"><a class="tocxref" href="#api-26-define-field-names-in-in-camelcase"><span class="secno">17.11 </span><span name="api-26" class="formerLink"></span>API-26: Define field names in in <em>camelCase</em></a></li><li class="tocline"><a class="tocxref" href="#api-27-disable-pretty-print"><span class="secno">17.12 </span><span name="api-27" class="formerLink"></span>API-27: Disable pretty print</a></li><li class="tocline"><a class="tocxref" href="#api-28-send-a-json-response-without-enclosing-envelope"><span class="secno">17.13 </span><span name="api-28" class="formerLink"></span>API-28: Send a JSON-response without enclosing envelope</a></li><li class="tocline"><a class="tocxref" href="#api-29-support-json-encoded-post-put-and-patch-payloads"><span class="secno">17.14 </span><span name="api-29" class="formerLink"></span>API-29: Support JSON-encoded <code>POST</code>, <code>PUT</code>, and <code>PATCH</code> payloads</a></li><li class="tocline"><a class="tocxref" href="#api-30-use-query-parameters-corresponding-to-the-queryable-fields"><span class="secno">17.15 </span><span name="api-30" class="formerLink"></span>API-30: Use query parameters corresponding to the queryable fields</a></li><li class="tocline"><a class="tocxref" href="#api-31-use-the-query-parameter-sorteer-to-sort"><span class="secno">17.16 </span><span name="api-31" class="formerLink"></span>API-31: Use the query parameter <code>sorteer</code> to sort</a></li><li class="tocline"><a class="tocxref" href="#api-32-use-the-query-parameter-zoek-for-full-text-search"><span class="secno">17.17 </span><span name="api-32" class="formerLink"></span>API-32: Use the query parameter <code>zoek</code> for full-text search</a></li><li class="tocline"><a class="tocxref" href="#api-33-support-both-and-wildcard-characters-for-full-text-search-apis"><span class="secno">17.18 </span><span name="api-33" class="formerLink"></span>API-33: Support both <code>*</code> and <code>?</code> wildcard characters for full-text search APIs</a></li><li class="tocline"><a class="tocxref" href="#api-34-support-geojson-for-geo-apis"><span class="secno">17.19 </span><span name="api-34" class="formerLink"></span>API-34: Support GeoJSON for GEO APIs</a></li><li class="tocline"><a class="tocxref" href="#api-35-include-geojson-as-part-of-the-embedded-resource-in-the-json-response"><span class="secno">17.20 </span><span name="api-35" class="formerLink"></span>API-35: Include GeoJSON as part of the embedded resource in the JSON response</a></li><li class="tocline"><a class="tocxref" href="#api-36-provide-a-post-endpoint-for-geo-queries"><span class="secno">17.21 </span><span name="api-36" class="formerLink"></span>API-36: Provide a <code>POST</code> endpoint for GEO queries</a></li><li class="tocline"><a class="tocxref" href="#api-37-support-mixed-queries-at-post-endpoints"><span class="secno">17.22 </span><span name="api-37" class="formerLink"></span>API-37: Support mixed queries at <code>POST</code> endpoints</a></li><li class="tocline"><a class="tocxref" href="#api-38-put-results-of-a-global-spatial-query-in-the-relevant-geometric-context"><span class="secno">17.23 </span><span name="api-38" class="formerLink"></span>API-38: Put results of a global spatial query in the relevant geometric context</a></li><li class="tocline"><a class="tocxref" href="#api-39-use-etrs89-as-the-preferred-coordinate-reference-system-crs"><span class="secno">17.24 </span><span name="api-39" class="formerLink"></span>API-39: Use ETRS89 as the preferred coordinate reference system (CRS)</a></li><li class="tocline"><a class="tocxref" href="#api-40-pass-the-coordinate-reference-system-crs-of-the-request-and-the-response-in-the-headers"><span class="secno">17.25 </span><span name="api-40" class="formerLink"></span>API-40: Pass the coordinate reference system (CRS) of the request and the response in the headers</a></li><li class="tocline"><a class="tocxref" href="#api-41-use-content-negotiation-to-serve-different-crss"><span class="secno">17.26 </span><span name="api-41" class="formerLink"></span>API-41: Use content negotiation to serve different CRSs</a></li><li class="tocline"><a class="tocxref" href="#api-42-use-json-hal-with-media-type-application-hal-json-for-pagination"><span class="secno">17.27 </span><span name="api-42" class="formerLink"></span>API-42: Use JSON+HAL with media type <code>application/hal+json</code> for pagination</a></li><li class="tocline"><a class="tocxref" href="#api-43-apply-caching-to-improve-performance"><span class="secno">17.28 </span><span name="api-43" class="formerLink"></span>API-43: Apply caching to improve performance</a></li><li class="tocline"><a class="tocxref" href="#api-44-apply-rate-limiting"><span class="secno">17.29 </span><span name="api-44" class="formerLink"></span>API-44: Apply rate limiting</a></li><li class="tocline"><a class="tocxref" href="#api-45-provide-rate-limiting-information"><span class="secno">17.30 </span><span name="api-45" class="formerLink"></span>API-45: Provide rate limiting information</a></li><li class="tocline"><a class="tocxref" href="#api-46-use-default-error-handling"><span class="secno">17.31 </span><span name="api-46" class="formerLink"></span>API-46: Use default error handling</a></li><li class="tocline"><a class="tocxref" href="#api-47-use-the-required-http-status-codes"><span class="secno">17.32 </span><span name="api-47" class="formerLink"></span>API-47: Use the required HTTP status codes</a></li><li class="tocline"><a class="tocxref" href="#api-49-use-public-api-keys"><span class="secno">17.33 </span><span name="api-49" class="formerLink"></span>API-49: Use <em>public</em> API-keys</a></li><li class="tocline"><a class="tocxref" href="#api-50-use-cors-to-control-access"><span class="secno">17.34 </span><span name="api-50" class="formerLink"></span>API-50: Use CORS to control access</a></li><li class="tocline"><a class="tocxref" href="#api-52-use-oauth-2-0-for-authorisation-with-rights-delegation"><span class="secno">17.35 </span><span name="api-52" class="formerLink"></span>API-52: Use OAuth 2.0 for authorisation with rights delegation</a></li></ol></li><li class="tocline"><a class="tocxref" href="#references"><span class="secno">A. </span>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#informative-references"><span class="secno">A.1 </span>Informative references</a></li></ol></li></ol></nav>
    <!-- vanaf hier per hoofdstuk een sectie of een div in het document ======================== -->
    <!-- Secties komen in de inhoudsopgave div's niet ========================================== -->
    <!-- Secties hebben verplicht <h2> tags, div's niet ======================================== -->
    <section class="informative" data-format="markdown" aria-busy="false" id="introduction"><!--OddPage--><h2 id="x1-introduction"><span class="secno">1. </span>Introduction</h2><p><em>Dit onderdeel is niet normatief.</em></p><p>This document contains the extensions on the API Designrules standard.</p><section id="reading-guide"><h3 id="x1-1-reading-guide"><span class="secno">1.1 </span>Reading Guide</h3><p>This document is part of the "Nederlandse API Strategie" </p><table>
<thead>
<tr>
<th>Part</th>
<th>Description</th>
<th>Status</th>
<th>Link</th>
</tr>
</thead>
<tbody><tr>
<td>I</td>
<td>General description of the API Strategy</td>
<td>Informative</td>
<td><a href="https://docs.geostandaarden.nl/api/API-Strategie/">https://docs.geostandaarden.nl/api/API-Strategie/</a></td>
</tr>
<tr>
<td>IIa</td>
<td>Standard for designing APIs</td>
<td>Normative</td>
<td><a href="https://docs.geostandaarden.nl/api/API-Designrules/">https://docs.geostandaarden.nl/api/API-Designrules/</a></td>
</tr>
<tr>
<td><strong>IIb</strong></td>
<td><strong>Extension on the Standard for designing APIs</strong></td>
<td><strong>Informative</strong></td>
<td><a href="https://docs.geostandaarden.nl/api/API-Strategie-ext/">https://docs.geostandaarden.nl/api/API-Strategie-ext/</a></td>
</tr>
</tbody></table></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="example-a-stable-extension"><!--OddPage--><h2 id="x2-example-a-stable-extension"><span class="secno">2. </span>Example: a stable extension</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div><p class="">The working group has indicated this extension to be stable.</p></div><p>Text of the extension...</p></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="example-an-extension-that-is-still-under-development"><!--OddPage--><h2 id="x3-example-an-extension-that-is-still-under-development"><span class="secno">3. </span>Example: an extension that is still under development</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-0"><div role="heading" class="warning-title marker" id="h-warning" aria-level="3"><span>Warning</span></div><p class="">This extension is still under development and can be modified at any time.</p></div><p>Text of the extension...</p></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="api-security"><!--OddPage--><h2 id="x4-api-security"><span class="secno">4. </span>API Security</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-1"><div role="heading" class="warning-title marker" id="h-warning-0" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>APIs can be accessed from any location on the internet. Information is only exchanged over TLS-based encrypted connections. No exceptions, so everywhere and always. One should follow the HTTP Strict Transport Security (HSTS) policy that mandates the use of HTTPS only.</p><blockquote>
<p><a href="#api-11">API principle: Encrypt connections using at least TLS v1.3</a></p>
</blockquote><p><strong>Should we not just use NCSC guidelines for HTTPS?</strong> <a href="https://www.ncsc.nl/documenten/publicaties/2019/mei/01/ict-beveiligingsrichtlijnen-voor-transport-layer-security-tls">https://www.ncsc.nl/documenten/publicaties/2019/mei/01/ict-beveiligingsrichtlijnen-voor-transport-layer-security-tls</a></p><section id="identification"><h3 id="x4-1-identification"><span class="secno">4.1 </span>Identification</h3><p>For Identification of individual users always use a pseudonym to avoid exposing sensitive information about a user. 
This pseudonym can optionally be translatable to actual personal information in a separate service, but access to this service should be tightly controlled and limited only to cases where there is a legal need to use this information.
Use of a Burgerservice nummer(BSN) is only allowed when the organization has the right to do this. Even when an orgnization has the right to do this it is still reccomended to use a pseudonym that is only translatable to a BSN for a limited number of services/users within the organization.
** link naar DSO ontwerp?**</p><p>For identifying government organizations use the "organisatie-identificatienummer" (OIN)
For identifying non-government organizations (companies, associations, foundations etc...) use the Handelsregisternummer (HRN)
These are used in the PKIOverheid and e-Herkenning context. See <a href="https://www.logius.nl/diensten/oin">https://www.logius.nl/diensten/oin</a> for more information on these identifiers.
OINs can be queried using the COR API <a href="https://portaal.digikoppeling.nl/registers/corApi/index">https://portaal.digikoppeling.nl/registers/corApi/index</a> 
HRNs are derived from the RSIN which can be queried in the "Handels register" <a href="https://developers.kvk.nl/documentation/search-v2">https://developers.kvk.nl/documentation/search-v2</a></p><p>In the EU context use the eIDAS legal identifier. for more information see <a href="https://ec.europa.eu/digital-single-market/en/trust-services-and-eid">https://ec.europa.eu/digital-single-market/en/trust-services-and-eid</a></p></section><section id="authentication"><h3 id="x4-2-authentication"><span class="secno">4.2 </span>Authentication</h3><p>We distinguish end user authentication methods and system authentication methods.</p><section id="end-user-authentication"><h4 id="x4-2-1-end-user-authentication"><span class="secno">4.2.1 </span>End user authentication</h4><p>The following authentication methods can be used end user authentication:
<strong>Out of band</strong> 
When distributing API tokens to users an out of band authentication method can be used. Common methods include an API store where a user logs in and is able to acquire an API key. In this case the login method is the out-of-band authentication method used for accesing an API.</p><p><strong>Openidconnect</strong>
A Dutch profile for OpenIDConnect is currently being drafted. The first version will be for web usecases, later on it will be extended to cover mobile. When this profile is complete it is expected its use will be mandated by the "pas toe of leg uit lijst" of Forum standaardisatie. </p><p><strong>SAML</strong>
The underlying current Authentication method for DigiD &amp; eHerkenning. It can be the basis as the out-of band method mentioned earlier. other usecases are.... (further elaboration needed)</p></section><section id="system-authentication"><h4 id="x4-2-2-system-authentication"><span class="secno">4.2.2 </span>System authentication</h4><p>The following authentication methods can be used for system authentication:</p><p><strong>PKIOverheid</strong>
These are x509 certificates derived from a root certificate owned by the Dutch Government. for more information on PKIOverheid see <a href="https://www.logius.nl/diensten/pkioverheid">https://www.logius.nl/diensten/pkioverheid</a>
In the API context use only server or services certificates that include an OIN/HRN for identification. Extended validation certificates (as used for websites) do not include this identifier and are therefor not suitable for use with APIs. </p><p><strong>Out of band</strong> 
When distributing API tokens to users an out of band authentication method can be used. Common methods include an API store where a user logs in and is able to acquire an API key. In this case the login method is the out-of-band authentication method used for accesing an API.</p><p><strong>OAuth</strong>
This is a standard for authorisation not authentication yet in some cases its use for machine to machine authentication can be appropriate. The client credentials authorization grant to be specific ...... (further elaboration needed)</p></section></section><section id="authorisation"><h3 id="x4-3-authorisation"><span class="secno">4.3 </span>Authorisation</h3><p>A RESTful API should not maintain the state at the server. The authentication and authorisation of a request cannot depend on cookies or sessions. Instead, a token has to be sent for each request. Token based authorization is reccomended. </p><blockquote>
<p><a href="#api-13">API principle: Accept tokens as HTTP headers only</a></p>
</blockquote><p>Using tokens a distinction is made between authorised and non-authorised services and related headers:</p><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>Authorised</td>
<td><code>Authorization: Bearer &lt;token&gt;</code></td>
</tr>
<tr>
<td>Non-authorised</td>
<td><code>X-Api-Key: &lt;api-key&gt;</code></td>
</tr>
</tbody></table><p>In case the proper headers are not sent, then there are no authentication details available and the a status error code <code>403 Forbidden</code> is returned.</p><blockquote>
<p><a href="#api-52">API principle: Use OAuth 2.0 for authorisation with rights delegation</a></p>
</blockquote><p>See also <a href="#Security">The Dutch profile OAuth in the chapter Security</a> for further explanation of the applicaton of OAuth.</p><blockquote>
<p><a href="#api-15">API principle: Use PKIoverheid certificates for access-restricted or purpose-limited API authentication</a></p>
</blockquote><section id="authorisation-errors"><h4 id="x4-3-1-authorisation-errors"><span class="secno">4.3.1 </span>Authorisation errors</h4><p>In a production environment as little information as possible is to be disclosed. Apply the following rules for returned the status error code <code>401 Unauthorized</code>, <code>403 Forbidden</code>, and <code>404 Not Found</code>:</p><table>
<thead>
<tr>
<th>Does the resource exist?</th>
<th>Can authorisaton be determined?</th>
<th>Authorised?</th>
<th>HTTP statuscode</th>
</tr>
</thead>
<tbody><tr>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td><code>20x (200 OK)</code></td>
</tr>
<tr>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td><code>401 Unauthorized</code></td>
</tr>
<tr>
<td>Yes</td>
<td>No</td>
<td>?</td>
<td><code>403 Forbidden</code></td>
</tr>
<tr>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td><code>404 Not Found</code></td>
</tr>
<tr>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td><code>403 Forbidden</code></td>
</tr>
<tr>
<td>No</td>
<td>No</td>
<td>?</td>
<td><code>403 Forbidden</code></td>
</tr>
</tbody></table><p>First, it is established whether the requester (principal) has a valid authorisation(i.e. token is valid) then it is established whether this authorisation is valid for a requested resource. In case the requester is not authorised or the authorisation cannot be established, for example, the resource is required to establish authorisation and the resource does not exist, then a status error code <code>403 Forbidden</code> is returned. In this way, no information is returned about the existence of a resource to a non-authorised principal.</p><p>An additional advantage of the stategy that establishes whether there is authorisation is the opportunity to separate access control logic from business logic.</p></section><section id="public-identifiers"><h4 id="x4-3-2-public-identifiers"><span class="secno">4.3.2 </span>Public identifiers</h4><p>Publicly visible identifiers (IDs), that are frequently part of URLs a RESTful APIs shouldn't expose the underlying mechanisms (like number generations) and should certainly not have business logic.</p><blockquote>
<p><strong>UUID</strong></p>
<p>Preferrably use UUIDs (Universally-Unique IDentifier) for confidential resources. This is a 16-bytes (128-bits) binary representation, a sequence of 32 hexadecimal digits, in five groups separated by hyphens and consists of 36 characters (32 alphanumerical characters and 4 hyphens]):</p>
<p><code>550e8400-e29b-41d4-a716-446655440000</code></p>
<p>To ensure UUIDs are shorter and guaranteed <em>web-safe</em>, be advised to only use the base64-encoded variant consisting of 22 characters. The above UUID looks like this:</p>
<p><code>abcdEFh4520juieUKHWgJQ</code></p>
</blockquote></section></section><section id="security-for-webbrowser-api-clients"><h3 id="x4-4-security-for-webbrowser-api-clients"><span class="secno">4.4 </span>security for webbrowser API clients</h3><p>When webbrowsers can be clients for an API these APIs should be compatible with the following policies and standards.</p><section id="cors-policy"><h4 id="x4-4-1-cors-policy"><span class="secno">4.4.1 </span>CORS-policy</h4><p>Web browsers implement a so-called "same origin policy", an important security conect to prevent requests go to another domain than where they are provided. While this policy is effective to prevent requests in different domains, it prevents ligitimate interaction between an API and clients from a known and trusted origin. </p><blockquote>
<p><a href="#api-50">API principle: Use CORS to control access</a></p>
</blockquote></section><section id="csp-policy"><h4 id="x4-4-2-csp-policy"><span class="secno">4.4.2 </span>CSP-policy</h4><p>Content Security Policy is a standard that allows API (and website) providers to define approved origins of contents that are accesable through an API but are not provided from the same origin as the API itself. When multiple origins are needed this standard can be use as a mechanism to explicitly provide exceptions to the CORS-policy.</p></section><section id="subresource-integrity"><h4 id="x4-4-3-subresource-integrity"><span class="secno">4.4.3 </span>Subresource integrity</h4><p>Subresource integrity (SRI) is a standard that can be used to validate content delivered by a third party. It defines trusted location and a hash of external content. This allows a client to verify the integrity and trustworthyness of external content accessed through an API.

</p></section></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="versionering"><!--OddPage--><h2 id="x5-versionering"><span class="secno">5. </span>Versionering</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-2"><div role="heading" class="warning-title marker" id="h-warning-1" aria-level="3"><span>Warning</span></div><p class="">This extension is still in development and can be modified at any time.</p></div><section id="deprication-of-a-major-api-version"><h3 id="x5-1-deprication-of-a-major-api-version"><span class="secno">5.1 </span>Deprication of a major API version</h3><p>Major API releases should always be backward incompatible. In case a new API release does <em>not</em>  result in backward incompatibility, it does not warrant a full version increase and it is merely a minor release. In case a major release takes place, all (potential) clients have to implement the new version.</p><p>As clients cannot be broken, a migration from the previous to the new release cannot happen abruptly. After the launch the new version, the previous version has to be available in production as well. As not to maintain the previous version indefinitely and to encourage clients to use the new version, a transition period is communicated for users to adjust their code to the new version. This period is referred to as <em>deprecation period</em>. The duration of this period may very per API. Typically, the deprecation period lasts 6 months, but not more than one year. From a maintenance perspective, at most two major versions (one of which is the deprecated version) should be available in production concurrently. Communication with users is crucial during this period. The following points have to be communicated:</p><ul>
<li>A link to the (documentation of the) new API version; </li>
<li>Deprecation period with the exact date the deprecated version will be taken offline;</li>
<li>Migration plan to easily transition to the new version;</li>
<li>Overview of added, changed or removed features;</li>
<li>Breaking changes for the current implementation;</li>
<li>Contact details to request an extension of the deprecation period.</li>
</ul><p>These should be communicated using the following channels:</p><ul>
<li>To the e-mail accounts of the users (if known)</li>
<li>Clearly visible in the documentation of the previous version;</li>
<li>Using a <code>Warning</code> response header in all responses from the old API.</li>
</ul><p>A step-by-step approach:</p><ol>
<li>Launch new version;</li>
<li>Determine deprecation period;</li>
<li>Write migration plan;</li>
<li>Communicate in the API documentation of the old version;</li>
<li>Communicate per e-mail, Web forum and other channels;</li>
<li>Add <code>Warning</code> response header to the old version;</li>
<li>Check logs to monitor the usage of the old version during the deprecation period;</li>
<li>Shut down end-point of the old version at the planned date and monitor feedback;</li>
<li>No feeedback related to the old version within two weeks, remove the old version (including docs);</li>
</ol></section><section id="the-warning-response-header"><h3 id="x5-2-the-warning-response-header"><span class="secno">5.2 </span>The Warning response header</h3><p>The <code>Warning</code> reponse header (see: RFC 7234) has the status code 299 ("Miscellaneous Persistent Warning") and the API endpoint (including version number) as the warn-agent of the warning, followed by the warn-text with the human-readable warning. For example:</p><p><code>Waarschuwing: 299 https://service.../api/.../v1 "Deze versie van de API is verouderd en zal uit dienst worden genomen op 2020-02-01. Raadpleeg voor meer informatie hier de documentatie: https://omgevingswet.../api/.../v1".</code></p><p>Users should have sufficient time to phase out the old API. A period of 6 to 12 months is recommended.</p><blockquote>
<p><a href="#api-21">API principle: Inform users of a deprecated API actively</a></p>
</blockquote></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="json"><!--OddPage--><h2 id="x6-json"><span class="secno">6. </span>JSON</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-3"><div role="heading" class="warning-title marker" id="h-warning-2" aria-level="3"><span>Warning</span></div><p class="">This extension is still in development and can be modified at any time.</p></div><p>JavaScript Object Notation (JSON) is a format, just like XML, to serialise, store and transfer data. JSON is the primary representation format for APIs. For more information about JSON, read <a href="https://json.org">https://json.org</a>. In contrast to XML, JSON has a compact notation, for example:</p><pre><code class="language-json hljs" aria-busy="false">{
"persoon": {
  "naam": "Jan",
  "geboortejaar": 1983
}
}</code></pre><blockquote>
<p><a href="#api-22">API principle: JSON first - APIs receive and send JSON</a></p>
</blockquote><blockquote>
<p><a href="#api-23">API principle: APIs may provide a JSON Schema</a></p>
</blockquote><blockquote>
<p><a href="#api-24">API principle: Support content negotiation</a></p>
</blockquote><blockquote>
<p><a href="#api-25">API principle: Check the Content-Type header settings</a></p>
</blockquote><section id="field-names-in-snake_case-camelcase-uppercamelcase-or-kebab-case"><h3 id="x6-1-field-names-in-snake_case-camelcase-uppercamelcase-or-kebab-case"><span class="secno">6.1 </span>Field names in <code>snake_case</code>, <code>camelCase</code>, <code>UpperCamelCase</code>, or <code>kebab-case</code>?</h3><p>Use <code>camelCase</code> for field names.</p><blockquote>
<p><a href="#api-26">API principe: Define field names in in <code>camelCase</code></a></p>
</blockquote></section><section id="pretty-print"><h3 id="x6-2-pretty-print"><span class="secno">6.2 </span>Pretty print</h3><p>Most REST clients and browsers (whether or not using extensions) can display JSON nicely formatted, even if the response does not include white-space.</p><blockquote>
<p><a href="#api-27">API principle: Disable pretty print</a></p>
</blockquote></section><section id="do-not-use-envelope"><h3 id="x6-3-do-not-use-envelope"><span class="secno">6.3 </span>Do not use envelope</h3><p>Many APIs encapsulate responses in envelopes like below:</p><pre><code class="language-json hljs" aria-busy="false">{
"persoon": {
  "naam": "Jan",
  "geboortejaar": 1983
}
}</code></pre><p>A future-proof API does not have envelopes.</p><blockquote>
<p><a href="#api-28">API principle: Send a JSON-response without enclosing envelope</a></p>
</blockquote></section><section id="json-encoded-post-put-and-patch-payloads"><h3 id="x6-4-json-encoded-post-put-and-patch-payloads"><span class="secno">6.4 </span>JSON-encoded <code>POST</code>, <code>PUT</code>, and <code>PATCH</code> payloads</h3><p>APIs should at least support JSON-encoded <code>POST</code>, <code>PUT</code>, and <code>PATCH</code> payloads. Encoded form data (<code>application/x-www-form-urlencoded</code>) payloads are not supported. What is the difference?</p><p><code>Content-Type: application/json</code> results in:</p><pre><code class="language-json hljs" aria-busy="false">{
"Name": "John Smith",
"Age": 23
}</code></pre><p>and <code>Content-Type: application/x-www-form-urlencoded</code> results in: <code>Name=John+Smith&amp;Age=23</code></p><blockquote>
<p><a href="#api-29">API principle: Support JSON-encoded <code>POST</code>, <code>PUT</code>, and <code>PATCH</code> payloads</a></p>
</blockquote></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="filtering"><!--OddPage--><h2 id="x7-filtering"><span class="secno">7. </span>Filtering</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-4"><div role="heading" class="warning-title marker" id="h-warning-3" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>Base URLs of resources should be as straightforward as possible. Complex result filters, sorting, and advanced querying (restricted to a single resource) are implemented as query paramters on top of the base URL.</p><p>Filtering uses unique query parameters that correspond to the queryable fields. If you would like to request a list of <em>applications</em> from the end point <code>/aanvragen/</code> and limit this to <em>open</em> applications, use the request <code>GET /aanvragen?status=open</code> gebruikt. In this example <code>status</code> is a queryable field.</p><blockquote>
<p><a href="#api-30">API principle: Use query parameters corresponding to the queryable fields</a></p>
</blockquote><p>This appreoach can be applied to nested properties as well. This is the collection:</p><pre><code class="language-json hljs" aria-busy="false">[{
"id": 1,
"status": "actief",
"overheid": {
  "code": "0000",
  "naam": "Ministerie van BZK"
}
}, {
"id": 2,
"status": "inactief",
"overheid": {
  "code": "9901",
  "naam": "Provincie Gelderland"
}
}]</code></pre><p>All objects with the status <em>actief</em> can be filtered using <code>/?status=actief</code>. Filtering objects with code <em>0000</em> of the property <em>overheid</em> at the same time, this relates to a nested property. In this case, use the dot notation (like JavaScript): <code>/?status=actief&amp;overheid.code=0000</code>.</p></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="sorting"><!--OddPage--><h2 id="x8-sorting"><span class="secno">8. </span>Sorting</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-5"><div role="heading" class="warning-title marker" id="h-warning-4" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>To sort, use the query parameter <code>sorteer</code>. This query parameter takes a comma-separated list of field names to be used in the sort. Prefixing a filed name with a minus sign (<em>-</em>), the field is sorted in descending order. A few examples:</p><table>
<thead>
<tr>
<th>Request</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td><code>GET /aanvragen?sorteer=-prio</code></td>
<td>Retrieves a list of <em>aanvragen</em> sorted by the property <em>prio</em> in descending order.</td>
</tr>
<tr>
<td><code>GET /aanvragen?sorteer=-prio,aanvraagDatum</code></td>
<td>Retrieves a list of <em>aanvragen</em> sorted by the property <em>prio</em>  in descending order. Within a specific value of <em>prio</em>, the objects are sorted by <em>aanvraagDatum</em> in ascending order.</td>
</tr>
</tbody></table><blockquote>
<p><a href="#api-31">API principle: Use the query parameter <code>sorteer</code> to sort</a></p>
</blockquote></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="search"><!--OddPage--><h2 id="x9-search"><span class="secno">9. </span>Search</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-6"><div role="heading" class="warning-title marker" id="h-warning-5" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>Sometimes, straightforward filters are not sufficient and the capabilities of full-text search engines are required. APIs support full-text search using the query parameter <code>zoek</code>. The result is returned in the same representation.</p><blockquote>
<p><a href="#api-32">API principle: Use the query parameter <code>zoek</code> for full-text search</a></p>
</blockquote><p>Examples combining filtering, sorting, and searching:</p><table>
<thead>
<tr>
<th>Request</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td><code>GET /aanvragen?sorteer=-wijzigingDatum</code></td>
<td>Retrieves a list of <em>aanvragen</em> sorted by <em>wijzigingsDatum</em>  in descending order</td>
</tr>
<tr>
<td><code>GET /aanvragen?status=gesloten&amp;sorteer=-wijzigingDatum</code></td>
<td>Retrieves a list of <em>aanvragen</em> filtered by the <em>status</em> property set to <em>gesloten</em> and sorted by <em>wijzigingsDatum</em>  in descending order</td>
</tr>
<tr>
<td><code>GET /aanvragen?zoek=urgent&amp;status=open&amp;sorteer=-prio,aanvraagDatum</code></td>
<td>Retrieves a list of <em>aanvragen</em> containing the word <em>urgent</em> and filtered by the <em>status</em> property set to <em>open</em>. The list is sorted by <em>prio</em>  in descending order and subsequently sorted by <em>aanvraagDatum</em>  in ascending order.</td>
</tr>
</tbody></table><section id="wildcards"><h3 id="x9-1-wildcards"><span class="secno">9.1 </span>Wildcards</h3><p>APIs supporting full-text searching may take two types of wildcard characters:</p><ul>
<li><code>*</code> Matches 0 or more (non-space) characters</li>
<li><code>?</code> Matches exactly one (non-space) character</li>
</ul><p>For example, <code>he*</code> matches any string starting with <code>he</code>, like <code>hek</code>, <code>hemelwaterafvoer</code>, et cetera. The search string <code>he?</code> only matches 3-letter strings that start with <code>he</code>, like <code>hek</code>, <code>heg</code>, et cetera.</p><blockquote>
<p><a href="#api-33">API principle: Support both <code>*</code> and <code>?</code> wildcard characters for full-text search APIs</a></p>
</blockquote><p>Find below some base rules for wildcard searches:</p><ul>
<li>A search term may contain multiple wildcard characters.</li>
<li>A search term may contain a combination of wildcard characters. For example <code>m*??</code> matches any string that starts with <code>m</code> and has three or more characters.</li>
<li>Spaces (URL-encoded as <code>%20</code>) are used as word boundaries and wildcard matching only operates within a single word. For example, <code>r*te*</code> matches the string <strong><code>r</code></strong><code>uim</code><strong><code>te</code></strong><code>lijk</code>, but not the phrase <strong><code>r</code></strong><code>uimte</code> <strong><code>te</code></strong><code>kort</code>.</li>
<li>Wildcards only operate on fields that contain alphanumerical values.  </li>
</ul></section><section id="aliases-for-common-queries"><h3 id="x9-2-aliases-for-common-queries"><span class="secno">9.2 </span>Aliases for common queries</h3><p>To improve the API experience, common queries should be provided as end point. For example, <em>aanvragen</em> that have the <em>status</em> property set to <em>gesloten</em> and sorted by <em>wijzigingsDatum</em> in descending order, i.e. recently closed applications, can be retrieved using the following end point:</p><p><code>GET /aanvragen/recent-gesloten</code></p></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="time-travelling"><!--OddPage--><h2 id="x10-time-travelling"><span class="secno">10. </span>Time travelling</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-7"><div role="heading" class="warning-title marker" id="h-warning-6" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>Information about a resource may change over time. Time travelling is a default mechanism to request information about a specific moment in time is. From the perspective of time travelling using an API, there are three important moments in time:</p><table>
<thead>
<tr>
<th>Moment in time</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>Geldig</td>
<td>This is a moment in time on which the data returned is valid (<em>geldig</em>) in reality.</td>
</tr>
<tr>
<td>Beschikbaar</td>
<td>This is a moment in time on which the data returned is available (<em>beschikbaar</em>) using the same API.</td>
</tr>
<tr>
<td>In werking (getreden op)</td>
<td>This is a moment in time on which the data returned became legally effective (<em>in werking getreden op</em>).</td>
</tr>
</tbody></table><p>The base principle for time travelling is as follows:</p><ul>
<li>If no specific date is supplied, tehn the most recent, valid information is returned. If no valid versions exists yet, then the most recent known version is returned;</li>
<li>If a specific date is supplied, it is passed as a a query parameter in the URI.</li>
<li>Supplying a specific date, use the following query parameters respectively:</li>
<li>date on which the data is valid (geldigOp);</li>
<li>date on which the data are available (beschikbaarOp);</li>
<li>date on which the date became legally effectiven (inWerkingOp).</li>
</ul><p>The values of these three query parameters in the URI are structured like this (based on RFC3339 / ISO 8601):</p><table>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td><code>geldigOp</code></td>
<td><code>YYYY-MM-DD</code></td>
</tr>
<tr>
<td><code>beschikbaarOp</code></td>
<td><code>YYYY-MM-DDThh:mm:ss.s</code></td>
</tr>
<tr>
<td><code>inWerkingOp</code></td>
<td><code>YYYY-MM-DD</code></td>
</tr>
</tbody></table><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>YYYY</code></td>
<td>Four-digit year</td>
</tr>
<tr>
<td><code>MM</code></td>
<td>Two-digit month (01 = January, etc.)</td>
</tr>
<tr>
<td><code>DD</code></td>
<td>Two-digit day of the month (01 to 31)</td>
</tr>
<tr>
<td><code>hh</code></td>
<td>Two-digit hour (00 to 23) (am / pm not allowed)</td>
</tr>
<tr>
<td><code>mm</code></td>
<td>Two-digit minute (00 to 59)</td>
</tr>
<tr>
<td><code>ss</code></td>
<td>Two-digit second (00 to 59)</td>
</tr>
<tr>
<td><code>s</code></td>
<td>One or more digits to represent the decimal fraction of a second</td>
</tr>
</tbody></table><section id="level-of-support"><h3 id="x10-1-level-of-support"><span class="secno">10.1 </span>Level of support</h3><p>Time travelling is an optional mechanism with optional features. It may be that:</p><ul>
<li>time travelling is not supported at all;</li>
<li>the notion <em>legally effective</em> is not supported;</li>
<li>time travelling to the future is not supported.</li>
</ul><p>Users have to be informed of the invalid/not-supported requests when processing time travelling requests:</p><table>
<thead>
<tr>
<th>Not supported?</th>
<th>HTTP status code and explanation</th>
</tr>
</thead>
<tbody><tr>
<td>Time travelling</td>
<td><code>HTTP/1.1 403 Content-Type: application/problem+json Content-Language: nl { "type": ".../id/&lt;c&gt;/parameter/TijdreizenNietOndersteund", "title": "{Het verzoek is begrepen, maar de tijdreisparameters worden niet ondersteund}", "status": 403, "detail": "{Tijdreizen wordt niet ondersteund, verwijder alle tijdreisparameters}", "instance": "/resource/#id"}</code></td>
</tr>
<tr>
<td>Legally effective</td>
<td><code>HTTP/1.1 403 Content-Type: application/problem+json Content-Language: nl { "type":".../id/&lt;c&gt;/parameter/InWerkingTredingNietOndersteund’", "title": "{Het verzoek is begrepen, maar de tijdreisparameter ‘inWerkingOp’ wordt niet ondersteund}", "status": 403, "detail": "{Tijdreizen met een inwerkingstredingsmoment wordt niet ondersteund, verwijder de parameter ‘inWerkingOp’}", "instance": "/resource/#id"}</code></td>
</tr>
<tr>
<td>Future</td>
<td><code>HTTP/1.1 403 Content-Type: application/problem+json Content-Language: nl { "type": ".../id/&lt;c&gt;/parameter/ToekomstNietOndersteund", "title": "{Het verzoek is begrepen, maar tijdreisparameters mogen geen tijdstip in de toekomst bevatten” }", "status": 403, "detail": "{Tijdreizen naar de toekomst wordt niet ondersteund, verwijder de tijdreisparameters of gebruik een tijdstip in het verleden}", "instance": "/resource/#id"}</code></td>
</tr>
</tbody></table></section><section id="robustness"><h3 id="x10-2-robustness"><span class="secno">10.2 </span>Robustness</h3><p>Users have to be informed of the lack of historical data and general requests in a resource collection when processing time travelling requests:</p><table>
<thead>
<tr>
<th>Request</th>
<th>HTTP status code and explanation</th>
</tr>
</thead>
<tbody><tr>
<td>Specific resource</td>
<td><code>HTTP/1.1 404 Content-Type: application/problem+json Content-Language: nl {"type": ".../id/&lt;c&gt;/BestaatNiet", "title": "De gevraagde versie bestaat niet.", "status": 404, "detail": "Versie 2017-01-01 van regeling 123 bestaat niet.", "instance": "/regelingen/v1/123?geldigOp=2017-01-01"}</code></td>
</tr>
<tr>
<td>Resource-collectie</td>
<td><code>GET .../regelingen/v1?beschikbaarOp=2017-01-01T00:00:00 HTTP/1.1 200 Content-Type: application/json+hal {"_links": {"self": {"href": "/r-n/v1/123?beschikbaarOp=2017-01-01T00:00:00" }, "items": [ { "href": "/r-n/v1/123?beschikbaarOp=2017-01-01T00:00:00" }, { "href": "/r-n/v1/456?beschikbaarOp=2017-01-01T00:00:00" }, { "href": "/r-n/v1/789?beschikbaarOp=2017-01-01T00:00:00" }] } }</code></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="geo-support"><!--OddPage--><h2 id="x11-geo-support"><span class="secno">11. </span>GEO support</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-8"><div role="heading" class="warning-title marker" id="h-warning-7" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>REST APIs for handling spatial geometries may provide spatial filtering. There is a distinction between retrieving geometries in the result (response) and supplying a spatial filter in the call (request). When requesting parcel information, users do not necessarily require the geometry. A name or parcel ID may be sufficient.</p><blockquote>
<p><a href="#api-34">API principle: Support GeoJSON for GEO APIs</a></p>
</blockquote><p>For GEO APIs, preferably use the GeoJSON standard [<cite><a class="bibref" href="#bib-rfc8142">rfc8142</a></cite>].</p><section id="result-response"><h3 id="x11-1-result-response"><span class="secno">11.1 </span>Result (response)</h3><p>In a JSON API the geometry is returned as GeoJSON, wrapped in a separate GeoJSON object.</p><blockquote>
<p><a href="#api-35">API principle: Include GeoJSON as part of the embedded resource in the JSON response</a></p>
</blockquote></section><section id="call-requests"><h3 id="x11-2-call-requests"><span class="secno">11.2 </span>Call (requests)</h3><p>A spatial filter can be complex and large. It is best practice to supply complex queries in the body, not in the request URI. Since <code>GET</code> may not have a payload (although supported by some clients) use a <code>POST</code> request to a separate endpoint. For example, a GEO query to all <em>panden</em> where the geometry in the field <code>_geo</code> (there may be multiple geometry fields) contains a GeoJSON object (in this case a <code>Point</code>, so one coordinate pair):</p><pre><code class="language-json hljs" aria-busy="false">// POST /api/v1/panden/_zoek with request body:
{
"_geo": {
  "contains": {
    "type": "Point",
    "coordinates": [5.9623762, 52.2118093]
  }
}
}</code></pre><blockquote>
<p><a href="#api-36">API principle: Provide a <code>POST</code> endpoint for GEO queries</a></p>
</blockquote><p>The <code>POST</code> endpoint is preferably set up as a generic query endpoint to support combined queries:</p><pre><code class="language-json hljs" aria-busy="false">// POST /api/v1/panden/_zoek with request body:
{
"_geo": {
  "contains": {
    "type": "Point",
    "coordinates": [5.9623762, 52.2118093]
  }
},
"status": "Actief"
}</code></pre><blockquote>
<p><a href="#api-37">API principle: Support mixed queries at <code>POST</code> endpoints</a></p>
</blockquote><p>Other GEO queries like <code>intersects</code> or <code>within</code> operators can be used as well. For further information, read: <a href="https://www.w3.org/TR/sdw-bp/#entity-level-links">https://www.w3.org/TR/sdw-bp/#entity-level-links</a>  </p><blockquote>
<p><a href="#api-38">API principle: Put results of a global spatial query in the relevant geometric context</a></p>
</blockquote><p>For example:</p><pre><code class="language-json hljs" aria-busy="false">// POST /api/v1/_zoek:
{
"_embedded": {
  "results": [{
    "type": "enkelbestemming",
    "_links": {
      "self": {
        "title": "Enkelbestemming 1234",
        "href": "/enkelbestemmingen/1234"
      }
    }
  }, {
    "type": "dubbelbestemming",
    "_links": {
      "self": {
        "title": "Dubbelbestemming 8765",
        "href": "/dubbelbestemmingen/8765"
      }
    }
  }]
}
}</code></pre></section><section id="crs-negotiation"><h3 id="x11-3-crs-negotiation"><span class="secno">11.3 </span>CRS-negotiation</h3><p>The default CRS (Coordinate Reference System) for GeoJSON is WGS84. This is the global coordinate reference system that can be applied world-wide. Due the datum and the tectonic displacements it is not accurate enough for local coordinate reference systems like ETRS89 (EPSG:4258, European), or RD/Amersfoort (EPSG:28992, Dutch).</p><p>Since most client-side mapping libraries use WGS84, the W3C/OGC working group <em>Spatial Data on the Web</em> recommends to use this as the default coordinate reference system. Thus, spatial data can be mapped without any complex transformations. The API strategy caters for this supporting not only ETRS89 and RD/Amersfoort, but also WGS84 and Web Mercator (EPSG:3857).</p><blockquote>
<p><a href="#api-39">API principle: Use ETRS89 as the preferred coordinate reference system (CRS)</a></p>
</blockquote><p>The CRS can be specified for request and response individually using custom headers: RD/Amersfoort, ETRS89, WGS84, and Web Mercator.</p><p>The guiding priciples for CRS support:</p><ul>
<li>Source systems record coordinates as they enter the system (legal context);</li>
<li>Coordinate reference systems API strategy: request/response in RD; ETRS89; WGS84; Web Mercator;</li>
<li>Consider no-regret: record both in ETRS89 and RD/Amersfoort instead of on-the-fly transformation;</li>
<li>Use RDNAPTRANS™ 2018 to transform RD/Amersfoort to ETRS89 (correction grid);</li>
<li>Presentation depending on context (e.g. user requirements);</li>
<li>Exchange format (notation) ETRS89 and WGS84 X Y in decimal degrees: DD.ddddddddd (for example: <code>5.962376256, 52.255023450</code>)</li>
<li>Exchange format (notation) RD and Web Mercator X Y in meters: <code>195427.5200 311611.8400</code></li>
</ul><blockquote>
<p><a href="#api-40">API principe: Pass the coordinate reference system (CRS) of the request and the response in the headers</a></p>
</blockquote><p>The following headers are purely meant for negotiation between the client and the server. Depending on the application, the request not only contains geometries but also specific meta data, e.g. the original realistion including the collection date. </p><p>Request and response may be based on another coordinate reference system. This applies the HTTP-mechanism for content negotiation. The CRS of the geometry in the request (request body) is specified using the header <code>Content-Crs</code>.</p><table>
<thead>
<tr>
<th>HTTP header</th>
<th>Value</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td><code>Content-Crs</code></td>
<td>EPSG:4326</td>
<td>WGS84, global</td>
</tr>
<tr>
<td><code>Content-Crs</code></td>
<td>EPSG:3857</td>
<td>Web Mecator, global</td>
</tr>
<tr>
<td><code>Content-Crs</code></td>
<td>EPSG:4258</td>
<td>ETRS89, European</td>
</tr>
<tr>
<td><code>Content-Crs</code></td>
<td>EPSG:28992</td>
<td>RD/Amersfoort, Dutch</td>
</tr>
</tbody></table><p>The preferred CRS for the geometry in the response (response body) is specified using the header <code>Accept-Crs</code>.  </p><table>
<thead>
<tr>
<th>HTTP header</th>
<th>Value</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td><code>Accept-Crs</code></td>
<td>EPSG:4326</td>
<td>WGS84, global</td>
</tr>
<tr>
<td><code>Accept-Crs</code></td>
<td>EPSG:3857</td>
<td>Web Mercator, global</td>
</tr>
<tr>
<td><code>Accept-Crs</code></td>
<td>EPSG:4258</td>
<td>ETRS89, European</td>
</tr>
<tr>
<td><code>Accept-Crs</code></td>
<td>EPSG:28992</td>
<td>RD/Amersfoort, Dutch</td>
</tr>
</tbody></table></section><section id="crs-transformation"><h3 id="x11-4-crs-transformation"><span class="secno">11.4 </span>CRS transformation</h3><p>Certified software is available to the national government to transform between coordinate reference systems.</p><blockquote>
<p><a href="#api-41">API principle: Use content negotiation to serve different CRSs</a></p>
</blockquote></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="paging"><!--OddPage--><h2 id="x12-paging"><span class="secno">12. </span>Paging</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-9"><div role="heading" class="warning-title marker" id="h-warning-8" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>For content identified with the media type 'application/hal+json', Hypertext Application Language (HAL) is used for paging. Two reserved fields, <code>_links</code> (required) and <code>_embedded</code> (optional) are added to retrieved objects. These fields represent hyperlinks and embedded resources respectively:</p><pre><code class="language-json hljs" aria-busy="false">{
"_links": {
  "self": {
    "href": "https://.../api/registratie/v1/aanvragen?pagina=3"
  },
  "first": {
    "href": "https://.../api/registratie/v1/aanvragen"
  },
  "prev": {
    "href": "https://.../api/registratie/v1/aanvragen?pagina=2"
  },
  "next": {
    "href": "https://.../api/registratie/v1/aanvragen?pagina=4"
  },
  "last": {
    "href": "https://.../api/registratie/v1/aanvragen?pagina=5"
  }
},
"id": "https://.../api/registratie/v1/aanvragen/12",
"naam": "Mijn dakkapel",
"samenvatting": "Ik wil een dakkapel bouwen!",
"_embedded": {
  "aanvrager": {
    "naam": "Bob"
  }
}
}</code></pre><p>In case of plain JSON, GeoJSON, or something different from HAL, the <code>_links</code> field is omitted. These may be added to the link response headers. Besides the representation the following metadata is returned using HTTP headers.</p><table>
<thead>
<tr>
<th>HTTP header</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td><code>X-Total-Count</code> (optional)</td>
<td>Total number of results</td>
</tr>
<tr>
<td><code>X-Pagination-Count</code> (optional)</td>
<td>Total number of pages</td>
</tr>
<tr>
<td><code>X-Pagination-Page</code> (optional)</td>
<td>Current page</td>
</tr>
<tr>
<td><code>X-Pagination-Limit</code> (optional)</td>
<td>Number of results per page</td>
</tr>
</tbody></table><p>For large collections, the generation of <code>X-Total-Count</code> and <code>X-Pagination-Count</code> may have a considerable impact on the performance, particularly if there is no or limited filtering.</p><blockquote>
<p><a href="#api-42">API principle: Use JSON+HAL with media type <code>application/hal+json</code> for pagination</a></p>
</blockquote><p>All links in HAL are absolute. This relieves clients from the burder to resolve URLs to external links (to other endpoints, linked-data resources, etc.) for navigation.</p></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="caching"><!--OddPage--><h2 id="x13-caching"><span class="secno">13. </span>Caching</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-10"><div role="heading" class="warning-title marker" id="h-warning-9" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>For some resources, caching is required. HTTP provides default mechanisms for caching. Furthermore, both clients and infrastructure already handle these mechanisms by default.  </p><p>The requirements to leverage these default caching mechanisms:</p><ul>
<li>Add a few HTTP response headers;</li>
<li>Handle a few HTTP request headers.</li>
</ul><p>There are 2 ways to implement caching: <code>ETag</code> and <code>Last-Modified</code>.</p><section id="etag"><h3 id="x13-1-etag"><span class="secno">13.1 </span>ETag</h3><p>An ETag (Entity Tag) is a hash code or checksum of a resource. A modification of a resource results in another ETag. Hence, an ETag is unique to a particular version of a resource. Returning a resource, the ETag is added as the HTTP header <code>ETag</code>. The client caches both the resource and the ETag. Requesting the same resource, this ETag is supplied in the HTTP request header <code>If-None-Match</code>. The server matches the ETag in the HTTP request header <code>If-None-Match</code> to the ETag for the resource available to the server. In case these match, the server returns a HTTP response status code <code>304 Not Modified</code> terug. The client retrieves the resource from its own cache. This only applies to client-side caching, in case the client sends the request headers along, otherewise it receives an HTTP status code <code>200 OK</code>.</p></section><section id="last-modified"><h3 id="x13-2-last-modified"><span class="secno">13.2 </span>Last-Modified</h3><p>It works just like ETag, but uses timestamps instead. The response HTTP header <code>Last-Modified</code> contains a timestamp that corresponds to the RFC 1123 notation and is valided against the request HTTP header <code>If-Modified-Since</code>. The server checks whether the resource has been modified since the timestamp provided. If not, the server returns an HTTP status code <code>304 Not Modified</code>. The client retrieves the resource from its own cache. This only applies to client-side caching, in case the client sends the request headers along, otherewise it receives an HTTP status code <code>200 OK</code>.</p><blockquote>
<p><a href="#api-43">API principle: Apply caching to improve performance</a></p>
</blockquote></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="rate-limiting"><!--OddPage--><h2 id="x14-rate-limiting"><span class="secno">14. </span>Rate limiting</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-11"><div role="heading" class="warning-title marker" id="h-warning-10" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>APIs limit the amount of requests that can be sent within a particular time frame to prevent server overload and to guarantee a high service level. APIs may track a rate limit (quota) per month that is enforced per 60 second time interval.</p><p>HTTP headers communicate the rate limit to the users.</p><table>
<thead>
<tr>
<th>HTTP header</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td><code>X-Rate-Limit-Limit</code></td>
<td>Amount of client requests per time frame</td>
</tr>
<tr>
<td><code>X-Rate-Limit-Remaining</code></td>
<td>Amount of remaining client request in the current time frame</td>
</tr>
<tr>
<td><code>X-Rate-Limit-Reset</code></td>
<td>Amount of remaing seconds in the current time frame</td>
</tr>
</tbody></table><blockquote>
<p><a href="#api-44">API principe: Apply rate limiting</a></p>
</blockquote><p>[<cite><a class="bibref" href="#bib-rfc6585">rfc6585</a></cite>] introduces an HTTP status code <code>429 Too Many Requests</code> to inform users the rate limit has been reached.</p><blockquote>
<p><a href="#api-45">API principe: Provide rate limiting information</a></p>
</blockquote><section id="expose-api-key"><h3 id="x14-1-expose-api-key"><span class="secno">14.1 </span>Expose API-key</h3><p>API keys are "unrestricted" by default. There are no usage restrictions and these API keys should therefore not be exposed in a web application. Using API keys without usage restrictions in JavaScript creates a real change for abuse and quota theft. To prevent this, restricted API keys should be issued and used.</p><blockquote>
<p><a href="#api-49">API principe: Use <em>public</em> API-keys</a></p>
</blockquote></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="error-handling"><!--OddPage--><h2 id="x15-error-handling"><span class="secno">15. </span>Error handling</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-12"><div role="heading" class="warning-title marker" id="h-warning-11" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>Like a Web page displays useful error messages to visitors in case of an error, an API should return useful error message in a known and manageable format. The representation of an error is no different from the representation of a random resource, but with a particular set of fields.</p><p>APIs should always return useful HTTP status codes. HTTP status codes are divided in two categories:</p><ul>
<li>400 range: content errors</li>
<li>500 range: internal server errors</li>
</ul><p>A JSON representation of an error should contain a few details to assist developers, operators, and users:  </p><ul>
<li>A unique error type formulated as a URI pointing to further informtion in external (HTML) documentation;</li>
<li>A short, but useful error message;</li>
<li>A detailed description of the error (that assists in solving the issue);</li>
<li>A unique identifier formulated as a URI point to the specific occurence of the error (the error instance). Preferably, the URN should only allow authorized users to search the error logs.  </li>
</ul><p>The base for these default formats is [<cite><a class="bibref" href="#bib-rfc7807">rfc7807</a></cite>]. A JSON-representation of an error is formulated like the following object:</p><pre><code class="language-json hljs" aria-busy="false">{
"type": "URI: https://content.omgevingswet.overheid.nl/id/&lt;c&gt;[/{categorie}]/{fout}",
"title": "Hier staat wat er is misgegaan",
"status": 401,
"detail": "Meer details over de fout staan hier",
"instance": "urn:uuid:ebd2e7f0-1b27-11e8-accf-0ed5f89f718b" // The error instance  
}</code></pre><p>Validation errors for <code>POST</code>, <code>PUT</code>, and <code>PATCH</code> requests are specified per field. The full list of errors is returned concurrently. The response consists of a fixed top level and error code for validation error and additional error fields with detailed errors per field:</p><pre><code class="language-json hljs" aria-busy="false">{
"type": "https://content.omgevingswet.overheid.nl/id/&lt;c&gt;/ValidatieFout",
"title": "Hier staat wat er is misgegaan…",
"status": 400,
"invalid-params": [{
  "type": "https://content.omgevingswet.overheid.nl/id/&lt;c&gt;/validatie/Voornaam",
"name": "voornaam",
"reason": "De voornaam mag geen speciale karakters bevatten."
}, {
"type": " https://content.../&lt;c&gt;/fouten/validatie/Wachtwoord",
"name": "wachtwoord",
"reason": "Het wachtwoord is verplicht."
}],
"instance": "urn:uuid:4017fabc-1b28-11e8-accf-0ed5f89f718b" // De fout-instantie
}</code></pre><blockquote>
<p><a href="#api-46">API principle: Use default error handling</a></p>
</blockquote><section id="http-status-codes"><h3 id="x15-1-http-status-codes"><span class="secno">15.1 </span>HTTP status codes</h3><p>HTTP defines a range of default status codes for APIs. These assist users to of the APIs to handle errors.  </p><blockquote>
<p><a href="#api-47">API principle: Use the required HTTP status codes</a></p>
</blockquote><p>Summary of HTTP operations and the primary HTTP status codes:</p><table>
<thead>
<tr>
<th>Operation</th>
<th>CRUD</th>
<th>Full collection (e.g. <code>/resource</code>) <br> specific item (e.g. <code>/resource/\&lt;id&gt;</code>)</th>
</tr>
</thead>
<tbody><tr>
<td><code>POST</code></td>
<td>Create</td>
<td>201 (Created), HTTP header <code>Location</code> with the URI to the new resource (<code>/resource/\&lt;id&gt;</code>)<br>405 (Method Not Allowed), 409 (Conflict) in case the resource already exists</td>
</tr>
<tr>
<td><code>GET</code></td>
<td>Read</td>
<td>200 (OK), list of resources. Use paging, filtering and sorting to ease the handling of large collections<br>200 (OK) single resource, 404 (Not Found) if the ID does not exist or is invalid</td>
</tr>
<tr>
<td><code>PUT</code></td>
<td>Update</td>
<td>405 (Method Not Allowed), except for the purpose to modify or replace every resource in a collection<br>409 in case a modification is not possible due to the current state of an instance<br>200 (OK) or 204 (No Content), 404 (Not Found) if the ID does not exist or is invalid</td>
</tr>
<tr>
<td><code>PATCH</code></td>
<td>Update</td>
<td>405 (Method Not Allowed), except for the purpose to replace the full collection. <br>409 if a modification is not possible due to the current state of an instance.<br>200 (OK) or 204 (No Content), 404 (Not Found) if the ID does not exist or is invalid</td>
</tr>
<tr>
<td><code>DELETE</code></td>
<td>Delete</td>
<td>405 (Method Not Allowed), except for the purpose to remove the full collection.<br>200 (OK) or 404 (Not Found) if the ID does not exist or is invalid</td>
</tr>
</tbody></table><p>A short list and description of HTTP status codes:</p><table>
<thead>
<tr>
<th>HTTP status code</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>200 OK</td>
<td>Response to a successful <code>GET</code>, <code>PUT</code>, patch or <code>DELETE</code>. Also suitable for <code>POST</code> that does not result in a creation</td>
</tr>
<tr>
<td>201 Created</td>
<td>Response to a <code>POST</code> that results in a creation. Should be combined with a location header that points to the location of the newly created resource</td>
</tr>
<tr>
<td>204 No Content</td>
<td>Response to a successful request that does not return content (e.g. a <code>DELETE</code>)</td>
</tr>
<tr>
<td>304 Not Modified</td>
<td>If HTTP caching headers are applied</td>
</tr>
<tr>
<td>400 Bad Request</td>
<td>The request is invalid, e.g. in case the request (body) cannot be interpreted</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>If no or invalid authentication credentials are supplied. Also useful to display an authentication window if the API is used in a Web browser</td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>Response to a successful authentication, but the verified users is not authorised to access the resource</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>Response to a request for a non-existing resource</td>
</tr>
<tr>
<td>405 Method Not Allowed</td>
<td>Response to an HTTP method that is not allowed for the authenticated user</td>
</tr>
<tr>
<td>406 Not Acceptable</td>
<td>Reponse to an unsupported format request (part of content negotiation)</td>
</tr>
<tr>
<td>409 Conflict</td>
<td>The request cannot be handled due to a conflict with the current state of the resource</td>
</tr>
<tr>
<td>410 Gone</td>
<td>Indicates the resource is no longer available at the requested endpoint. Useful top level response to requests for previous API versions</td>
</tr>
<tr>
<td>412 Precondition Failed</td>
<td>The preconditions supplied in one or more fields in the request header have been omitted or failed upon validation by the server</td>
</tr>
<tr>
<td>415 Unsupported Media Type</td>
<td>If the wrong content type is supplied as part of the request</td>
</tr>
<tr>
<td>422 Unprocessable Entity</td>
<td>Response to a request (body) that is correct but that cannot be handled by the server</td>
</tr>
<tr>
<td>429 Too Many Requests</td>
<td>Response if the rate limit has been exceeded.</td>
</tr>
<tr>
<td>500 Internal Server Error</td>
<td>If an unexpected error occured and server cannot respond.</td>
</tr>
<tr>
<td>503 Service Unavailable</td>
<td>If an API is not available (e.g. due to planned maintenance)</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="signing-and-encryption"><!--OddPage--><h2 id="x16-signing-and-encryption"><span class="secno">16. </span>Signing and Encryption</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-13"><div role="heading" class="warning-title marker" id="h-warning-12" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>Signing and encryption are mechanisms that can provide additional security on top of the transport layer security that is provided by HTTP TLS in combination with some form of authentication and authorization.</p><p>In this API strategy we concern ourselves with RESTful APIs. In RESTful APIs you request the current value of a resource. This is different from SOAP based protocols where content is transported using messages. Using SOAP part of or all of the content is signed and/or encrypted by the sender of the message. This has utitlity as there are no pre conceptions about resources and their behaviour. When using REST you have to ask yourself what is being signed or encrypted. The value of a resource at a certain date and time. Does this have utility above and beyond the transport layer security thats already there?</p><p>Be aware that signing and encryption are "expensive". There is a performance hit (especially for encryption), but most of all in the real world implementation of an API using these security methods will be more expensive. Knowledge among programmers is ussually not complete, leading to extra time learning new skills. The added complexity leads to all manner of extra possibilities to create incorrect code, meaning testing will take longer.</p><p>Have a long hard look at alternatives to the technical solution of signing and encryption before commiting to using them.</p><ul>
<li>can the same goals be achieved using different (better) software architecture?</li>
<li>can the goals be achieved using (business) contracts, audits etc... ?
The alternatives above may seem expensive as well but in practice could be cheaper.</li>
</ul><section id="signing"><h3 id="x16-1-signing"><span class="secno">16.1 </span>Signing</h3><p>Signing can be used to achieve:</p><ul>
<li><strong>authentication:</strong> Establishes the identity of the original sender of a request/response even when send through intermediaries.</li>
<li><strong>integrity:</strong> allows the receiver of a request/response to establish that the request/response (or parts there of) have not been tampered with </li>
<li><strong>non-repudiation:</strong> ensures that the sender of a request/respons cannot plausibly deny that a request/reponse (or parts thereof) was sent by him. </li>
</ul><section id="detached-enveloping-and-enveloped-signatures"><h4 id="x16-1-1-detached-enveloping-and-enveloped-signatures"><span class="secno">16.1.1 </span>Detached, Enveloping and Enveloped signatures</h4><p>Generally speaking there are three distinct types of signature: Detached, Enveloping and Enveloped.
A signature can be detached, that is the signature is separate from the content it is signing. 
Signatures can be enveloping, that is the content being signed is contained within the signature itself. The last option is an enveloped signature, that is the signature structure/element is contained wihin the content that is signed.</p></section><section id="canonicalization"><h4 id="x16-1-2-canonicalization"><span class="secno">16.1.2 </span>Canonicalization</h4><p>Canonicalization(C14n) ensures that syntactically irrelavant information such as trailing whitespaces, different line terminators or tabs do not invalidate a signature. This is especially important with detached signatures where a different rendering of (semantically) the same content can invalidate a signature. A C14n algorithm ensures semantically identical content receives the same signature.</p></section><section id="signing-within-encoding-formats"><h4 id="x16-1-3-signing-within-encoding-formats"><span class="secno">16.1.3 </span>Signing within encoding formats</h4><p>When signing takes place within an encoding format the way information is exchanged(e.g. through APIs) is not directly relevant to the way signatures are applied. The API design rules do not currently express any normative preference for encoding formats. We do have the JSON extension that expresses a non normative preference for JSON. Therefor we do include information on signing within the two most common encoding formats (XML &amp; JSON) themselves even if it is not directly related to APIs. </p><section id="signing-xml"><h5 id="x16-1-3-1-signing-xml"><span class="secno">16.1.3.1 </span>Signing XML</h5><p>The standard for XML digital signatures allows for Detached, enveloping and enveloped signatures of any XML format. <a href="https://www.w3.org/TR/xmldsig-core1/">https://www.w3.org/TR/xmldsig-core1/</a>
When using a specific XML encoding format (or instance GML for geograpic information) one should be aware that when this specific XML format was not made with digital signatures in mind it may be very difficult to implement digital signatures.
For instance for enveloped XML digital signatures most implementations expect the signature element as either the first or last element of the XML root element. An encoding standard such as GML currently does not allow users to add a signature element to the root of an xml document. Making XML signatures practically unimplementable using standard software.</p></section><section id="signing-json"><h5 id="x16-1-3-2-signing-json"><span class="secno">16.1.3.2 </span>Signing JSON</h5></section></section><section id="signing-requests-response"><h4 id="x16-1-4-signing-requests-response"><span class="secno">16.1.4 </span>Signing requests/response</h4><section id="signing-requests-respone-with-knowledge-of-encoding-format"><h5 id="x16-1-4-1-signing-requests-respone-with-knowledge-of-encoding-format"><span class="secno">16.1.4.1 </span>Signing requests/respone with knowledge of encoding format</h5><p>JWT security best practices:
<a href="https://datatracker.ietf.org/doc/draft-ietf-oauth-jwt-bcp/">https://datatracker.ietf.org/doc/draft-ietf-oauth-jwt-bcp/</a></p></section><section id="signing-requests-response-without-knowledge-of-encoding-format"><h5 id="x16-1-4-2-signing-requests-response-without-knowledge-of-encoding-format"><span class="secno">16.1.4.2 </span>Signing requests/response without knowledge of encoding format</h5></section></section></section><section id="encryption"><h3 id="x16-2-encryption"><span class="secno">16.2 </span>Encryption</h3></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="informative-api-principles"><!--OddPage--><h2 id="x17-informative-api-principles"><span class="secno">17. </span><strong>Informative API Principles</strong></h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="note" role="note" id="issue-container-generatedID-14"><div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>Note</span></div><aside class="">
API principles have unique numbers, depricated principles are removed from the list, new principles
will get a new and higher nunmber. Thus gaps in the sequence can occur
</aside></div><section id="api-11-encrypt-connections-using-at-least-tls-v1-3"><h3 id="x17-1-api-11-encrypt-connections-using-at-least-tls-v1-3"><span class="secno">17.1 </span><a name="api-11"></a>API-11: Encrypt connections using at least TLS v1.3</h3><p>Encrypt connections using at least TLS v1.3. Use TLS v1.2 as a fall-back option
only. In case of access restrictions use two-way TLD. Since the connection is
always encrypted, the authentication method is straightforward. This allows the
application of basic authentication tokens instead of encrypted authentication
tokens.</p></section><section id="api-12-allow-access-to-an-api-only-if-an-api-key-is-provided"><h3 id="x17-2-api-12-allow-access-to-an-api-only-if-an-api-key-is-provided"><span class="secno">17.2 </span><a name="api-12"></a>API-12: Allow access to an API only if an API key is provided</h3><p>Preferrably, APIs should require at least a sign-up process that involves
accepting its fair use policy before an API key is issued.</p></section><section id="api-13-accept-tokens-as-http-headers-only"><h3 id="x17-3-api-13-accept-tokens-as-http-headers-only"><span class="secno">17.3 </span><a name="api-13"></a>API-13: Accept tokens as HTTP headers only</h3><p>There is an inherent security issue when passing tokens as a query parameter,
because most Web servers store query parameters in the server logs.</p></section><section id="api-14-use-oauth-2-0-for-authorisation"><h3 id="x17-4-api-14-use-oauth-2-0-for-authorisation"><span class="secno">17.4 </span><a name="api-14"></a>API-14: Use OAuth 2.0 for authorisation</h3><p>A RESTful API should not maintain state. A token has to be sent for each
request. OAuth 2.0 is the recommended standard. Chapter <em>Beveiliging</em> contains
further information.</p></section><section id="api-15-use-pkioverheid-certificates-for-access-restricted-or-purpose-limited-api-authentication"><h3 id="x17-5-api-15-use-pkioverheid-certificates-for-access-restricted-or-purpose-limited-api-authentication"><span class="secno">17.5 </span><a name="api-15"></a>API-15: Use PKIoverheid certificates for access-restricted or purpose-limited API authentication</h3><p>In the case of APIs that have access-restrictions or purpose-limitations,
additional authentication based on PKIoverheid certificates and mutual TLS
authentication should be provided.</p></section><section id="api-21-inform-users-of-a-deprecated-api-actively"><h3 id="x17-6-api-21-inform-users-of-a-deprecated-api-actively"><span class="secno">17.6 </span><a name="api-21"></a>API-21: Inform users of a deprecated API actively</h3><p>Using the <code>Warning</code> response header in all responses of the deprecated APIs,
users are informed of the deprecation and upcoming removal date.</p></section><section id="api-22-json-first-apis-receive-and-send-json"><h3 id="x17-7-api-22-json-first-apis-receive-and-send-json"><span class="secno">17.7 </span><a name="api-22"></a>API-22: JSON first - APIs receive and send JSON</h3><p>APIs receive and send JSON.</p></section><section id="api-23-apis-may-provide-a-json-schema"><h3 id="x17-8-api-23-apis-may-provide-a-json-schema"><span class="secno">17.8 </span><a name="api-23"></a>API-23: APIs may provide a JSON Schema</h3><p>APIs may support JSON Schema (&lt;http: json-schema.org)=""&gt;to allow and facilitate
validation.</p></section><section id="api-24-support-content-negotiation"><h3 id="x17-9-api-24-support-content-negotiation"><span class="secno">17.9 </span><a name="api-24"></a>API-24: Support content negotiation</h3><p>Besides JSON, APIs should support other representations as XML and RDF using the
default HTTP content negotiation mechanism. In case the requested format cannot
be provided, a <code>406 ot Acceptable</code> response is sent.</p></section><section id="api-25-check-the-content-type-header-settings"><h3 id="x17-10-api-25-check-the-content-type-header-settings"><span class="secno">17.10 </span><a name="api-25"></a>API-25: Check the Content-Type header settings</h3><p>Check the <code>Content-Type</code> header is <code>application/json</code> or another supported
content types, otherwise send the HTTP status code <code>415 Unsupported Media Type</code>.</p></section><section id="api-26-define-field-names-in-in-camelcase"><h3 id="x17-11-api-26-define-field-names-in-in-camelcase"><span class="secno">17.11 </span><a name="api-26"></a>API-26: Define field names in in <em>camelCase</em></h3><p>Define field names in a such a way that the first word starts with a lower case
and subsequent words start with a capital letter, with no intervening spaces or
punctiation.</p></section><section id="api-27-disable-pretty-print"><h3 id="x17-12-api-27-disable-pretty-print"><span class="secno">17.12 </span><a name="api-27"></a>API-27: Disable pretty print</h3><p>The assumption is that REST clients and Web browsers (either with or without
add-ons or extensions) can pretty print JSON.</p></section><section id="api-28-send-a-json-response-without-enclosing-envelope"><h3 id="x17-13-api-28-send-a-json-response-without-enclosing-envelope"><span class="secno">17.13 </span><a name="api-28"></a>API-28: Send a JSON-response without enclosing envelope</h3><p>By default, don't apply an envelope.</p></section><section id="api-29-support-json-encoded-post-put-and-patch-payloads"><h3 id="x17-14-api-29-support-json-encoded-post-put-and-patch-payloads"><span class="secno">17.14 </span><a name="api-29"></a>API-29: Support JSON-encoded <code>POST</code>, <code>PUT</code>, and <code>PATCH</code> payloads</h3><p>APIs support at least JSON-encoded <code>POST</code>, <code>PUT</code>, and <code>PATCH</code> payloads. Encoded
form data (<code>application/x-www-form-urlencoded</code>) is not supported.</p></section><section id="api-30-use-query-parameters-corresponding-to-the-queryable-fields"><h3 id="x17-15-api-30-use-query-parameters-corresponding-to-the-queryable-fields"><span class="secno">17.15 </span><a name="api-30"></a>API-30: Use query parameters corresponding to the queryable fields</h3><p>Use uniqe query parameters that correspond to the fields that can be queried.</p></section><section id="api-31-use-the-query-parameter-sorteer-to-sort"><h3 id="x17-16-api-31-use-the-query-parameter-sorteer-to-sort"><span class="secno">17.16 </span><a name="api-31"></a>API-31: Use the query parameter <code>sorteer</code> to sort</h3><p>Specify the comma-separated field to sort using the generic query parameter
<code>sorteer</code>. Placing a minus sign (<code>-</code>) in front of a field name, the field is
sorted in descending order.</p></section><section id="api-32-use-the-query-parameter-zoek-for-full-text-search"><h3 id="x17-17-api-32-use-the-query-parameter-zoek-for-full-text-search"><span class="secno">17.17 </span><a name="api-32"></a>API-32: Use the query parameter <code>zoek</code> for full-text search</h3><p>APIs support full-text searching using the query parameter <code>zoek</code>.</p></section><section id="api-33-support-both-and-wildcard-characters-for-full-text-search-apis"><h3 id="x17-18-api-33-support-both-and-wildcard-characters-for-full-text-search-apis"><span class="secno">17.18 </span><a name="api-33"></a>API-33: Support both <code>*</code> and <code>?</code> wildcard characters for full-text search APIs</h3><p>Full-text search APIs should support two wildcard characters:</p><ul>
<li><p><code>*</code> Matches zero or more (non-space) characters</p>
</li>
<li><p><code>?</code> Matches exactly one (non-space) character</p>
</li>
</ul></section><section id="api-34-support-geojson-for-geo-apis"><h3 id="x17-19-api-34-support-geojson-for-geo-apis"><span class="secno">17.19 </span><a name="api-34"></a>API-34: Support GeoJSON for GEO APIs</h3><p>Preferrably, GEO APIs should support the GeoJSON standard
(<a href="https://tools.ietf.org/html/rfc7946">RFC-7946</a>).</p></section><section id="api-35-include-geojson-as-part-of-the-embedded-resource-in-the-json-response"><h3 id="x17-20-api-35-include-geojson-as-part-of-the-embedded-resource-in-the-json-response"><span class="secno">17.20 </span><a name="api-35"></a>API-35: Include GeoJSON as part of the embedded resource in the JSON response</h3><p>In case a JSON (<code>application/json</code>) response contains a geometry, represent it
in the same way as the <code>geometry</code> object of GeoJSON
(<a href="https://tools.ietf.org/html/rfc7946">RFC-7946</a>):</p><pre><code aria-busy="false" class="hljs json">{
 <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Point"</span>,
 <span class="hljs-attr">"coordinates"</span>: [<span class="hljs-number">125.6</span>, <span class="hljs-number">10.1</span>]
}</code></pre></section><section id="api-36-provide-a-post-endpoint-for-geo-queries"><h3 id="x17-21-api-36-provide-a-post-endpoint-for-geo-queries"><span class="secno">17.21 </span><a name="api-36"></a>API-36: Provide a <code>POST</code> endpoint for GEO queries</h3><p>Spatial queries are sent in a <code>POST</code> to a dedicated endpoint.</p></section><section id="api-37-support-mixed-queries-at-post-endpoints"><h3 id="x17-22-api-37-support-mixed-queries-at-post-endpoints"><span class="secno">17.22 </span><a name="api-37"></a>API-37: Support mixed queries at <code>POST</code> endpoints</h3><p>Mixed queries may include both spatial and property queries.</p></section><section id="api-38-put-results-of-a-global-spatial-query-in-the-relevant-geometric-context"><h3 id="x17-23-api-38-put-results-of-a-global-spatial-query-in-the-relevant-geometric-context"><span class="secno">17.23 </span><a name="api-38"></a>API-38: Put results of a global spatial query in the relevant geometric context</h3><p>In case of a global query <code>/api/v1/_zoek</code>, results should be placed in the
relevant geometric context, because results from different collections are
retrieved. Express the name of the collection to which the results belongs in
the singular form using the property <code>type</code>.</p></section><section id="api-39-use-etrs89-as-the-preferred-coordinate-reference-system-crs"><h3 id="x17-24-api-39-use-etrs89-as-the-preferred-coordinate-reference-system-crs"><span class="secno">17.24 </span><a name="api-39"></a>API-39: Use ETRS89 as the preferred coordinate reference system (CRS)</h3><p>General usage of the European ETRS89 coordinate reference system (CRS) is
preferable, but is not necessarily the default CRS. Hence, the CRS has to be
explicitly included in each request.</p></section><section id="api-40-pass-the-coordinate-reference-system-crs-of-the-request-and-the-response-in-the-headers"><h3 id="x17-25-api-40-pass-the-coordinate-reference-system-crs-of-the-request-and-the-response-in-the-headers"><span class="secno">17.25 </span><a name="api-40"></a>API-40: Pass the coordinate reference system (CRS) of the request and the response in the headers</h3><p>The coordinate reference system (CRS) for both the request and the response are
passed as part of the request headers and reponse headers. In case this header
is missing, send the HTTP status code <code>412 Precondition Failed</code>.</p></section><section id="api-41-use-content-negotiation-to-serve-different-crss"><h3 id="x17-26-api-41-use-content-negotiation-to-serve-different-crss"><span class="secno">17.26 </span><a name="api-41"></a>API-41: Use content negotiation to serve different CRSs</h3><p>The CRS for the geometry in the response body is defined using the <code>Accept-Crs</code>
header. In case the API does not support the requested CRS, send the HTTP status
code <code>406 Not Acceptable</code>.</p></section><section id="api-42-use-json-hal-with-media-type-application-hal-json-for-pagination"><h3 id="x17-27-api-42-use-json-hal-with-media-type-application-hal-json-for-pagination"><span class="secno">17.27 </span><a name="api-42"></a>API-42: Use JSON+HAL with media type <code>application/hal+json</code> for pagination</h3><p>Add two reserved fields <code>_links</code> (required) and <code>_embedded</code> (optional) to the
representation. Pass pagination meta data as HTTP headers.</p></section><section id="api-43-apply-caching-to-improve-performance"><h3 id="x17-28-api-43-apply-caching-to-improve-performance"><span class="secno">17.28 </span><a name="api-43"></a>API-43: Apply caching to improve performance</h3><p>For caching apply the default HTTP caching mechanisms using a few additional
HTTP headers (<code>ETag</code> or <code>Last-Modified</code>) and functionality to determine wether
a few specific HTTP headers are supplied (<code>If-None-Match</code> or
<code>If-Modified-Since</code>).</p></section><section id="api-44-apply-rate-limiting"><h3 id="x17-29-api-44-apply-rate-limiting"><span class="secno">17.29 </span><a name="api-44"></a>API-44: Apply rate limiting</h3><p>To prevent server overload and to guarantee a high service level, apply rate
limiting to API requests.</p></section><section id="api-45-provide-rate-limiting-information"><h3 id="x17-30-api-45-provide-rate-limiting-information"><span class="secno">17.30 </span><a name="api-45"></a>API-45: Provide rate limiting information</h3><p>Use the HTTP header <code>X-Rate-Limit</code> to inform users of rate limits. In case the
rate limits are exceeded, send the HTTP status code <code>429 Too Many Requests</code>.</p></section><section id="api-46-use-default-error-handling"><h3 id="x17-31-api-46-use-default-error-handling"><span class="secno">17.31 </span><a name="api-46"></a>API-46: Use default error handling</h3><p>API support the default error messages of the HTTP 400 and 500 status code
ranges, including the parsable JSON representation
(<a href="https://tools.ietf.org/html/rfc7807">RFC-7807</a>).</p></section><section id="api-47-use-the-required-http-status-codes"><h3 id="x17-32-api-47-use-the-required-http-status-codes"><span class="secno">17.32 </span><a name="api-47"></a>API-47: Use the required HTTP status codes</h3><p>APIs should at least support the following HTTP status codes: 200, 201, 204,
304, 400, 401, 403, 404, 405, 406, 409, 410, 415, 422, 429, 500, and 503.</p></section><section id="api-49-use-public-api-keys"><h3 id="x17-33-api-49-use-public-api-keys"><span class="secno">17.33 </span><a name="api-49"></a>API-49: Use <em>public</em> API-keys</h3><p>In JavaScript, only use <em>restricted</em> API-keys, linked to specific
characteristics of the client-application (web application or mobile
application), e.g. a clientId and/or referring URL.</p></section><section id="api-50-use-cors-to-control-access"><h3 id="x17-34-api-50-use-cors-to-control-access"><span class="secno">17.34 </span><a name="api-50"></a>API-50: Use CORS to control access</h3><p>Check the domain of the incoming request and generate the response header
depending on whether this domain may send requests or not (whitelist). In that
case, only add this particular domain to the response header
<code>Access-Control-Allow-Origin</code>.</p><p>**NOTE: It is technically possible to pass a wildcard ("*") in the response
header <code>Access-Control-Allow-Origin</code> to allow all sources. However, this is
malpractice!**</p></section><section id="api-52-use-oauth-2-0-for-authorisation-with-rights-delegation"><h3 id="x17-35-api-52-use-oauth-2-0-for-authorisation-with-rights-delegation"><span class="secno">17.35 </span><a name="api-52"></a>API-52: Use OAuth 2.0 for authorisation with rights delegation</h3><p>This is in line with the way the OAuth standard appears on the comply or explain list of forumstandaardisatie.
</p></section></section>
  

<section id="references" class="appendix">
      <!--OddPage--><h2 id="a-references"><span class="secno">A. </span>References</h2>
      
    <section id="informative-references">
        <h3 id="a-1-informative-references"><span class="secno">A.1 </span>Informative references</h3>
      <dl class="bibliography">
        <dt id="bib-rfc6585">[rfc6585]</dt><dd><a href="https://httpwg.org/specs/rfc6585.html"><cite>Additional HTTP Status Codes</cite></a>. M. Nottingham; R. Fielding. IETF. April 2012. Proposed Standard. URL: <a href="https://httpwg.org/specs/rfc6585.html">https://httpwg.org/specs/rfc6585.html</a></dd><dt id="bib-rfc7807">[rfc7807]</dt><dd><a href="https://tools.ietf.org/html/rfc7807"><cite>Problem Details for HTTP APIs</cite></a>. M. Nottingham; E. Wilde. IETF. March 2016. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7807">https://tools.ietf.org/html/rfc7807</a></dd><dt id="bib-rfc8142">[rfc8142]</dt><dd><a href="https://tools.ietf.org/html/rfc8142"><cite>GeoJSON Text Sequences</cite></a>. S. Gillies. IETF. April 2017. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc8142">https://tools.ietf.org/html/rfc8142</a></dd>
      </dl></section></section><p role="navigation" id="back-to-top"><a href="#title"><abbr title="Back to Top">↑</abbr></a></p><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>