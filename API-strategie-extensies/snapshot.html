<!DOCTYPE html><html lang="en"><!-- HTML-Header ============================================================================== --><head><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta content="text/html; charset=utf-8" http-equiv="content-type"><meta name="generator" content="ReSpec 24.5.2"><style>/* --- ISSUES/NOTES --- */
.issue-label {
    text-transform: initial;
}

.warning > p:first-child { margin-top: 0 }
.warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
span.warning { padding: .1em .5em .15em; }

.issue.closed span.issue-number {
    text-decoration: line-through;
}

.warning {
    border-color: #f11;
    border-width: .2em;
    border-style: solid;
    background: #fbe9e9;
}

.warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
}

li.task-list-item {
    list-style: none;
}

input.task-list-item-checkbox {
    margin: 0 0.35em 0.25em -1.6em;
    vertical-align: middle;
}

.issue a.respec-gh-label {
  padding: 5px;
  margin: 0 2px 0 2px;
  font-size: 10px;
  text-transform: none;
  text-decoration: none;
  font-weight: bold;
  border-radius: 4px;
  position: relative;
  bottom: 2px;
  border: none;
}

.issue a.respec-label-dark {
  color: #fff;
  background-color: #000;
}

.issue a.respec-label-light {
  color: #000;
  background-color: #fff;
}
</style>


    <!-- Invullen: de titel van de standaard of het document ==================================== -->
    <title>API Designrules Extensions (Nederlandse API Strategie IIb)</title>
    <!-- Invullen: de naam van de lokale CSS file =============================================== -->
    <link rel="stylesheet" type="text/css" href="./media/style.css">
    <link rel="shortcut icon" type="image/x-icon" href="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.ico">


<!-- ============================================================================================ -->
<!-- File. . . :  index.html                                                                      -->
<!-- Bevat . . :  Template voor de index.html die verplicht is voor respec                        -->
<!--              Gebaseerd op https://github.com/Geonovum/respec/wiki                            -->
<!--              Deze file moet worden neergezet in de root-directory van de                     -->
<!--              betreffende standaard.                                                          -->
<!-- Door. . . :  Linda van den Brink                                                             -->
<!-- ============================================================================================ -->
<!-- ============================================================================================ -->
<!-- Log . . . :  2019503 - LvdB - Initiele versie                                                -->
<!--                                                                                              -->
<!--
====================================================================================================
0        1         2         3         4         5         6         7         8         9         0
1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
================================================================================================= -->
  <style id="respec-mainstyle">/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* Override code highlighter background */
.hljs {
  background: transparent !important;
}

/* --- INLINES --- */
h1 abbr,
h2 abbr,
h3 abbr,
h4 abbr,
h5 abbr,
h6 abbr,
a abbr {
  border: none;
}

dfn {
  font-weight: bold;
}

a.internalDFN {
  color: inherit;
  border-bottom: 1px solid #99c;
  text-decoration: none;
}

a.externalDFN {
  color: inherit;
  border-bottom: 1px dotted #ccc;
  text-decoration: none;
}

a.bibref {
  text-decoration: none;
}

#references :target {
  background: #eaf3ff;
}

cite .bibref {
  font-style: normal;
}

code {
  color: #c83500;
}

th code {
  color: inherit;
}

/* --- TOC --- */

.toc a,
.tof a {
  text-decoration: none;
}

a .secno,
a .figno {
  color: #000;
}

ul.tof,
ol.tof {
  list-style: none outside none;
}

.caption {
  margin-top: 0.5em;
  font-style: italic;
}

/* --- TABLE --- */

table.simple {
  border-spacing: 0;
  border-collapse: collapse;
  border-bottom: 3px solid #005a9c;
}

.simple th {
  background: #005a9c;
  color: #fff;
  padding: 3px 5px;
  text-align: left;
}

.simple th[scope="row"] {
  background: inherit;
  color: inherit;
  border-top: 1px solid #ddd;
}

.simple td {
  padding: 3px 10px;
  border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
  background: #f0f6ff;
}

/* --- DL --- */

.section dd>p:first-child {
  margin-top: 0;
}

.section dd>p:last-child {
  margin-bottom: 0;
}

.section dd {
  margin-bottom: 1em;
}

.section dl.attrs dd,
.section dl.eldef dd {
  margin-bottom: 0;
}

#issue-summary>ul,
.respec-dfn-list {
  column-count: 2;
}

#issue-summary li,
.respec-dfn-list li {
  list-style: none;
}

details.respec-tests-details {
  margin-left: 1em;
  display: inline-block;
  vertical-align: top;
}

details.respec-tests-details>* {
  padding-right: 2em;
}

details.respec-tests-details[open] {
  z-index: 999999;
  position: absolute;
  border: thin solid #cad3e2;
  border-radius: 0.3em;
  background-color: white;
  padding-bottom: 0.5em;
}

details.respec-tests-details[open]>summary {
  border-bottom: thin solid #cad3e2;
  padding-left: 1em;
  margin-bottom: 1em;
  line-height: 2em;
}

details.respec-tests-details>ul {
  width: 100%;
  margin-top: -0.3em;
}

details.respec-tests-details>li {
  padding-left: 1em;
}

a[href].self-link:hover {
  opacity: 1;
  text-decoration: none;
  background-color: transparent;
}

h2,
h3,
h4,
h5,
h6 {
  position: relative;
}

aside.example .marker > a.self-link {
  color: inherit;
}

h2>a.self-link,
h3>a.self-link,
h4>a.self-link,
h5>a.self-link,
h6>a.self-link {
  border: none;
  color: inherit;
  font-size: 83%;
  height: 2em;
  left: -1.6em;
  opacity: .5;
  position: absolute;
  text-align: center;
  text-decoration: none;
  top: 0;
  transition: opacity .2s;
  width: 2em;
}

h2>a.self-link::before,
h3>a.self-link::before,
h4>a.self-link::before,
h5>a.self-link::before,
h6>a.self-link::before {
  content: "§";
  display: block;
}

@media (max-width: 767px) {
  dd {
    margin-left: 0;
  }

  /* Don't position self-link in headings off-screen */
  h2>a.self-link,
  h3>a.self-link,
  h4>a.self-link,
  h5>a.self-link,
  h6>a.self-link {
    left: auto;
    top: auto;
  }
}

@media print {
  .removeOnSave {
    display: none;
  }
}
</style><link rel="stylesheet" href="https://tools.geostandaarden.nl/respec/style/GN-DEF.css"><link rel="shortcut icon" type="image/x-icon" href="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.ico"><style>/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8;
}

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold;
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080;
}

.hljs-string,
.hljs-doctag {
  color: #d14;
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold;
}

.hljs-subst {
  font-weight: normal;
}

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold;
}

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal;
}

.hljs-regexp,
.hljs-link {
  color: #009926;
}

.hljs-symbol,
.hljs-bullet {
  color: #990073;
}

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3;
}

.hljs-meta {
  color: #999;
  font-weight: bold;
}

.hljs-deletion {
  background: #fdd;
}

.hljs-addition {
  background: #dfd;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style><script id="initialUserConfig" type="application/json">{
  "specStatus": "GN-DEF",
  "specType": "HR",
  "pubDomain": "api",
  "publishDate": "2021-10-13",
  "previousPublishDate": "2021-06-28",
  "previousMaturity": "GN-CV",
  "editors": [
    {
      "name": "Jasper Roes",
      "company": "Het Kadaster",
      "companyURL": "https://www.kadaster.nl"
    },
    {
      "name": "Linda van den Brink",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    },
    {
      "name": "Frank Terpstra",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    },
    {
      "name": "Jan van Gelder",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    },
    {
      "name": "Joost Farla",
      "company": "Het Kadaster",
      "companyURL": "https://www.kadaster.nl"
    }
  ],
  "authors": [
    {
      "name": "Jasper Roes",
      "company": "Het Kadaster",
      "companyURL": "https://www.kadaster.nl"
    },
    {
      "name": "Joost Farla",
      "company": "Het Kadaster",
      "companyURL": "https://www.kadaster.nl"
    },
    {
      "name": "Henri Korver",
      "company": "VNG Realisatie",
      "companyURL": "https://www.vng.nl"
    },
    {
      "name": "Frank van Es",
      "company": "Logius",
      "companyURL": "https://www.logius.nl"
    },
    {
      "name": "Frank Terpstra",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    },
    {
      "name": "Jaron Azaria",
      "company": "Logius",
      "companyURL": "https://www.logius.nl"
    },
    {
      "name": "Martin Borgman",
      "company": "Het Kadaster",
      "companyURL": "https://www.kadaster.nl"
    },
    {
      "name": "Peter Haasnoot",
      "company": "Logius",
      "companyURL": "https://www.logius.nl"
    },
    {
      "name": "Leon van der Ree",
      "company": "Logius",
      "companyURL": "https://www.logius.nl"
    },
    {
      "name": "Bob te Riele",
      "company": "RvIG",
      "companyURL": "http://www.rvig.nl/"
    },
    {
      "name": "Remco Schaar",
      "company": "Logius",
      "companyURL": "https://www.logius.nl"
    },
    {
      "name": "Jan Jaap Zoutendijk",
      "company": "Rijkswaterstaat",
      "companyURL": "https://www.rws.nl"
    },
    {
      "name": "Heiko Hudig",
      "company": "Politie",
      "companyURL": "https://www.politie.nl"
    },
    {
      "name": "Erwin Reinhoud",
      "company": "Kennisnet",
      "companyURL": "https://www.kennisnet.nl"
    },
    {
      "name": "Michiel Trimpe",
      "company": "Gemeente Amsterdam",
      "companyURL": "https://www.amsterdam.nl"
    },
    {
      "name": "Tony Sloos",
      "company": "ArchitecIT",
      "companyURL": "http://www.architecit.nl"
    }
  ],
  "shortName": "API-Strategie-ext",
  "github": "https://github.com/geonovum/KP-APIs/",
  "issueBase": "https://github.com/geonovum/KP-APIs/issues/",
  "localBiblio": {
    "NCSC.TLS": {
      "href": "https://www.ncsc.nl/documenten/publicaties/2021/januari/19/ict-beveiligingsrichtlijnen-voor-transport-layer-security-2.1",
      "title": "ICT-beveiligingsrichtlijnen voor Transport Layer Security (TLS)",
      "authors": [
        "NCSC"
      ],
      "date": "April 2019",
      "id": "ncsc.tls"
    },
    "OAuth2": {
      "href": "https://tools.ietf.org/html/rfc6749",
      "title": "The OAuth 2.0 Authorization Framework",
      "authors": [
        "D. Hardt"
      ],
      "date": "October 2012",
      "publisher": "The Internet Engineering Task Force",
      "id": "oauth2"
    },
    "Expert": {
      "href": "https://www.forumstandaardisatie.nl/sites/bfs/files/Expertadvies%20OAuth%202.0.pdf",
      "title": "Expertadvies OAuth 2.0",
      "authors": [
        "P. Dam"
      ],
      "date": "24 februari 2017",
      "publisher": "Forum Standaardisatie"
    },
    "JWT": {
      "href": "https://tools.ietf.org/html/rfc7519",
      "title": "JSON Web Token (JWT)",
      "authors": [
        "M. Jones, J. Bradley, N. Sakimura"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "JWS": {
      "href": "https://tools.ietf.org/html/rfc7515",
      "title": "JSON Web Signature (JWS)",
      "authors": [
        "M. Jones, J. Bradley, N. Sakimura"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "JWE": {
      "href": "https://tools.ietf.org/html/rfc7516",
      "title": "JSON Web Encryption (JWE)",
      "authors": [
        "M. Jones, J. Hildebrand"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "JWK": {
      "href": "https://tools.ietf.org/html/rfc7517",
      "title": "JSON Web Key (JWK))",
      "authors": [
        "M. Jones"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "JWA": {
      "href": "https://tools.ietf.org/html/rfc7518",
      "title": "JSON Web Algorithms (JWA)",
      "authors": [
        "M. Jones"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "PKCE": {
      "href": "https://tools.ietf.org/html/rfc7636",
      "title": "Proof Key for Code Exchange by OAuth Public Clients",
      "authors": [
        "N. Sakimura, J. Bradley, N. Agarwal"
      ],
      "date": "september 2015",
      "publisher": "IETF"
    },
    "Introspection": {
      "href": "https://tools.ietf.org/html/rfc7662",
      "title": "OAuth 2.0 Token Introspection",
      "authors": [
        "J. Richer"
      ],
      "date": "October 2015",
      "publisher": "IETF"
    },
    "OpenID.Core": {
      "href": "https://openid.net/specs/openid-connect-core-1_0.html",
      "title": "OpenID Connect Core 1.0",
      "authors": [
        "N. Sakimura, J. Bradley, M. Jones, B. de Medeiros, C. Mortimore"
      ],
      "date": "November 8 2014",
      "publisher": "OpenID foundation",
      "id": "openid.core"
    },
    "iGOV.OpenID": {
      "href": "https://openid.net/specs/openid-igov-openid-connect-1_0.html",
      "title": "International Government Assurance Profile (iGov) for OpenID Connect 1.0 - draft 3",
      "authors": [
        "M. Varley, P. Grassi"
      ],
      "date": "October 5 2018",
      "publisher": "OpenID foundation"
    },
    "iGOV.OAuth2": {
      "href": "https://openid.net/specs/openid-igov-oauth2-1_0.html",
      "title": "International Government Assurance Profile (iGov) for OAuth 2.0",
      "authors": [
        "J. Richer, M. Varley, P. Grassi"
      ],
      "date": "October 5 2018",
      "publisher": "OpenID foundation"
    },
    "OpenID.Discovery": {
      "href": "https://openid.net/specs/openid-connect-discovery-1_0.html",
      "title": "OpenID Connect Discovery 1.0",
      "authors": [
        "N. Sakimura, J. Bradley, M. Jones, E. Jay"
      ],
      "date": "November 8 2014",
      "publisher": "OpenID foundation"
    },
    "I-D.ietf-oauth-pop-architecture": {
      "href": "https://tools.ietf.org/html/draft-ietf-oauth-pop-architecture-08",
      "title": "OAuth 2.0 Proof-of-Possession (PoP) Security Architecture",
      "authors": [
        "P. Hunt, J. Richer, W. Mills, P. Mishra, H. Tschofenig"
      ],
      "date": "July 8, 2016",
      "publisher": "IETF"
    },
    "HEART.OAuth2": {
      "href": "https://openid.net/specs/openid-heart-oauth2-1_0.html",
      "title": "Health Relationship Trust Profile for OAuth 2.0",
      "authors": [
        "J. Richer"
      ],
      "date": "April 25, 2017",
      "publisher": "OpenID foundation"
    },
    "JWS.JWE.Algs": {
      "href": "https://www.iana.org/assignments/jose/jose.xhtml#web-signature-encryption-algorithms",
      "title": "IANA JSON Web Signatures and Encryption Algorithms registry",
      "authors": [
        "Jim Schaad, Jeff Hodges, Joe Hildebrand, Sean Turner"
      ],
      "date": "",
      "publisher": "IANA"
    },
    "BCP195": {
      "href": "https://tools.ietf.org/html/bcp195",
      "title": "Recommendations for Secure Use of Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS)",
      "authors": [
        "Y. Sheffer, R. Holz, P. Saint-Andre"
      ],
      "date": "May 2015",
      "publisher": "IETF"
    },
    "HAL": {
      "href": "http://stateless.co/hal_specification.html",
      "title": "HAL - Hypertext Application Language",
      "authors": [
        "Mike Kelly"
      ],
      "date": " 2013-09-18",
      "id": "hal"
    },
    "OAuth2.Browser-Based-Apps": {
      "href": "https://tools.ietf.org/html/draft-ietf-oauth-browser-based-apps",
      "title": "OAuth 2.0 for Browser-Based Apps",
      "authors": [
        "A. Parecki",
        "D. Waite"
      ],
      "status": "Internet-Draft",
      "publisher": "IETF OAuth Working Group",
      "id": "oauth2.browser-based-apps"
    }
  },
  "postProcess": [
    null
  ],
  "publishISODate": "2021-10-13T00:00:00.000Z",
  "generatedSubtitle": "Vastgestelde versie 13 oktober 2021"
}</script><meta name="description" content="The API strategy consists of a core — a generic set of rules for all government APIs — and various extensions that only pertain to a specific application or that are not maure enough for the core set."><script type="application/ld+json">{
  "@context": [
    "http://schema.org",
    {
      "@vocab": "http://schema.org/",
      "@language": "en",
      "foaf": "http://xmlns.com/foaf/0.1/",
      "datePublished": {
        "@type": "http://www.w3.org/2001/XMLSchema#date"
      },
      "inLanguage": {
        "@language": null
      },
      "isBasedOn": {
        "@type": "@id"
      },
      "license": {
        "@type": "@id"
      }
    }
  ],
  "id": "https://docs.geostandaarden.nl/api/def-hr-API-Strategie-ext-20211013/",
  "type": [
    "TechArticle"
  ],
  "name": "API Designrules Extensions (Nederlandse API Strategie IIb)",
  "inLanguage": "en",
  "license": "https://creativecommons.org/licenses/by/4.0/legalcode",
  "datePublished": "2021-10-13",
  "copyrightHolder": {
    "name": "Geonovum",
    "url": "https://www.geonovum.nl/"
  },
  "discussionUrl": "https://github.com/geonovum/KP-APIs/issues/",
  "alternativeHeadline": "",
  "isBasedOn": "https://docs.geostandaarden.nl/api/cv-hr-API-Strategie-ext-20210628/",
  "description": "The API strategy consists of a core — a generic set of rules for all government APIs — and various extensions that only pertain to a specific application or that are not maure enough for the core set.",
  "editor": [
    {
      "type": "Person",
      "name": "Jasper Roes",
      "worksFor": {
        "name": "Het Kadaster",
        "url": "https://www.kadaster.nl"
      }
    },
    {
      "type": "Person",
      "name": "Linda van den Brink",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl"
      }
    },
    {
      "type": "Person",
      "name": "Frank Terpstra",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl"
      }
    },
    {
      "type": "Person",
      "name": "Jan van Gelder",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl"
      }
    },
    {
      "type": "Person",
      "name": "Joost Farla",
      "worksFor": {
        "name": "Het Kadaster",
        "url": "https://www.kadaster.nl"
      }
    }
  ],
  "contributor": [
    {
      "type": "Person",
      "name": "Jasper Roes",
      "worksFor": {
        "name": "Het Kadaster",
        "url": "https://www.kadaster.nl"
      }
    },
    {
      "type": "Person",
      "name": "Joost Farla",
      "worksFor": {
        "name": "Het Kadaster",
        "url": "https://www.kadaster.nl"
      }
    },
    {
      "type": "Person",
      "name": "Henri Korver",
      "worksFor": {
        "name": "VNG Realisatie",
        "url": "https://www.vng.nl"
      }
    },
    {
      "type": "Person",
      "name": "Frank van Es",
      "worksFor": {
        "name": "Logius",
        "url": "https://www.logius.nl"
      }
    },
    {
      "type": "Person",
      "name": "Frank Terpstra",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl"
      }
    },
    {
      "type": "Person",
      "name": "Jaron Azaria",
      "worksFor": {
        "name": "Logius",
        "url": "https://www.logius.nl"
      }
    },
    {
      "type": "Person",
      "name": "Martin Borgman",
      "worksFor": {
        "name": "Het Kadaster",
        "url": "https://www.kadaster.nl"
      }
    },
    {
      "type": "Person",
      "name": "Peter Haasnoot",
      "worksFor": {
        "name": "Logius",
        "url": "https://www.logius.nl"
      }
    },
    {
      "type": "Person",
      "name": "Leon van der Ree",
      "worksFor": {
        "name": "Logius",
        "url": "https://www.logius.nl"
      }
    },
    {
      "type": "Person",
      "name": "Bob te Riele",
      "worksFor": {
        "name": "RvIG",
        "url": "http://www.rvig.nl/"
      }
    },
    {
      "type": "Person",
      "name": "Remco Schaar",
      "worksFor": {
        "name": "Logius",
        "url": "https://www.logius.nl"
      }
    },
    {
      "type": "Person",
      "name": "Jan Jaap Zoutendijk",
      "worksFor": {
        "name": "Rijkswaterstaat",
        "url": "https://www.rws.nl"
      }
    },
    {
      "type": "Person",
      "name": "Heiko Hudig",
      "worksFor": {
        "name": "Politie",
        "url": "https://www.politie.nl"
      }
    },
    {
      "type": "Person",
      "name": "Erwin Reinhoud",
      "worksFor": {
        "name": "Kennisnet",
        "url": "https://www.kennisnet.nl"
      }
    },
    {
      "type": "Person",
      "name": "Michiel Trimpe",
      "worksFor": {
        "name": "Gemeente Amsterdam",
        "url": "https://www.amsterdam.nl"
      }
    },
    {
      "type": "Person",
      "name": "Tony Sloos",
      "worksFor": {
        "name": "ArchitecIT",
        "url": "http://www.architecit.nl"
      }
    }
  ],
  "citation": [
    {
      "id": "https://www.ncsc.nl/documenten/publicaties/2021/januari/19/ict-beveiligingsrichtlijnen-voor-transport-layer-security-2.1",
      "type": "TechArticle",
      "name": "ICT-beveiligingsrichtlijnen voor Transport Layer Security (TLS)",
      "url": "https://www.ncsc.nl/documenten/publicaties/2021/januari/19/ict-beveiligingsrichtlijnen-voor-transport-layer-security-2.1"
    },
    {
      "id": "https://tools.ietf.org/html/rfc6749",
      "type": "TechArticle",
      "name": "The OAuth 2.0 Authorization Framework",
      "url": "https://tools.ietf.org/html/rfc6749"
    },
    {
      "id": "https://openid.net/specs/openid-connect-core-1_0.html",
      "type": "TechArticle",
      "name": "OpenID Connect Core 1.0",
      "url": "https://openid.net/specs/openid-connect-core-1_0.html"
    },
    {
      "id": "https://tools.ietf.org/html/draft-ietf-oauth-browser-based-apps",
      "type": "TechArticle",
      "name": "OAuth 2.0 for Browser-Based Apps",
      "url": "https://tools.ietf.org/html/draft-ietf-oauth-browser-based-apps"
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc8252",
      "type": "TechArticle",
      "name": "OAuth 2.0 for Native Apps",
      "url": "https://www.rfc-editor.org/rfc/rfc8252"
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc7800",
      "type": "TechArticle",
      "name": "Proof-of-Possession Key Semantics for JSON Web Tokens (JWTs)",
      "url": "https://www.rfc-editor.org/rfc/rfc7800"
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc3986",
      "type": "TechArticle",
      "name": "Uniform Resource Identifier (URI): Generic Syntax",
      "url": "https://www.rfc-editor.org/rfc/rfc3986"
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc7159",
      "type": "TechArticle",
      "name": "The JavaScript Object Notation (JSON) Data Interchange Format",
      "url": "https://www.rfc-editor.org/rfc/rfc7159"
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc7946",
      "type": "TechArticle",
      "name": "The GeoJSON Format",
      "url": "https://www.rfc-editor.org/rfc/rfc7946"
    },
    {
      "id": "http://stateless.co/hal_specification.html",
      "type": "TechArticle",
      "name": "HAL - Hypertext Application Language",
      "url": "http://stateless.co/hal_specification.html"
    },
    {
      "id": "https://www.iana.org/assignments/link-relations/",
      "type": "TechArticle",
      "name": "Link Relations",
      "url": "https://www.iana.org/assignments/link-relations/"
    },
    {
      "id": "https://httpwg.org/specs/rfc6585.html",
      "type": "TechArticle",
      "name": "Additional HTTP Status Codes",
      "url": "https://httpwg.org/specs/rfc6585.html"
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc7807",
      "type": "TechArticle",
      "name": "Problem Details for HTTP APIs",
      "url": "https://www.rfc-editor.org/rfc/rfc7807"
    }
  ]
}</script></head>
  <!-- HTML-Body ================================================================================ -->
  <body class="h-entry"><div class="head">
  <a href="https://www.geonovum.nl/" class="logo"><img id="Geonovum" alt="Geonovum" width="132" height="67" src="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.svg"></a>
  <h1 class="title p-name" id="title">API Designrules Extensions (Nederlandse API Strategie IIb)</h1>

  <h2>Geonovum Handreiking<br>
  Vastgestelde versie <time class="dt-published" datetime="2021-10-13">13 oktober 2021</time></h2>
  <dl>
    <dt>This version:</dt><dd><a class="u-url" href="https://docs.geostandaarden.nl/api/def-hr-API-Strategie-ext-20211013/">https://docs.geostandaarden.nl/api/def-hr-API-Strategie-ext-20211013/</a></dd><dt>Latest published version:</dt><dd><a href="https://docs.geostandaarden.nl/api/API-Strategie-ext/">https://docs.geostandaarden.nl/api/API-Strategie-ext/</a></dd>

    <dt>Vorige versie:</dt><dd><a href="https://docs.geostandaarden.nl/api/cv-hr-API-Strategie-ext-20210628/">https://docs.geostandaarden.nl/api/cv-hr-API-Strategie-ext-20210628/</a></dd>
    <dt>Latest editor's draft:</dt><dd><a href="https://geonovum.github.io/KP-APIs/API-strategie-extensies/">https://geonovum.github.io/KP-APIs/API-strategie-extensies/</a></dd>
    <dt>Editors:</dt>
    <dd class="p-author h-card vcard"><span class="p-name fn">Jasper Roes</span>, <a class="p-org org h-org h-card" href="https://www.kadaster.nl">Het Kadaster</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Linda van den Brink</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Frank Terpstra</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Jan van Gelder</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Joost Farla</span>, <a class="p-org org h-org h-card" href="https://www.kadaster.nl">Het Kadaster</a></dd>
    <dt>Authors:</dt><dd class="p-author h-card vcard"><span class="p-name fn">Jasper Roes</span>, <a class="p-org org h-org h-card" href="https://www.kadaster.nl">Het Kadaster</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Joost Farla</span>, <a class="p-org org h-org h-card" href="https://www.kadaster.nl">Het Kadaster</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Henri Korver</span>, <a class="p-org org h-org h-card" href="https://www.vng.nl">VNG Realisatie</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Frank van Es</span>, <a class="p-org org h-org h-card" href="https://www.logius.nl">Logius</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Frank Terpstra</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Jaron Azaria</span>, <a class="p-org org h-org h-card" href="https://www.logius.nl">Logius</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Martin Borgman</span>, <a class="p-org org h-org h-card" href="https://www.kadaster.nl">Het Kadaster</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Peter Haasnoot</span>, <a class="p-org org h-org h-card" href="https://www.logius.nl">Logius</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Leon van der Ree</span>, <a class="p-org org h-org h-card" href="https://www.logius.nl">Logius</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Bob te Riele</span>, <a class="p-org org h-org h-card" href="http://www.rvig.nl/">RvIG</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Remco Schaar</span>, <a class="p-org org h-org h-card" href="https://www.logius.nl">Logius</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Jan Jaap Zoutendijk</span>, <a class="p-org org h-org h-card" href="https://www.rws.nl">Rijkswaterstaat</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Heiko Hudig</span>, <a class="p-org org h-org h-card" href="https://www.politie.nl">Politie</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Erwin Reinhoud</span>, <a class="p-org org h-org h-card" href="https://www.kennisnet.nl">Kennisnet</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Michiel Trimpe</span>, <a class="p-org org h-org h-card" href="https://www.amsterdam.nl">Gemeente Amsterdam</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Tony Sloos</span>, <a class="p-org org h-org h-card" href="http://www.architecit.nl">ArchitecIT</a></dd>
    <dt>Participate:</dt><dd>
      <a href="https://github.com/geonovum/KP-APIs/">GitHub geonovum/KP-APIs</a>
    </dd><dd>
      <a href="https://github.com/geonovum/KP-APIs/issues/">File a bug</a>
    </dd><dd>
      <a href="https://github.com/geonovum/KP-APIs/commits/">Commit history</a>
    </dd><dd>
      <a href="https://github.com/geonovum/KP-APIs/pulls/">Pull requests</a>
    </dd>
  </dl>


    <dl>
          <dt>Rechtenbeleid:</dt>
          <dd>
            <div class="copyright" style="margin: 0.25em 0;">
              <abbr title="Creative Commons Attribution 4.0 International Public License">
              <a href="https://creativecommons.org/licenses/by/4.0/legalcode"><img width="115" height="40" src="https://tools.geostandaarden.nl/respec/style/logos/cc-by.svg" alt="Creative Commons Attribution 4.0 International Public License"></a>
            </abbr>
              <div style="display:inline-block; vertical-align:top">
                <p style="font-size: small;">Creative Commons Attribution 4.0 International Public License<br>(CC-BY)</p>
              </div>
            </div>
          </dd>
        </dl>
  <hr title="Separator for header">
</div>
    <section id="abstract" class="introductory"><h2>Abstract</h2>
      <p>The API strategy consists of a <em>core</em> — a generic set of rules for all government APIs — and various <em>extensions</em> that only pertain to a specific application or that are not maure enough for the core set.</p>
      <p>These extensions are described in this document. It is indicated whether an extension is stable or in development.</p>
    </section>
    <section id="sotd" class="introductory"><h2>Status of This Document</h2><p>
    <em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current Geonovum publications and the latest revision of this document can be found via <a href="https://www.geonovum.nl/geo-standaarden/alle-standaarden">https://www.geonovum.nl/geo-standaarden/alle-standaarden</a>(in Dutch).</em>
  </p><p>

    Dit is de definitieve versie van de handreiking. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.








</p>
      <p>Compared to the previous version of the API Designrules Extensions (2021-06-28) the extension <a href="#security">API-security</a> has been changed, and 2 extensions have been added: <a href="#hypermedia">Hypermedia</a> and <a href="#naming-conventions">Naming Conventions</a>. After a <a href="https://www.geonovum.nl/over-geonovum/actueel/consultatie-api-design-rules"></a>public consultation round, held in the summer of 2021, these extensions have been finalized and released as stable.</p>
    </section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><span class="secno">1. </span>Introduction</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#reading-guide"><span class="secno">1.1 </span>Reading Guide</a></li><li class="tocline"><a class="tocxref" href="#stability"><span class="secno">1.2 </span>Stability</a></li></ol></li><li class="tocline"><a class="tocxref" href="#summary"><span class="secno">2. </span>Summary</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#informative-design-rules"><span class="secno">2.1 </span>Informative Design Rules</a></li></ol></li><li class="tocline"><a class="tocxref" href="#security"><span class="secno">3. </span>Security</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction-0"><span class="secno">3.1 </span>Introduction</a></li><li class="tocline"><a class="tocxref" href="#transport-security"><span class="secno">3.2 </span>Transport security</a></li><li class="tocline"><a class="tocxref" href="#api-access-patterns"><span class="secno">3.3 </span>API access patterns</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#machine-to-machine"><span class="secno">3.3.1 </span>Machine to machine</a></li><li class="tocline"><a class="tocxref" href="#rights-delegation"><span class="secno">3.3.2 </span>Rights delegation</a></li><li class="tocline"><a class="tocxref" href="#session-based-api-access-pattern"><span class="secno">3.3.3 </span>Session based API access pattern</a></li></ol></li><li class="tocline"><a class="tocxref" href="#identification"><span class="secno">3.4 </span>Identification</a></li><li class="tocline"><a class="tocxref" href="#authentication"><span class="secno">3.5 </span>Authentication</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#end-user-authentication"><span class="secno">3.5.1 </span>End-User authentication</a></li><li class="tocline"><a class="tocxref" href="#client-authentication"><span class="secno">3.5.2 </span>Client authentication</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#mutual-tls-authentication-mtls"><span class="secno">3.5.2.1 </span>Mutual TLS authentication (mTLS)</a></li><li class="tocline"><a class="tocxref" href="#private-key-jwt"><span class="secno">3.5.2.2 </span>Private key JWT</a></li><li class="tocline"><a class="tocxref" href="#client-secrets"><span class="secno">3.5.2.3 </span>Client secrets</a></li><li class="tocline"><a class="tocxref" href="#client-authentication-and-public-clients"><span class="secno">3.5.2.4 </span>Client authentication and Public clients</a></li><li class="tocline"><a class="tocxref" href="#other-authentication-methods"><span class="secno">3.5.2.5 </span>Other Authentication Methods</a></li></ol></li><li class="tocline"><a class="tocxref" href="#client-credentials-using-oauth-2-0"><span class="secno">3.5.3 </span>Client Credentials using OAuth 2.0</a></li></ol></li><li class="tocline"><a class="tocxref" href="#authorization"><span class="secno">3.6 </span>Authorization</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#authorization-errors"><span class="secno">3.6.1 </span>Authorization errors</a></li></ol></li><li class="tocline"><a class="tocxref" href="#http-level-security"><span class="secno">3.7 </span>HTTP-level Security</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#security-headers"><span class="secno">3.7.1 </span>Security Headers</a></li><li class="tocline"><a class="tocxref" href="#cors-policy"><span class="secno">3.7.2 </span>CORS-policy</a></li><li class="tocline"><a class="tocxref" href="#browser-based-applications"><span class="secno">3.7.3 </span>Browser-based applications</a></li><li class="tocline"><a class="tocxref" href="#restrict-http-methods"><span class="secno">3.7.4 </span>Restrict HTTP methods</a></li><li class="tocline"><a class="tocxref" href="#validate-content-types"><span class="secno">3.7.5 </span>Validate content types</a></li><li class="tocline"><a class="tocxref" href="#http-return-code"><span class="secno">3.7.6 </span>HTTP Return Code</a></li><li class="tocline"><a class="tocxref" href="#http-header-filtering"><span class="secno">3.7.7 </span>HTTP header filtering</a></li><li class="tocline"><a class="tocxref" href="#error-handling"><span class="secno">3.7.8 </span>Error handling</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#versioning"><span class="secno">4. </span>Versioning</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#deprecation-of-a-major-api-version"><span class="secno">4.1 </span>Deprecation of a major API version</a></li><li class="tocline"><a class="tocxref" href="#the-warning-response-header"><span class="secno">4.2 </span>The Warning response header</a></li></ol></li><li class="tocline"><a class="tocxref" href="#naming-conventions"><span class="secno">5. </span>Naming conventions</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#path-segments"><span class="secno">5.1 </span>Path segments</a></li><li class="tocline"><a class="tocxref" href="#query-parameters"><span class="secno">5.2 </span>Query parameters</a></li></ol></li><li class="tocline"><a class="tocxref" href="#json"><span class="secno">6. </span>JSON</a></li><li class="tocline"><a class="tocxref" href="#filtering"><span class="secno">7. </span>Filtering</a></li><li class="tocline"><a class="tocxref" href="#sorting"><span class="secno">8. </span>Sorting</a></li><li class="tocline"><a class="tocxref" href="#customization"><span class="secno">9. </span>Customization</a></li><li class="tocline"><a class="tocxref" href="#search"><span class="secno">10. </span>Search</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#wildcards"><span class="secno">10.1 </span>Wildcards</a></li><li class="tocline"><a class="tocxref" href="#aliases-for-common-queries"><span class="secno">10.2 </span>Aliases for common queries</a></li></ol></li><li class="tocline"><a class="tocxref" href="#temporal"><span class="secno">11. </span>Temporal</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#level-of-support"><span class="secno">11.1 </span>Level of support</a></li><li class="tocline"><a class="tocxref" href="#robustness"><span class="secno">11.2 </span>Robustness</a></li></ol></li><li class="tocline"><a class="tocxref" href="#geospatial"><span class="secno">12. </span>Geospatial</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#result-response"><span class="secno">12.1 </span>Result (response)</a></li><li class="tocline"><a class="tocxref" href="#call-requests"><span class="secno">12.2 </span>Call (requests)</a></li><li class="tocline"><a class="tocxref" href="#crs-negotiation"><span class="secno">12.3 </span>CRS negotiation</a></li><li class="tocline"><a class="tocxref" href="#crs-transformation"><span class="secno">12.4 </span>CRS transformation</a></li></ol></li><li class="tocline"><a class="tocxref" href="#hypermedia"><span class="secno">13. </span>Hypermedia</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#navigation-controls"><span class="secno">13.1 </span>Navigation controls</a></li><li class="tocline"><a class="tocxref" href="#external-links"><span class="secno">13.2 </span>External links</a></li></ol></li><li class="tocline"><a class="tocxref" href="#pagination"><span class="secno">14. </span>Pagination</a></li><li class="tocline"><a class="tocxref" href="#caching"><span class="secno">15. </span>Caching</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#etag"><span class="secno">15.1 </span>ETag</a></li><li class="tocline"><a class="tocxref" href="#last-modified"><span class="secno">15.2 </span>Last-Modified</a></li></ol></li><li class="tocline"><a class="tocxref" href="#rate-limiting"><span class="secno">16. </span>Rate limiting</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#expose-api-key"><span class="secno">16.1 </span>Expose API-key</a></li></ol></li><li class="tocline"><a class="tocxref" href="#error-handling-0"><span class="secno">17. </span>Error handling</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#http-status-codes"><span class="secno">17.1 </span>HTTP status codes</a></li></ol></li><li class="tocline"><a class="tocxref" href="#signing-and-encryption"><span class="secno">18. </span>Signing and Encryption</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#signing"><span class="secno">18.1 </span>Signing</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#detached-enveloping-and-enveloped-signatures"><span class="secno">18.1.1 </span>Detached, Enveloping and Enveloped signatures</a></li><li class="tocline"><a class="tocxref" href="#canonicalization"><span class="secno">18.1.2 </span>Canonicalization</a></li><li class="tocline"><a class="tocxref" href="#signing-within-encoding-formats"><span class="secno">18.1.3 </span>Signing within encoding formats</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#signing-xml"><span class="secno">18.1.3.1 </span>Signing XML</a></li><li class="tocline"><a class="tocxref" href="#signing-json"><span class="secno">18.1.3.2 </span>Signing JSON</a></li></ol></li><li class="tocline"><a class="tocxref" href="#signing-requests-response"><span class="secno">18.1.4 </span>Signing requests/response</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#signing-requests-respone-with-knowledge-of-encoding-format"><span class="secno">18.1.4.1 </span>Signing requests/respone with knowledge of encoding format</a></li><li class="tocline"><a class="tocxref" href="#signing-requests-response-without-knowledge-of-encoding-format"><span class="secno">18.1.4.2 </span>Signing requests/response without knowledge of encoding format</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#encryption"><span class="secno">18.2 </span>Encryption</a></li></ol></li><li class="tocline"><a class="tocxref" href="#references"><span class="secno">A. </span>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#informative-references"><span class="secno">A.1 </span>Informative references</a></li></ol></li></ol></nav>
    <!-- vanaf hier per hoofdstuk een sectie of een div in het document ======================== -->
    <!-- Secties komen in de inhoudsopgave div's niet ========================================== -->
    <!-- Secties hebben verplicht <h2> tags, div's niet ======================================== -->
    <section class="informative" data-format="markdown" aria-busy="false" id="introduction"><!--OddPage--><h2 id="x1-introduction"><span class="secno">1. </span>Introduction</h2><p><em>Dit onderdeel is niet normatief.</em></p><p>This document contains extensions for the API Design Rules standard.</p><section id="reading-guide"><h3 id="x1-1-reading-guide"><span class="secno">1.1 </span>Reading Guide</h3><p>This document is part of the <em>Nederlandse API Strategie</em>.</p><p>The Nederlandse API Strategie consists of <a href="https://www.geonovum.nl/themas/kennisplatform-apis#APIStrategie">three distinct documents</a>.</p></section><section id="stability"><h3 id="x1-2-stability"><span class="secno">1.2 </span>Stability</h3><p>The following example blocks indicate the stability status for each extension.</p><div class="warning" id="issue-container-generatedID"><div role="heading" class="warning-title marker" id="h-warning" aria-level="4"><span>Warning</span></div><p class="">This extension is still under development and can be modified at any time.</p></div><div class="note" role="note" id="issue-container-generatedID-0"><div role="heading" class="note-title marker" id="h-note" aria-level="4"><span>Note</span></div><p class="">The working group has indicated this extension to be stable.</p></div></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="summary"><!--OddPage--><h2 id="x2-summary"><span class="secno">2. </span>Summary</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="note" role="note" id="issue-container-generatedID-1"><div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>Note</span></div><aside class="">
Design rules have unique and permanent numbers. In the event of design rules being deprecated or restructured, they are removed from the list. Therefore, gaps in the sequence can occur. New design rules will always get a new and higher number.
</aside></div><section id="informative-design-rules"><h3 id="x2-1-informative-design-rules"><span class="secno">2.1 </span>Informative Design Rules</h3><ul>
<li><a href="#api-09">API-09</a>: Implement custom representation if supported</li>
<li><a href="#api-11">API-11</a>: Encrypt connections using TLS<!-- * <a href="#api-12">API-12</a>: Allow access to an API only if an API key is provided --></li>
<li><a href="#api-13">API-13</a>: Accept tokens as HTTP headers only<!-- * <a href="#api-14">API-14</a>: Use OAuth 2.0 for authorization --></li>
<li><a href="#api-15">API-15</a>: Use PKIoverheid certificates for access-restricted or purpose-limited API authentication</li>
<li><a href="#api-21">API-21</a>: Inform users of a deprecated API actively</li>
<li><a href="#api-22">API-22</a>: JSON first - APIs receive and send JSON</li>
<li><a href="#api-23">API-23</a>: APIs may provide a JSON Schema</li>
<li><a href="#api-24">API-24</a>: Support content negotiation</li>
<li><a href="#api-25">API-25</a>: Check the Content-Type header value</li>
<li><a href="#api-26">API-26</a>: Define field names in <em>camelCase</em></li>
<li><a href="#api-27">API-27</a>: Disable pretty print</li>
<li><a href="#api-28">API-28</a>: Send a JSON-response without enclosing envelope</li>
<li><a href="#api-29">API-29</a>: Support JSON request body for <code>POST</code> and <code>PUT</code> operations</li>
<li><a href="#api-30">API-30</a>: Use query parameters corresponding to the queryable fields</li>
<li><a href="#api-31">API-31</a>: Use the query parameter <code>sort</code> to apply sorting</li>
<li><a href="#api-32">API-32</a>: Use the query parameter <code>search</code> for full-text search</li>
<li><a href="#api-33">API-33</a>: Support both <code>*</code> and <code>?</code> wildcard characters for full-text search APIs</li>
<li><a href="#api-34">API-34</a>: Support GeoJSON for geospatial APIs</li>
<li><a href="#api-35">API-35</a>: Include GeoJSON as part of the embedded resource in the JSON response</li>
<li><a href="#api-36">API-36</a>: Provide a <code>POST</code> endpoint for geo queries</li>
<li><a href="#api-37">API-37</a>: Support mixed queries at <code>POST</code> endpoints</li>
<li><a href="#api-38">API-38</a>: Put results of a global spatial query in the relevant geometric context</li>
<li><a href="#api-39">API-39</a>: Use ETRS89 as the preferred coordinate reference system (CRS)</li>
<li><a href="#api-40">API-40</a>: Pass the coordinate reference system (CRS) of the request and the response in the headers</li>
<li><a href="#api-41">API-41</a>: Use content negotiation to serve different CRSs</li>
<li><a href="#api-42">API-42</a>: Provide standard navigation controls for pagination</li>
<li><a href="#api-43">API-43</a>: Apply caching to improve performance</li>
<li><a href="#api-44">API-44</a>: Apply rate limiting</li>
<li><a href="#api-45">API-45</a>: Provide rate limiting information</li>
<li><a href="#api-46">API-46</a>: Use default error handling</li>
<li><a href="#api-47">API-47</a>: Use the required HTTP status codes</li>
<li><a href="#api-49">API-49</a>: Use <em>public</em> API-keys</li>
<li><a href="#api-50">API-50</a>: Use CORS to control access</li>
<li><a href="#api-52">API-52</a>: Use OAuth 2.0 for authorization with rights delegation</li>
<li><a href="#api-58">API-58</a>: Do not put any sensitive information in URIs when communicating over shared networks</li>
<li><a href="#api-59">API-59</a>: Use spinal-case for path segments</li>
<li><a href="#api-60">API-60</a>: Normalize characters with diacritics to their base characters for path segments</li>
<li><a href="#api-61">API-61</a>: Do not explicitly indicate that a resource is an API</li>
<li><a href="#api-62">API-62</a>: Do not use file extensions in path segments</li>
<li><a href="#api-63">API-63</a>: Do not use nonstandard abbreviations as resource names</li>
<li><a href="#api-64">API-64</a>: Do not use compound words for nested objects</li>
<li><a href="#api-65">API-65</a>: Use enumerations only for fixed sets of values that are unlikely to change</li>
<li><a href="#api-66">API-66</a>: Use UPPER_SNAKE_CASE for enumeration values</li>
<li><a href="#api-67">API-67</a>: Omit symbols and punctuation marks other than hyphens from path segments</li>
<li><a href="#api-68">API-68</a>: Use meaningful enumeration values</li>
<li><a href="#api-69">API-69</a>: Use lowerCamelCase for query parameter keys</li>
<li><a href="#api-70">API-70</a>: Provide absolute URIs for hyperlinks</li>
<li><a href="#api-71">API-71</a>: Support the HAL media type for every GET response</li>
<li><a href="#api-72">API-72</a>: Provide at least an <code>href</code> attribute for every link object</li>
<li><a href="#api-73">API-73</a>: Provide self-referencing links for all resources</li>
<li><a href="#api-74">API-74</a>: Provide navigational links pointing to GET operations only</li>
<li><a href="#api-75">API-75</a>: Only provide navigational links when there is a clear functional goal</li>
<li><a href="#api-76">API-76</a>: Treat external links as regular resource attributes</li>
</ul></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="security"><!--OddPage--><h2 id="x3-security"><span class="secno">3. </span>Security</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="note" role="note" id="issue-container-generatedID-2"><div role="heading" class="note-title marker" id="h-note-1" aria-level="3"><span>Note</span></div><p class="">The working group has indicated this extension to be stable.</p></div><section id="introduction-0"><h3 id="x3-1-introduction"><span class="secno">3.1 </span>Introduction</h3><p>This section describes security principles, concepts and technologies to apply when working with APIs. Controls need to be applied for the security objectives of integrity, confidentiality and availability of the API and services and data provided thereby. The (new draft of the) <a href="https://docs.geostandaarden.nl/api/cv-hr-API-Strategie-20210628/#architectuur">architecture section of the API strategy</a> contains architecture patterns for implementing API security. This extension provides the details on the authentication &amp; authorization capability of the API capability model detailed in the (new draft of the) <a href="https://docs.geostandaarden.nl/api/cv-hr-API-Strategie-20210628/#architectuur">architecture section of the API strategy</a>.</p><p>The scope of this section is limited to generic security controls that directly influence the visible parts of an API. Effectively, only security standards directly applicable to interactions are discussed here.
In order to meet the complete security objectives, every implementer MUST also apply a range of controls not mentioned in this section.</p><p>Note: security controls for signing and encrypting of application level messages will be part of a separate extension, <a href="#signing-and-encryption">Signing and Encryption</a>.</p></section><section id="transport-security"><h3 id="x3-2-transport-security"><span class="secno">3.2 </span>Transport security</h3><p>One should secure all APIs assuming they can be accessed from any location on the internet. Information MUST be exchanged over TLS-based secured connections. No exceptions, so everywhere and always. One SHOULD follow <a href="https://english.ncsc.nl/publications/publications/2021/january/19/it-security-guidelines-for-transport-layer-security-2.1">the latest NCSC guidelines for TLS</a></p><div class="rule" id="api-11">
<p class="rulelab"><strong>API-11</strong>: Secure connections using TLS</p>
<p>Secure connections using TLS following the latest NCSC guidelines [<cite><a class="bibref" href="#bib-ncsc.tls">NCSC.TLS</a></cite>].</p>
<p>Since the connection is always secured, the access method can be straightforward. This allows the application of basic access tokens instead of encrypted access tokens.</p>
</div><p>Even when using TLS-based secured connections information in URIs is not secured. URIs can be cached and logged outside of the servers controlled by clients and servers. Any information contained in them should therfor be considered readable by anyone with access to the netwerk being used (in case of the internet the whole world) and MUST NOT contain any sensitive information. Neither client secrets used for authentication, privacy sensitive informations suchs as BSNs nor any other information which should not be shared. Be aware that queries (anything after the '?' in a URI) are also part of an URI.</p><div class="rule" id="api-58">
<p class="rulelab"><strong>API-58</strong>: No sensitive information in URIs</p>
<p>Do not put any sensitive information in URIs</p>
<p>Even when the connection is secure URIs can be cached and logged, in systems outside the control of client and/or server.</p>
</div></section><section id="api-access-patterns"><h3 id="x3-3-api-access-patterns"><span class="secno">3.3 </span>API access patterns</h3><p>Because security is about compromises one should first be aware of what access patterns need to be supported. More information on API access patterns can be found in Dutch in <a href="https://geonovum.github.io/KP-APIs/Werkgroep%20API%20architectuur/">the architecture chapter of the Dutch API strategy</a></p><section id="machine-to-machine"><h4 id="x3-3-1-machine-to-machine"><span class="secno">3.3.1 </span>Machine to machine</h4><p>Two different machines negotiate a secure point to point connection. One side acts as the client, the other as the server. Both sides identify and authenticate the other party.
The server authorizes access to its resources by the client based on the established identity of the client. The authorizations for a client are determined by doing a lookup to an identity store based on the established identity of the client.
Note that in Dutch government we often only identify organizations and not individual machines or their users. Therefor the access rights or permissions associated with a given identity might be far greater than needed. This is breaking the principle of least privilege.</p></section><section id="rights-delegation"><h4 id="x3-3-2-rights-delegation"><span class="secno">3.3.2 </span>Rights delegation</h4><p>In the rights delegation pattern a system is granted access to a resource by and on behalf of the owner of that resource. The rights delegation access pattern can help solve the problem of machines having greater permissions/priviliges/access rights than necessary for the task at hand.
Retrieving a resource at run-time requires a resource owner, a client, an authorization server and a resource server. The resource owner (often the end user) grants permissions to the client to access resources on its behalf.
This grant is stored at the authorization server, after permissions are granted to the client to access resources on the resource server; with or without the presence of an end user.</p><p>When a resource owner provides a grant to the client, this grant SHOULD only contain the permissions the client needs to perform its intended tasks.
To deny the client access to these resources after initial permission is granted, the resource owner MUST revoke the grant at the authorization server or the grant might be revoked after a predefined expiration period.</p></section><section id="session-based-api-access-pattern"><h4 id="x3-3-3-session-based-api-access-pattern"><span class="secno">3.3.3 </span>Session based API access pattern</h4><p>While this method is considered legacy it is in common use for handling access control to APIs, even though it conflicts with best practices for APIs. Because this pattern is more a standard web application pattern we refer to <a href="https://www.ncsc.nl/documenten/publicaties/2019/mei/01/ict-beveiligingsrichtlijnen-voor-webapplicaties">the latest NCSC guidelines on the subject of web application security</a> for security considerations.</p><p>We consider this method to be mostly outside the scope of this document and refer to the aforementioned NCSC document for security considerations. We do provide some additional considerations for web clients in the section on <a href="#http-level-security">HTTP-level Security</a>.</p></section></section><section id="identification"><h3 id="x3-4-identification"><span class="secno">3.4 </span>Identification</h3><p><strong>End Users and Organizations</strong>
For identification of individual end users a pseudonym SHOULD be used when possible, to avoid exposing sensitive information about a user.
This pseudonym can optionally be translatable to actual personal information in a separate service, but access to this service should be tightly controlled and limited only to cases where there is a legal need to use this information. Furthermore using a seperate service for translation provides a moment to audit when certain information about users is requested.</p><p>Use of a Burger Service Number (BSN) is only allowed when the organization has a legal ground to do so. Even when an organization is eligible to use BSN's it is still RECOMMENDED to use a pseudonym that is only translatable to a BSN for a limited number of services/users within the organization.
An example of this can be found in the <a href="https://aandeslagmetdeomgevingswet.nl/publish/library/219/dso_-_gas_-_knooppunt_toegang_iam.pdf">architecture of the "digitaal stelsel omgevingswet (DSO)"</a></p><p>For identifying government organizations use the "organisatie-identificatienummer" (OIN).</p><p>For identifying non-government organizations (companies, associations, foundations etc...) use the KVK number. These numbers are used in the PKIOverheid and e-Herkenning context respectively. See <a href="https://publicatie.centrumvoorstandaarden.nl/dk/oin/">https://publicatie.centrumvoorstandaarden.nl/dk/oin/</a> and <a href="https://www.kvk.nl/over-kvk/over-het-handelsregister/">https://www.kvk.nl/over-kvk/over-het-handelsregister/</a> for more information on these identifiers.</p><p>OIN's can be queried using the COR API <a href="https://portaal.digikoppeling.nl/registers/corApi/index">https://portaal.digikoppeling.nl/registers/corApi/index</a> or its webpage <a href="https://portaal.digikoppeling.nl/registers/">https://portaal.digikoppeling.nl/registers/</a>. The API will also provide known mappings between OIN- and KVK numbers (some OIN's are not derived from the KVK number). KVK numbers are derived from the handelsregister, which can be queried see <a href="https://developers.kvk.nl/documentation/search-v2">https://developers.kvk.nl/documentation/search-v2</a> for details.</p><p>In the EU context use the eIDAS legal identifier. For more information see <a href="https://ec.europa.eu/digital-single-market/en/trust-services-and-eid">https://ec.europa.eu/digital-single-market/en/trust-services-and-eid</a> and <a href="https://afsprakenstelsel.etoegang.nl/">https://afsprakenstelsel.etoegang.nl/</a> for details.</p><p><strong>Clients</strong>
Identification of clients is different from identification of the end user or organisation using the service.
When using authorization servers, the authorization server issues the registered client a client identifier - a unique string representing the registration information provided by the client. The client identifier is not a secret; it is commonly public known and MUST NOT be relied upon for client authentication by itself. The client identifier is unique to the authorization server.</p><p>Authorization servers MUST NOT allow clients to choose or influence their <code>client_id</code> value.</p></section><section id="authentication"><h3 id="x3-5-authentication"><span class="secno">3.5 </span>Authentication</h3><p>Authentication determines whether individuals and applications accessing APIs are really who they say they are. In the context of APIs, authentication is applicable to the <em>End-User</em>, i.e. the individual on behalf of whom API resources are being accessed, <em>and</em> to the <em>Client</em>, i.e. the application that accesses the API resources on behalf of the End-User.</p><p>Note that an End-User can be both a natural person as well as a legal person (organization). In case Client Authentication includes information about its governing organization, this may fulfill and obviate the need for End-User authentication. See the section "Client Credentials using OAuth 2.0" below.</p><section id="end-user-authentication"><h4 id="x3-5-1-end-user-authentication"><span class="secno">3.5.1 </span>End-User authentication</h4><p>In most Use Cases that involve API interaction, authenticating the End-User on behalf of whom the API resources are accessed is required. This is typically matches with the rights delegation API access pattern.
End-User authentication is not required in situations where the API Client is solely accessing API resources on behalf of itself or its governing organization, without requiring an End-User context, but may be used nevertheless. This happens in the machine to machine API access pattern.</p><p>The following methods can be used for End-User authentication:</p><p><strong>SAML</strong>
SAML is a standard for securely communicating assertions about an authenticated End-User from the Identity Provider to the Service Provider. Although it existed before APIs became mainstream and is not aimed at API authentication specifically, communicating Access Tokens that can be used to access API resources in the exchanged assertions is possible.</p><p><a href="https://forumstandaardisatie.nl/open-standaarden/saml">SAML 2.0 is included on the list of required standards by Forum Standaardisatie</a>. It is expected, however, that the following standards will become preferred over SAML in Use Cases that involve access to API resources.</p><p><strong>OAuth</strong>
Although technically an authorization method, OAuth [<cite><a class="bibref" href="#bib-oauth2">OAuth2</a></cite>] is used as well for authenticating End-Users themselves and providing the Client with an Access Token upon successful End-User (and Client) authentication. This Access Token can be used to make authorized API requests. Using OAuth is appropriate when authorization is not dependent on an identifiable subject, the subject is different from the End-User or the Resource Server does not require authentication of the End-User itself.</p><p>The NL GOV Assurance profile for OAuth 2.0 is included on the list of required standards by Forum Standaardisatie. The latest version of the profile can be found at <a href="https://publicatie.centrumvoorstandaarden.nl/api/oauth/">https://publicatie.centrumvoorstandaarden.nl/api/oauth/</a>.</p><p><strong>OpenID Connect</strong>
OpenID Connect [<cite><a class="bibref" href="#bib-openid.core">OpenID.Core</a></cite>] adds an identity layer on top of OAuth, making it into an actual authentication method. It enables API Clients to verify the identity of authenticated End-Users and to obtain profile information about the End-User.</p><p>A Dutch Assurance profile for OpenID Connect is currently being drafted. It is expected to be added to the list of required standards by Forum Standaardisatie. The latest version of the draft profile can be found at <a href="https://logius.gitlab.io/oidc/">https://logius.gitlab.io/oidc/</a>.</p><p><strong>Out of band</strong>
For some Use Cases it may be appropriate to distribute Access Tokens using an Out of band method. Out of band authentication is generally appropriate when API resources are accessed via an application that already supports a client authentication method and the End-User is rather static. Based on an End-User authentication performed, the application subsequently is provided with an Access Token for API access via a secure method.</p><p>Depending on the technology used by the applications accessing the API the Access Token may technically be communicated using a secure cookie. This however limits the technologies used to create client applications.</p><p>Using sessions and secure cookies is outside the scope of this document. For security considerations please refer to <a href="https://www.ncsc.nl/documenten/publicaties/2019/mei/01/ict-beveiligingsrichtlijnen-voor-webapplicaties">the latest NCSC guidelines on the subject of web application security</a>.</p></section><section id="client-authentication"><h4 id="x3-5-2-client-authentication"><span class="secno">3.5.2 </span>Client authentication</h4><p>The Client application that accesses API resources SHOULD be authenticated, both in the machine to machine and in the rights delegation API access patterns. Also note that, although listed separately, the aforementioned methods for End-User authentication require Client authentication as well.</p><p>Note: Client Authentication is applicable to the Client accessing the API, the Client making request to the Authorization Server when applying OAuth/OpenID, or both. Client Authentication SHOULD be applied for both uses.</p><p>It is RECOMMENDED to use asymmetric (public-key based) methods for client authentication such as mTLS <a href="https://www.rfc-editor.org/info/rfc8705">RFC8705</a> or "private_key_jwt" <a href="https://openid.net/specs/openid-connect-core-1_0.html#ClientAuthentication">OpenID</a>.</p><p><a href="https://publicatie.centrumvoorstandaarden.nl/api/oauth/">The NL GOV Assurance profile for OAuth 2.0</a> REQUIRES the use of private_key_jwt for full clients, native clients with dynamically registered keys, and direct access clients as mentioned in the profile.</p><p>The following methods can be used for Client authentication.</p><section id="mutual-tls-authentication-mtls"><h5 id="x3-5-2-1-mutual-tls-authentication-mtls"><span class="secno">3.5.2.1 </span>Mutual TLS authentication (mTLS)</h5><p>Mutual TLS authentication, is a feature of TLS with which the Client authenticates itself to the Server using its X.509 certificate. Mutual TLS (mTLS) provides strong Client authentication for server-based Clients and cannot be used with Native or User-Agent-based Clients that are not backed with a server. Support for mTLS in combination with OAuth2 is specified in <a href="https://www.rfc-editor.org/info/rfc8705">RFC8705</a>.</p><p>In contexts where Dutch (semi) governmental organizations are involved, the X.509 certificate used for Client authentication MUST be a PKIOverheid certificate. These are x509 certificates derived from a root certificate owned by the Dutch Government. For more information on PKIOverheid see <a href="https://www.logius.nl/diensten/pkioverheid">https://www.logius.nl/diensten/pkioverheid</a>.</p><p>In the API context, only Server, Services certificates or extended Validation certificates (as used for websites) SHOULD be used. Please note that in the current standard of PKIO the TSPs are not obligated to fill the OIN / HRN in the Subject.Serialnumber field for the private services chain, as it is optional. See the <a href="https://www.logius.nl/sites/default/files/bestanden/website/PvE%20deel3h%20v4.8%20V1.0.pdf">Programme of Requirements part 3h: CP Server certificaten – domein Private Services</a> for details. For the extended Validation certificates, the chamber of commerce number is given in the Serial.Subject field see <a href="https://www.logius.nl/sites/default/files/public/bestanden/diensten/PKIoverheid/PvE%20EN%20part3f%20v4.8%20DEF.pdf">Programme of Requirements part 3f: Certificate Policy for Extended Validation certificates in EV (G1) Domain</a> or the <a href="https://www.logius.nl/diensten/pkioverheid/aansluiten-als-tsp/pogramma-van-eisen">website of Logius</a> for details.
See also the NCSC factsheet regarding the phasing out of publicly trusted web server (SSL/TLS) certificates by PKIOverheid :
<a href="https://www.logius.nl/actueel/ncsc-maakt-factsheet-over-uitfasing-webcertificaten-van-pkioverheid">Factsheet PKIoverheid stopt met webcertificaten</a>.</p></section><section id="private-key-jwt"><h5 id="x3-5-2-2-private-key-jwt"><span class="secno">3.5.2.2 </span>Private key JWT</h5><p>With Private key JWT authentication <a href="https://openid.net/specs/openid-connect-core-1_0.html#ClientAuthentication">OpenID</a>, the Client registers a public key with the Server and accompanies every API request with a JWT signed using this key. This Client Authentication method is part of the OpenID Connect standards for Clients authenticating to the OpenID Provider, but the use of Private key JWT Client authentication is not limited to this use case.</p><p>This authentication method may be used with Clients that are able to securely store asymmetric private keys and sign JWT's with this key.</p><p>In contexts where Dutch (semi) governmental organizations are involved, the certificate used for signing the Private key JWT's MUST be a PKIOverheid certificate. In case the certificate is included in the JWT header, it includes identification of the client and registration of the public key may not be necessary.</p><p><a href="https://publicatie.centrumvoorstandaarden.nl/api/oauth/">The NL GOV Assurance profile for OAuth 2.0</a> REQUIRES the use of private_key_jwt for full clients, native clients with dynamically registered keys, and direct access clients as mentioned in the profile.</p></section><section id="client-secrets"><h5 id="x3-5-2-3-client-secrets"><span class="secno">3.5.2.3 </span>Client secrets</h5><p>Clients SHOULD NOT be authenticated using client secrets. Methods using asymmetric keys are RECOMMENDED instead of client secrets, as they are both more secure and key management is easier, in particular when deployed at scale.  Various methods exists for authenticating clients using secrets. Methods including Client authentication using HTTP Basic authentication or communicating client credentials in the request body are prone to credential theft.</p></section><section id="client-authentication-and-public-clients"><h5 id="x3-5-2-4-client-authentication-and-public-clients"><span class="secno">3.5.2.4 </span>Client authentication and Public clients</h5><p>In Use Cases that involve Native and User-Agent based Clients, strong Client authentication is generally not possible. Whereas it may be possible for individual Clients to implement a decent means of Client authentication (e.g. by using the Web Crypto API in User-Agent based Clients), the Server cannot make any assumptions about the confidentiality of credentials exchanged with such Clients.</p><p>When dealing with Use Cases involving Native and User-Agent based Clients, the policies and standards described in <a href="https://geonovum.github.io/KP-APIs/API-strategie-extensies/#http-level-security">Section HTTP level security</a> SHOULD be followed, as well as best practices [<cite><a class="bibref" href="#bib-oauth2.browser-based-apps">OAuth2.Browser-Based-Apps</a></cite>] and [<cite><a class="bibref" href="#bib-rfc8252">RFC8252</a></cite>], which are defined for use with OAuth but may be applicable for API communication in general.</p></section><section id="other-authentication-methods"><h5 id="x3-5-2-5-other-authentication-methods"><span class="secno">3.5.2.5 </span>Other Authentication Methods</h5><p>An API Server (Resource Server) or Authorization Server MAY support any suitable authentication scheme matching their security requirements. When using other authentication methods, the authorization server MUST define a mapping between the client identifier (registration record) and authentication scheme.</p><p>Some additional authentication methods are defined in the <a href="https://www.iana.org/assignments/oauth-parameters/oauth-parameters.xhtml#token-endpoint-auth-method">OAuth Token Endpoint Authentication Methods</a> registry, and may be useful as generic client authentication methods beyond the specific use of protecting the token endpoint.</p></section></section><section id="client-credentials-using-oauth-2-0"><h4 id="x3-5-3-client-credentials-using-oauth-2-0"><span class="secno">3.5.3 </span>Client Credentials using OAuth 2.0</h4><p>In Use Cases where the Client is solely accessing API resources on behalf of itself or its governing organization, without requiring an End-User context, Client authentication using the OAuth 2.0 Client Credentials grant type can be appropriate. In such cases, the Authorization Server securely provides Client credentials to the Client upon registration (e.g. via an API Developer portal or out of bound process) and the Client uses these credentials to obtain an Access Token from the Authorization Server. The Access token than is used to access the API (Resource Server) using the Access Token.</p><p>Note that existing Client Credentials, such as a PKIoverheid X.509 certificate, MAY be used. This preempts the need for providing additional credentials. Any of the above mentioned Client Authentication methods can be applied with the Client Credential flow.</p><p>Usage of the Client Credential method with OAuth is RECOMMENDED over direct authorization by the API Server (Resource Server), even if the authorization decision can be based directly on Client Authentication. This externalizes the authorization decision from the API implementation, allowing for easier modifications and management of both the decision logic as well as client authentication methods.</p></section></section><section id="authorization"><h3 id="x3-6-authorization"><span class="secno">3.6 </span>Authorization</h3><p>It is RECOMMENDED to use token-based access to APIs. REST APIs SHOULD NOT maintain session state on the server. The authentication and authorization of a request SHOULD NOT depend on sessions. Instead, a token has to be sent with each request.</p><div class="rule" id="api-13">
<p class="rulelab"><strong>API-13</strong>: Accept tokens as HTTP headers only</p>
<p>There is an inherent security issue when passing tokens as a query parameter, because most Web servers store query parameters in the server logs.</p>
</div><p>Using tokens, a distinction is made between authorized and non-authorized services and related headers:</p><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>Authorized</td>
<td><code>Authorization: Bearer &lt;token&gt;</code></td>
</tr>
<tr>
<td>Non-authorized</td>
<td><code>X-Api-Key: &lt;api-key&gt;</code></td>
</tr>
</tbody></table><p>In case the proper headers are not sent, then there are no authentication details available and a status error code <code>403 Forbidden</code> is returned.</p><div class="rule" id="api-52">
<p class="rulelab"><strong>API-52</strong>: Use OAuth 2.0 for authorization with rights delegation</p>
<p>This is in line with the way the OAuth standard appears on the comply or explain list of Forum Standaardisatie.</p>
</div><p>See also <a href="https://publicatie.centrumvoorstandaarden.nl/api/oauth/">The NL GOV Assurance profile for OAuth 2.0</a> for further explanation of the applicaton of OAuth.</p><p>The <a href="https://publicatie.centrumvoorstandaarden.nl/dk/actueel/">Digikoppeling standard</a> currently has a <a href="https://centrumvoorstandaarden.github.io/DigikoppelingRestfulApiProfiel/">RESTful API profile in development</a> that specifies how to use PKIOverheid x.509 certificates for authorization.</p><section id="authorization-errors"><h4 id="x3-6-1-authorization-errors"><span class="secno">3.6.1 </span>Authorization errors</h4><p>In a production environment as little information as possible is to be disclosed. Apply the following rules for returning the status error code <code>401 Unauthorized</code>, <code>403 Forbidden</code>, and <code>404 Not Found</code>.</p><p>Note that authentication in the cases below is typically client authentication, and the Authorization header contains information on the End-User authorization and authentication, if applicable.</p><p>Note that usage of the Authorization header is part of the OAuth2 specifications.</p><p><strong>Implicit authentication</strong></p><p>When authentication is implicit or when just the presence of an Authorization header is enough for authentication and/or authorization: use the flow chart in figure 1 to determine the correct error code.</p><p><img src="media/HTTP-FlowChart1.PNG" alt="" height="1069" width="1345"></p><p>Figure 1: authentication is implicit.</p><p>Links from flow chart in figure 1:</p><p><a href="https://tools.ietf.org/html/rfc6750#section-3.1">https://tools.ietf.org/html/rfc6750#section-3.1</a></p><p><a href="https://tools.ietf.org/html/rfc7231#section-6.5.4">https://tools.ietf.org/html/rfc7231#section-6.5.4</a></p><p><strong>Explicit authentication</strong></p><p>When authentication is explicit, that is the authentication credentials are actively verfied when present, use the flow chart in figure 2 to determine the correct error codes.</p><p><img src="media/HTTP-FlowChart2.PNG" alt="" height="1071" width="1313"></p><p>Figure 2: authentication is explicit.</p><p>Links from flow chart in figure 2:</p><p><a href="https://tools.ietf.org/html/rfc7235#section-3.1">https://tools.ietf.org/html/rfc7235#section-3.1</a></p><p><a href="https://tools.ietf.org/html/rfc6750#section-3.1">https://tools.ietf.org/html/rfc6750#section-3.1</a></p><p><a href="https://tools.ietf.org/html/rfc7231#section-6.5.4">https://tools.ietf.org/html/rfc7231#section-6.5.4</a></p><p><strong>Explicit authentication while matching client authorization (<code>cnf</code>)</strong></p><p>When authentication is explicit and there is a check whether the provided authorization confirmation claim (<code>cnf</code>, see [<cite><a class="bibref" href="#bib-rfc7800">rfc7800</a></cite>]) matches the credentials provided for authentication use the flow chart in figure 3 to esteblish the correct error codes.</p><p><img src="media/HTTP-FlowChart3.PNG" alt="" height="1051" width="1400"></p><p>Figure 3: authentication is explicit, and client authorization confirmation claim (<code>cnf</code>) matches authentication.</p><p>Links from flow chart in figure 3:</p><p><a href="https://tools.ietf.org/html/rfc7235#section-3.1">https://tools.ietf.org/html/rfc7235#section-3.1</a></p><p><a href="https://tools.ietf.org/html/rfc6750#section-3.1">https://tools.ietf.org/html/rfc6750#section-3.1</a></p><p><a href="https://tools.ietf.org/html/rfc7800">https://tools.ietf.org/html/rfc7800</a></p><p><a href="https://tools.ietf.org/html/rfc7231#section-6.5.4">https://tools.ietf.org/html/rfc7231#section-6.5.4</a></p></section></section><section id="http-level-security"><h3 id="x3-7-http-level-security"><span class="secno">3.7 </span>HTTP-level Security</h3><p>The guidelines and principles defined in this extension are client agnostic. When implementing a client agnostic API, one SHOULD at least facilitate that multi-purpose generic HTTP-clients like browsers are able to securely interact with the API. When implementing an API for a specific client it may be possible to limit measures as long as it ensures secure access for this specific client. Nevertheless it is advised to review the following security measures, which are mostly inspired by the <a href="https://cheatsheetseries.owasp.org/cheatsheets/REST_Security_Cheat_Sheet.html">OWASP REST Security Cheat Sheet</a></p><p>Even while remaining client agnostic, clients can be classified in four major groups. This is much in line with common practice in OAuth2. The groups are:</p><ol>
<li>Web applications.</li>
<li>Native applications.</li>
<li>Browser-based applications.</li>
<li>System-to-system applications.</li>
</ol><p>This section contains elements that apply to the generic classes of clients listed above. Although not every client implementation has a need for all the specifications referenced below, a client agnostic API SHOULD provide these to facilitate any client to implement relevant security controls.</p><p>Most specifications referenced in this section are applicable to the first three classes of clients listed above.
Security considerations for native applications are provided in [OAUth2 for Native Apps]](<a href="https://tools.ietf.org/html/rfc8252">https://tools.ietf.org/html/rfc8252</a>), much of which can help non-OAuth2 based implementations as well.
For browser-based applications a subsection is included with additional details and information.
System-to-system (sometimes called machine-to-machine) may have a need for the listed specifications as well. Note that different usage patterns may be applicable in contexts with system-to-system clients, see above under Client Authentication.</p><section id="security-headers"><h4 id="x3-7-1-security-headers"><span class="secno">3.7.1 </span>Security Headers</h4><p>There are a number of security related headers that can be returned in the HTTP responses to instruct browsers to act in specific ways. However, some of these headers are intended to be used with HTML responses, and as such may provide little or no security benefits on an API that does not return HTML. The following headers SHOULD be included in all API responses:</p><table>
<thead>
<tr>
<th>Header</th>
<th>Rationale</th>
</tr>
</thead>
<tbody><tr>
<td><code>Cache-Control: no-store</code></td>
<td>Prevent sensitive information from being cached.</td>
</tr>
<tr>
<td><code>Content-Security-Policy: frame-ancestors 'none'</code></td>
<td>To protect against drag-and-drop style clickjacking attacks.</td>
</tr>
<tr>
<td><code>Content-Type</code></td>
<td>To specify the content type of the response. This SHOULD be <code>application/json</code> for JSON responses.</td>
</tr>
<tr>
<td><code>Strict-Transport-Security</code></td>
<td>To require connections over HTTPS and to protect against spoofed certificates.</td>
</tr>
<tr>
<td><code>X-Content-Type-Options: nosniff</code></td>
<td>To prevent browsers from performing MIME sniffing, and inappropriately interpreting responses as HTML.</td>
</tr>
<tr>
<td><code>X-Frame-Options: DENY</code></td>
<td>To protect against drag-and-drop style clickjacking attacks.</td>
</tr>
<tr>
<td><code>Access-Control-Allow-Origin</code></td>
<td>To relax the 'same origin' policy and allow cross-origin access. See CORS-policy below</td>
</tr>
</tbody></table><p>The headers below are only intended to provide additional security when responses are rendered as HTML. As such, if the API will never return HTML in responses, then these headers may not be necessary. However, if there is any uncertainty about the function of the headers, or the types of information that the API returns (or may return in future), then it is RECOMMENDED to include them as part of a defense-in-depth approach.</p><table>
<thead>
<tr>
<th>Header</th>
<th>Rationale</th>
</tr>
</thead>
<tbody><tr>
<td><code>Content-Security-Policy: default-src 'none'</code></td>
<td>The majority of CSP functionality only affects pages rendered as HTML.</td>
</tr>
<tr>
<td><code>Feature-Policy: 'none'</code></td>
<td>Feature policies only affect pages rendered as HTML.</td>
</tr>
<tr>
<td><code>Referrer-Policy: no-referrer</code></td>
<td>Non-HTML responses SHOULD not trigger additional requests.</td>
</tr>
</tbody></table><p>In addition to the above listed HTTP security headers, web- and browser-based applications SHOULD apply Subresource Integrity <a href="https://www.w3.org/TR/SRI/">SRI</a>. When using third-party hosted contents, e.g. using a Content Delivery Network, this is even more relevant. While this is primarily a client implementation concern, it may affect the API when it is not strictly segregated or for example when shared supporting libraries are offered.</p></section><section id="cors-policy"><h4 id="x3-7-2-cors-policy"><span class="secno">3.7.2 </span>CORS-policy</h4><div class="rule" id="api-50">
<p class="rulelab"><strong>API-50</strong>: Use CORS to control access</p>
<p>Use CORS to restrict access from other domains (if applicable).</p>
</div><p>Modern web browsers use Cross-Origin Resource Sharing (CORS) to minimize the risk associated with cross-site HTTP-requests. By default browsers only allow 'same origin' access to resources. This means that responses on requests to another <code>[scheme]://[hostname]:[port]</code> than the <code>Origin</code> request header of the initial request will not be processed by the browser. To enable cross-site requests API's can return a <code>Access-Control-Allow-Origin</code> response header. It is RECOMMENDED to use a whitelist to determine the validity of different cross-site request. To do this check the <code>Origin</code> header of the incoming request and check if the domain in this header is on the whitelist. If this is the case, set the incoming <code>Origin</code> header in the <code>Access-Control-Allow-Origin</code> response header.</p><p>Using a wildcard <code>*</code> in the <code>Access-Control-Allow-Origin</code> response header is NOT RECOMMENDED, because it disables CORS-security measures. Only for an open API which has to be accessed by numerous other websites this is appropriate.</p></section><section id="browser-based-applications"><h4 id="x3-7-3-browser-based-applications"><span class="secno">3.7.3 </span>Browser-based applications</h4><p>A specific subclass of clients are browser-based applications, that require the presence of particular security controls to facilitate secure implementation. Clients in this class are also known as <em>user-agent-based</em> or <em>single-page-applications</em> (SPA).
As with the (draft) <a href="https://tools.ietf.org/html/draft-ietf-oauth-browser-based-apps-07">OAuth 2.0 for Browser-Based Apps</a>, browser-based application can be split into three architectural patterns:</p><ul>
<li>JavaScript applications with a Backend; with this class of applications, the Backend is the confidential client and should intermediate any interaction, with tokens never ending up in the browser. Effectively, these are not different from regular web-application for this security facet, even though they leverage JavaScript for implementation.</li>
<li>JavaScript applications that share a domain with the API (resource server); these can leverage cookies marked as HTTP-Only, Secure and SameSite.</li>
<li>JavaScript applications without a Backend; these clients are considered public clients, are potentially more suspect to several types of attacks, including Cross-Site Scripting (XSS), Cross Site Request Forgery (CSRF) and OAuth token theft. In order to support these clients, the Cross-Origin Resource Sharing (CORS) policy mentioned above is critical and MUST be supported.</li>
</ul><p>All browser-based application SHOULD follow the best practices specified in <a href="https://tools.ietf.org/html/draft-ietf-oauth-browser-based-apps-07">OAuth 2.0 for Browser-Based Apps</a>.</p></section><section id="restrict-http-methods"><h4 id="x3-7-4-restrict-http-methods"><span class="secno">3.7.4 </span>Restrict HTTP methods</h4><p>Apply a whitelist of permitted HTTP Methods e.g. <code>GET</code>, <code>POST</code>, <code>PUT</code>. Reject all requests not matching the whitelist with HTTP response code <code>405 Method not allowed</code>.</p></section><section id="validate-content-types"><h4 id="x3-7-5-validate-content-types"><span class="secno">3.7.5 </span>Validate content types</h4><p>A REST request or response body SHOULD match the intended content type in the header. Otherwise this could cause misinterpretation at the consumer/producer side and lead to code injection/execution.</p><ul>
<li>Reject requests containing unexpected or missing content type headers with HTTP response status <code>406 Unacceptable</code> or <code>415 Unsupported Media Type</code>.</li>
<li>Avoid accidentally exposing unintended content types by explicitly defining content types e.g. Jersey (Java) <code>@consumes("application/json"); @produces("application/json")</code>. This avoids XXE-attack vectors for example.</li>
</ul><p>It is common for REST services to allow multiple response types (e.g. <code>application/xml</code> or <code>application/json</code>, and the client specifies the preferred order of response types by the Accept header in the request.</p><ul>
<li>Do NOT simply copy the <code>Accept</code> header to the <code>Content-type</code> header of the response.</li>
<li>Reject the request (ideally with a <code>406 Not Acceptable</code> response) if the Accept header does not specifically contain one of the allowable types.</li>
</ul><p>Services (potentially) including script code (e.g. JavaScript) in their responses MUST be especially careful to defend against header injection attack.</p><ul>
<li>Ensure sending intended content type headers in your response matching your body content e.g. <code>application/json</code> and not <code>application/javascript</code>.</li>
</ul></section><section id="http-return-code"><h4 id="x3-7-6-http-return-code"><span class="secno">3.7.6 </span>HTTP Return Code</h4><p>HTTP defines status codes. When designing a REST API, don't just use <code>200</code> for success or <code>404</code> for error. Always use the semantically appropriate <a href="https://tools.ietf.org/html/rfc7231#section-6">status code</a> for the response.</p></section><section id="http-header-filtering"><h4 id="x3-7-7-http-header-filtering"><span class="secno">3.7.7 </span>HTTP header filtering</h4><p>Realizations may rely on internal usage of HTTP-Headers. Information for processing requests and responses can be passed between components, that can have security implications.
For instance, this is commonly practices between a reverse proxy or TLS-offloader and an application server. Additional HTTP headers are used in such example to pass an original IP-address or client certificate.</p><p>Implementations MUST consider filtering both inbound and outbound traffic for HTTP-headers used internally.
Primary focus for inbound filtering is to prevent injection of malicious headers on requests.
For outbound filtering, the main concern is leaking of information.</p></section><section id="error-handling"><h4 id="x3-7-8-error-handling"><span class="secno">3.7.8 </span>Error handling</h4><ul>
<li>Respond with generic error messages - avoid revealing details of the failure unnecessarily.</li>
<li>Do not pass technical details (e.g. call stacks or other internal hints) to the client.

</li>
</ul></section></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="versioning"><!--OddPage--><h2 id="x4-versioning"><span class="secno">4. </span>Versioning</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-3"><div role="heading" class="warning-title marker" id="h-warning-0" aria-level="3"><span>Warning</span></div><p class="">This extension is still in development and can be modified at any time.</p></div><section id="deprecation-of-a-major-api-version"><h3 id="x4-1-deprecation-of-a-major-api-version"><span class="secno">4.1 </span>Deprecation of a major API version</h3><p>Major API releases should always be backward incompatible. In case a new API release does <em>not</em>  result in backward incompatibility, it does not warrant a full version increase and it is merely a minor release. In case a major release takes place, all (potential) clients have to implement the new version.</p><p>As clients cannot be broken, a migration from the previous to the new release cannot happen abruptly. After the launch the new version, the previous version has to be available in production as well. As not to maintain the previous version indefinitely and to encourage clients to use the new version, a transition period is communicated for users to adjust their code to the new version. This period is referred to as <em>deprecation period</em>. The duration of this period may very per API. Typically, the deprecation period lasts 6 months, but not more than one year. From a maintenance perspective, at most two major versions (one of which is the deprecated version) should be available in production concurrently. Communication with users is crucial during this period. The following points have to be communicated:</p><ul>
<li>A link to the (documentation of the) new API version;</li>
<li>Deprecation period with the exact date the deprecated version will be taken offline;</li>
<li>Migration plan to easily transition to the new version;</li>
<li>Overview of added, changed or removed features;</li>
<li>Breaking changes for the current implementation;</li>
<li>Contact details to request an extension of the deprecation period.</li>
</ul><p>These should be communicated using the following channels:</p><ul>
<li>To the e-mail accounts of the users (if known)</li>
<li>Clearly visible in the documentation of the previous version;</li>
<li>Using a <code>Warning</code> response header in all responses from the old API.</li>
</ul><p>A step-by-step approach:</p><ol>
<li>Launch new version;</li>
<li>Determine deprecation period;</li>
<li>Write migration plan;</li>
<li>Communicate in the API documentation of the old version;</li>
<li>Communicate per e-mail, Web forum and other channels;</li>
<li>Add <code>Warning</code> response header to the old version;</li>
<li>Check logs to monitor the usage of the old version during the deprecation period;</li>
<li>Shut down end-point of the old version at the planned date and monitor feedback;</li>
<li>No feeedback related to the old version within two weeks, remove the old version (including docs);</li>
</ol></section><section id="the-warning-response-header"><h3 id="x4-2-the-warning-response-header"><span class="secno">4.2 </span>The Warning response header</h3><p>The <code>Warning</code> reponse header (see: RFC 7234) has the status code 299 ("Miscellaneous Persistent Warning") and the API endpoint (including version number) as the warn-agent of the warning, followed by the warn-text with the human-readable warning. For example:</p><p><code>Warning: 299 https://service.../api/.../v1 "Deze versie van de API is verouderd en zal uit dienst worden genomen op 2020-02-01. Raadpleeg voor meer informatie hier de documentatie: https://omgevingswet.../api/.../v1".</code></p><p>Users should have sufficient time to phase out the old API. A period of 6 to 12 months is recommended.</p><div class="rule" id="api-21">
<p class="rulelab"><strong>API-21</strong>: Inform users of a deprecated API actively</p>
<p>Using the <code>Warning</code> response header in all responses of the deprecated APIs, users are informed of the deprecation and upcoming removal date.</p>
</div></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="naming-conventions"><!--OddPage--><h2 id="x5-naming-conventions"><span class="secno">5. </span>Naming conventions</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="note" role="note" id="issue-container-generatedID-4"><div role="heading" class="note-title marker" id="h-note-2" aria-level="3"><span>Note</span></div><p class="">The working group has indicated this extension to be stable.</p></div><p>Although according to the URI specification [<cite><a class="bibref" href="#bib-rfc3986">rfc3986</a></cite>] URI's are case sensitive, except the scheme/protocol (e.g. <code>https://</code>) and domain (e.g. <code>api.example.org</code>) parts, this section describes design rules related to URI's to ensure interoperability among implementations.</p><p>Specifically, design rules related to the path segments and query strings of URI's that are used to specify API resource locations are described.</p><section id="path-segments"><h3 id="x5-1-path-segments"><span class="secno">5.1 </span>Path segments</h3><p>First, in order to avoid compatibility issues with web servers and frameworks that do not handle case sensitivity of URI's well, the use of spinal-case path segments is preferred over camelCase. Also, it is a more common implementation choice for path segments than snake_case.</p><div class="rule" id="api-59">
<p class="rulelab"><strong>API-59</strong>: Use spinal-case for path segments</p>
<p>In case path segments include compound words, the individual words are written in lower case and may be separated with hyphens. For example, a resource representing a collection of organisatie codes, results in either a path segment <code>organisatie-codes</code> or <code>organisatiecodes</code>.</p>
</div><p>Also, the use of special characters used in path segments should be reduced to a minimum. Therefore, the use of diacritics and punctuation marks (other than hyphens, which are used in the spinal-case convention) must be avoided.</p><div class="rule" id="api-60">
<p class="rulelab"><strong>API-60</strong>: Normalize characters with diacritics to their base characters for path segments</p>
<p>In case path segments include diacritics (e.g. accents), these characters are normalized to their base characters. For example, a resource <code>scènes</code> results in path segment <code>scenes</code>.</p>
</div><div class="rule" id="api-67">
<p class="rulelab"><strong>API-67</strong>: Omit symbols and punctuation marks other than hyphens from path segments</p>
<p>Symbols and punctuation marks, other than hypens, must be omitted from path segments. For example:
</p><ul>
<li><code>https://api.example.org/v1/schemas</code> (<code>'</code> of schema's is omitted)</li>
<li><code>https://api.example.org/v1/hotel-restaurants</code> (<code>-</code> is preserved)</li>
</ul>
<p></p>
</div><p>With regards to naming, resources must use clear, descriptive names that expresses what the respective resources represent. Therefore, the use of nonstandard abbreviations and superfluous prefixes should be avoided in resource names.</p><div class="rule" id="api-61">
<p class="rulelab"><strong>API-61</strong>: Do not explicitly indicate that a resource is an API</p>
<p>Use resource names as path segments (e.g. <code>gebouwen</code>) and do not explicitly mention that the resource is an API in the name (e.g. <code>gebouwen_api</code>).</p>
</div><div class="rule" id="api-62">
<p class="rulelab"><strong>API-62</strong>: Do not use file extensions in path segments</p>
<p>Preferably use content negotiation using the <code>Accept</code> header</p>
</div><div class="rule" id="api-63">
<p class="rulelab"><strong>API-63</strong>: Do not use nonstandard abbreviations as resource names</p>
<p>Avoid using nonstandard abbreviations for naming resources (e.g. <code>/coords</code> instead of <code>/coordinates</code>). This does not apply to standard or broadly used abbreviations (e.g. <code>bagNummeraanduiding</code>).</p>
</div></section><section id="query-parameters"><h3 id="x5-2-query-parameters"><span class="secno">5.2 </span>Query parameters</h3><div class="rule" id="api-69">
<p class="rulelab"><strong>API-69</strong>: Use lowerCamelCase for query parameter keys</p>
<p>Keys of query parameters must be written in lowerCamelCase. This naming convention aligns nicely with JSON property names and plays well with client side libraries such as JavaScript. Query parameters should not be prefixed with an underscore (e.g. <code>_sort</code>), but in case prefixing elements with underscores is required (e.g. for data API's where field names are dynamically defined by clients or to align with HAL conventions), an underscore prefix must only be used to denote meta-parameters such as `_sort`, `_expand` and `_filter`.</p>
</div></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="json"><!--OddPage--><h2 id="x6-json"><span class="secno">6. </span>JSON</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-5"><div role="heading" class="warning-title marker" id="h-warning-1" aria-level="3"><span>Warning</span></div><p class="">This extension is still in development and can be modified at any time.</p></div><p>JavaScript Object Notation (JSON) [<cite><a class="bibref" href="#bib-rfc7159">rfc7159</a></cite>] is a format, just like XML, to serialize, store and transfer data. JSON is the primary representation format for APIs. In contrast to XML, JSON has a compact notation, for example:</p><pre><code class="language-json hljs" aria-busy="false">{
"naam": "Jan",
"geboortejaar": 1983
}</code></pre><div class="rule" id="api-22">
<p class="rulelab"><strong>API-22</strong>: JSON first - APIs receive and send JSON</p>
<p>APIs receive and send JSON.</p>
</div><div class="rule" id="api-23">
<p class="rulelab"><strong>API-23</strong>: APIs may provide a JSON Schema</p>
<p>APIs may provide an additional JSON Schema for data validation by the consumer (not being the OAS file).</p>
</div><div class="rule" id="api-24">
<p class="rulelab"><strong>API-24</strong>: Support content negotiation</p>
<p>Besides JSON, APIs should support other representations like XML and RDF using the default HTTP content negotiation mechanism. In case the requested format cannot be provided, a <code>406 Not Acceptable</code> response is sent.</p>
</div><div class="rule" id="api-25">
<p class="rulelab"><strong>API-25</strong>: Check the Content-Type header value</p>
<p>Check the <code>Content-Type</code> header is <code>application/json</code> or another supported content types, otherwise send the HTTP status code <code>415 Unsupported Media Type</code>.</p>
</div><div class="rule" id="api-26">
<p class="rulelab"><strong>API-26</strong>: Define field names in <i>camelCase</i></p>
<p>Define field names in such a way that the first word starts with a lower case letter and subsequent words start with a capital letter, with no intervening spaces or punctiation.</p>
</div><div class="rule" id="api-64">
<p class="rulelab"><strong>API-64</strong>: Do not use compound words for nested objects</p>
<p>Use nested JSON objects (e.g. <code>adres.straat</code>) instead of compound words (e.g. <code>adres_straat</code> or <code>adresStraat</code>) to represent information that is hierarchically nested.</p>
</div><div class="rule" id="api-65">
<p class="rulelab"><strong>API-65</strong>: Use enumerations only for fixed sets of values that are unlikely to change</p>
<p>Enumerations are assumed closed sets of values that are complete and not altered or extended. Changing or extending allowed values in an enum most likely imposes incompatibility issues and must be treated as a breaking change. Therefore, enumerations must only be used when:
</p><ul>
<li>the list of allowed values is complete and does not change (within a single API version); and</li>
<li>the API provider has full control over the enumeration values or can guarantee that these will not change.</li>
</ul>
In all other cases, use strings instead of enumerations and mention the currently allowed values in the API documentation.<p></p>
</div><div class="rule" id="api-68">
<p class="rulelab"><strong>API-68</strong>: Use meaningful enumeration values</p>
<p>When using enumerations, ensure to use enumeration values that are meaningful to users of the API. For example, use values such as `FEMALE` to depict a gender, not `F` (a code), `1` (an ID), or `true` (a boolean).
</p></div><div class="rule" id="api-66">
<p class="rulelab"><strong>API-66</strong>: Use UPPER_SNAKE_CASE for enumeration values</p>
<p>When using enumerations, define its values using UPPER_SNAKE_CASE.

</p><p>This rule does not apply when using lists of values that are standardized outside of the scope of the API specification, such as:</p>
<p></p><ul>
<li><a href="https://www.iso.org/iso-639-language-codes.html" target="_blank">ISO 639-1</a> language codes;</li>
<li>eIDAS Level of Assurance URI's;</li>
<li>BAG object statuses;</li>
<li>etc.</li>
</ul>
<p></p>
</div><div class="rule" id="api-27">
<p class="rulelab"><strong>API-27</strong>: Disable pretty print</p>
<p>Most REST clients and browsers (whether or not using extensions) can display JSON nicely formatted, even if the response does not include white-space.</p>
</div><div class="rule" id="api-28">
<p class="rulelab"><strong>API-28</strong>: Send a JSON-response without enclosing envelope</p>
<p>Many APIs encapsulate responses in envelopes like below (incorrect):</p>
<pre aria-busy="false"><code class="hljs json">  {
    <span class="hljs-attr">"persoon"</span>: {
      <span class="hljs-attr">"naam"</span>: <span class="hljs-string">"Jan"</span>,
      <span class="hljs-attr">"geboortejaar"</span>: <span class="hljs-number">1983</span>
    }
  }
  </code></pre>
<p>A future-proof API does not have envelopes (correct):</p>
<pre aria-busy="false"><code class="hljs json">  {
    <span class="hljs-attr">"naam"</span>: <span class="hljs-string">"Jan"</span>,
    <span class="hljs-attr">"geboortejaar"</span>: <span class="hljs-number">1983</span>
  }
  </code></pre>
</div><div class="rule" id="api-29">
<p class="rulelab"><strong>API-29</strong>: Support JSON request body for <code>POST</code> and <code>PUT</code> operations</p>
<p>Request bodies for <code>POST</code> and <code>PUT</code> operations should at least support the JSON media type(<code>application/json</code>). Media types designed for use in HTML forms (<code>application/x-www-form-urlencoded</code> or <code>multipart/form-data</code>) should not be supported. Other media types are allowed.</p>
<p>What is the difference? Media type <code>application/json</code> is encoded as:</p>
<pre aria-busy="false"><code class="hljs json">  {
    <span class="hljs-attr">"Name"</span>: <span class="hljs-string">"John Smith"</span>,
    <span class="hljs-attr">"Age"</span>: <span class="hljs-number">23</span>
  }
  </code></pre>
<p>Whereas media type <code>application/x-www-form-urlencoded</code> is encoded as:
</p><pre aria-busy="false"><code class="hljs">Name=John+Smith&amp;Age=23</code></pre>
</div></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="filtering"><!--OddPage--><h2 id="x7-filtering"><span class="secno">7. </span>Filtering</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-6"><div role="heading" class="warning-title marker" id="h-warning-2" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>Base URLs of resources should be as straightforward as possible. Complex result filters, sorting, and advanced querying (restricted to a single resource) are implemented as query paramters on top of the base URL.</p><p>Filtering uses unique query parameters that correspond to the queryable fields. If you would like to request a list of <em>applications</em> from the end point <code>/aanvragen/</code> and limit this to <em>open</em> applications, use the request <code>GET /aanvragen?status=open</code> gebruikt. In this example <code>status</code> is a queryable field.</p><div class="rule" id="api-30">
<p class="rulelab"><strong>API-30</strong>: Use query parameters corresponding to the queryable fields</p>
<p>Use uniqe query parameters that correspond to the fields that can be queried.</p>
</div><p>This approach can be applied to nested properties as well. This is the collection:</p><pre aria-busy="false"><code class="hljs json">[
  {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"actief"</span>,
    <span class="hljs-attr">"overheid"</span>: {
      <span class="hljs-attr">"code"</span>: <span class="hljs-string">"0000"</span>,
      <span class="hljs-attr">"naam"</span>: <span class="hljs-string">"Ministerie van BZK"</span>
    }
  },
  {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"inactief"</span>,
    <span class="hljs-attr">"overheid"</span>: {
      <span class="hljs-attr">"code"</span>: <span class="hljs-string">"9901"</span>,
      <span class="hljs-attr">"naam"</span>: <span class="hljs-string">"Provincie Gelderland"</span>
    }
  }
]
</code></pre><p>All objects with the status <em>actief</em> can be filtered using <code>?status=actief</code>. Filtering objects with code <em>0000</em> of the property <em>overheid</em> at the same time, this relates to a nested property. In this case, use the dot notation (like JavaScript): <code>?status=actief&amp;overheid.code=0000</code>.</p></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="sorting"><!--OddPage--><h2 id="x8-sorting"><span class="secno">8. </span>Sorting</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-7"><div role="heading" class="warning-title marker" id="h-warning-3" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><div class="rule" id="api-31">
<p class="rulelab"><strong>API-31</strong>: Use the query parameter <code>sort</code> to apply sorting</p>
<p>To sort, use the query parameter <code>sort</code> (used to be <code>sorteer</code> which is deprecated now). This query parameter takes a comma-separated list of field names to be used in the sort. Prefixing a filed name with a minus sign (*-*), the field is sorted in descending order.</p>
</div><p>A few examples:</p><table>
<thead>
<tr>
<th>Request</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td><code>GET /aanvragen?sort=-prio</code></td>
<td>Retrieves a list of <em>aanvragen</em> sorted by the property <em>prio</em> in descending order.</td>
</tr>
<tr>
<td><code>GET /aanvragen?sort=-prio,aanvraagDatum</code></td>
<td>Retrieves a list of <em>aanvragen</em> sorted by the property <em>prio</em>  in descending order. Within a specific value of <em>prio</em>, the objects are sorted by <em>aanvraagDatum</em> in ascending order.</td>
</tr>
</tbody></table></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="customization"><!--OddPage--><h2 id="x9-customization"><span class="secno">9. </span>Customization</h2><p><em>Dit onderdeel is niet normatief.</em></p><p>The user of an API does not always require the complete representation (i.e. all attributes) of a resource. Providing the option to select the required attributes in the request reduces network traffic (relevant for light-weight applications), simplifies the use of the API and makes it adjustable (fit-for-use). The query parameter <code>fields</code> supports this usage. The query parameter accepts a comma-separated list of field names. The result is a custom representation.</p><div class="example">
<p>The following example request retrieves sufficient information to show a sorted list of applications (*aanvragen*):</p>
<pre aria-busy="false"><code class="hljs">GET /aanvragen?fields=id,onderwerp,aanvrager,wijzigDatum&amp;status=open&amp;sorteer=wijzigDatum`</code></pre>
</div><p>By applying the aforementioned <code>fields</code> parameter, the contents of the body can be customized as required.</p><div class="rule" id="api-09">
<p class="rulelab"><strong>API-09</strong>: Implement custom representation if supported</p>
<p>Provide a comma-separated list of field names using the query parameter fields te retrieve a custom representation. In case non-existent field names are passed, a <code>400 Bad Request</code> error message is returned.</p>
</div></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="search"><!--OddPage--><h2 id="x10-search"><span class="secno">10. </span>Search</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-8"><div role="heading" class="warning-title marker" id="h-warning-4" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>Sometimes, straightforward filters are not sufficient and the capabilities of full-text search engines are required. APIs support full-text search using the query parameter <code>search</code> (used to be 'zoek' which is now deprecated). The result is returned in the same representation.</p><div class="rule" id="api-32">
<p class="rulelab"><strong>API-32</strong>: Use the query parameter <code>search</code> for full-text search</p>
<p>APIs support full-text searching using the query parameter <code>zoek</code>.</p>
</div><p>Examples combining filtering, sorting, and searching:</p><table>
<thead>
<tr>
<th>Request</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td><code>GET /aanvragen?sort=-wijzigingDatum</code></td>
<td>Retrieves a list of <em>aanvragen</em> sorted by <em>wijzigingsDatum</em>  in descending order</td>
</tr>
<tr>
<td><code>GET /aanvragen?status=gesloten&amp;sort=-wijzigingDatum</code></td>
<td>Retrieves a list of <em>aanvragen</em> filtered by the <em>status</em> property set to <em>gesloten</em> and sorted by <em>wijzigingsDatum</em>  in descending order</td>
</tr>
<tr>
<td><code>GET /aanvragen?search=urgent&amp;status=open&amp;sort=-prio,aanvraagDatum</code></td>
<td>Retrieves a list of <em>aanvragen</em> containing the word <em>urgent</em> and filtered by the <em>status</em> property set to <em>open</em>. The list is sorted by <em>prio</em>  in descending order and subsequently sorted by <em>aanvraagDatum</em>  in ascending order.</td>
</tr>
</tbody></table><section id="wildcards"><h3 id="x10-1-wildcards"><span class="secno">10.1 </span>Wildcards</h3><div class="rule" id="api-33">
<p class="rulelab"><strong>API-33</strong>: Support both <code>*</code> and <code>?</code> wildcard characters for full-text search APIs</p>
<p>Full-text search APIs should support two wildcard characters:</p>
<ul>
<li><code>*</code> Matches zero or more (non-space) characters</li>
<li><code>?</code> Matches exactly one (non-space) character</li>
</ul>
</div><p>For example, <code>he*</code> matches any string starting with <code>he</code>, like <code>hek</code>, <code>hemelwaterafvoer</code>, et cetera. The search string <code>he?</code> only matches 3-letter strings that start with <code>he</code>, like <code>hek</code>, <code>heg</code>, et cetera.</p><p>Find below some base rules for wildcard searches:</p><ul>
<li>A search term may contain multiple wildcard characters.</li>
<li>A search term may contain a combination of wildcard characters. For example <code>m*??</code> matches any string that starts with <code>m</code> and has three or more characters.</li>
<li>Spaces (URL-encoded as <code>%20</code>) are used as word boundaries and wildcard matching only operates within a single word. For example, <code>r*te*</code> matches the string <strong><code>r</code></strong><code>uim</code><strong><code>te</code></strong><code>lijk</code>, but not the phrase <strong><code>r</code></strong><code>uimte</code> <strong><code>te</code></strong><code>kort</code>.</li>
<li>Wildcards only operate on fields that contain alphanumerical values.</li>
</ul></section><section id="aliases-for-common-queries"><h3 id="x10-2-aliases-for-common-queries"><span class="secno">10.2 </span>Aliases for common queries</h3><p>To improve the API experience, common queries should be provided as end point. For example, <em>aanvragen</em> that have the <em>status</em> property set to <em>gesloten</em> and sorted by <em>wijzigingsDatum</em> in descending order, i.e. recently closed applications, can be retrieved using the following end point:</p><p><code>GET /aanvragen/recent-gesloten</code></p></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="temporal"><!--OddPage--><h2 id="x11-temporal"><span class="secno">11. </span>Temporal</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-9"><div role="heading" class="warning-title marker" id="h-warning-5" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>Information about a resource may change over time. Time travelling is a default mechanism to request information about a specific moment in time is. From the perspective of time travelling using an API, there are three important moments in time:</p><table>
<thead>
<tr>
<th>Moment in time</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>Geldig</td>
<td>This is a moment in time on which the data returned is valid (<em>geldig</em>) in reality.</td>
</tr>
<tr>
<td>Beschikbaar</td>
<td>This is a moment in time on which the data returned is available (<em>beschikbaar</em>) using the same API.</td>
</tr>
<tr>
<td>In werking (getreden op)</td>
<td>This is a moment in time on which the data returned became legally effective (<em>in werking getreden op</em>).</td>
</tr>
</tbody></table><p>The base principle for time travelling is as follows:</p><ul>
<li>If no specific date is supplied, tehn the most recent, valid information is returned. If no valid versions exists yet, then the most recent known version is returned;</li>
<li>If a specific date is supplied, it is passed as a a query parameter in the URI.</li>
<li>Supplying a specific date, use the following query parameters respectively:</li>
<li>date on which the data is valid (geldigOp);</li>
<li>date on which the data are available (beschikbaarOp);</li>
<li>date on which the date became legally effectiven (inWerkingOp).</li>
</ul><p>The values of these three query parameters in the URI are structured like this (based on RFC3339 / ISO 8601):</p><table>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td><code>geldigOp</code></td>
<td><code>YYYY-MM-DD</code></td>
</tr>
<tr>
<td><code>beschikbaarOp</code></td>
<td><code>YYYY-MM-DDThh:mm:ss.s</code></td>
</tr>
<tr>
<td><code>inWerkingOp</code></td>
<td><code>YYYY-MM-DD</code></td>
</tr>
</tbody></table><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>YYYY</code></td>
<td>Four-digit year</td>
</tr>
<tr>
<td><code>MM</code></td>
<td>Two-digit month (01 = January, etc.)</td>
</tr>
<tr>
<td><code>DD</code></td>
<td>Two-digit day of the month (01 to 31)</td>
</tr>
<tr>
<td><code>hh</code></td>
<td>Two-digit hour (00 to 23) (am / pm not allowed)</td>
</tr>
<tr>
<td><code>mm</code></td>
<td>Two-digit minute (00 to 59)</td>
</tr>
<tr>
<td><code>ss</code></td>
<td>Two-digit second (00 to 59)</td>
</tr>
<tr>
<td><code>s</code></td>
<td>One or more digits to represent the decimal fraction of a second</td>
</tr>
</tbody></table><section id="level-of-support"><h3 id="x11-1-level-of-support"><span class="secno">11.1 </span>Level of support</h3><p>Time travelling is an optional mechanism with optional features. It may be that:</p><ul>
<li>time travelling is not supported at all;</li>
<li>the notion <em>legally effective</em> is not supported;</li>
<li>time travelling to the future is not supported.</li>
</ul><p>Users have to be informed of the invalid/not-supported requests when processing time travelling requests:</p><table>
<thead>
<tr>
<th>Not supported?</th>
<th>HTTP status code and explanation</th>
</tr>
</thead>
<tbody><tr>
<td>Time travelling</td>
<td><code>HTTP/1.1 403 Content-Type: application/problem+json Content-Language: nl { "type": ".../id/&lt;c&gt;/parameter/TijdreizenNietOndersteund", "title": "{Het verzoek is begrepen, maar de tijdreisparameters worden niet ondersteund}", "status": 403, "detail": "{Tijdreizen wordt niet ondersteund, verwijder alle tijdreisparameters}", "instance": "/resource/#id"}</code></td>
</tr>
<tr>
<td>Legally effective</td>
<td><code>HTTP/1.1 403 Content-Type: application/problem+json Content-Language: nl { "type":".../id/&lt;c&gt;/parameter/InWerkingTredingNietOndersteund’", "title": "{Het verzoek is begrepen, maar de tijdreisparameter ‘inWerkingOp’ wordt niet ondersteund}", "status": 403, "detail": "{Tijdreizen met een inwerkingstredingsmoment wordt niet ondersteund, verwijder de parameter ‘inWerkingOp’}", "instance": "/resource/#id"}</code></td>
</tr>
<tr>
<td>Future</td>
<td><code>HTTP/1.1 403 Content-Type: application/problem+json Content-Language: nl { "type": ".../id/&lt;c&gt;/parameter/ToekomstNietOndersteund", "title": "{Het verzoek is begrepen, maar tijdreisparameters mogen geen tijdstip in de toekomst bevatten” }", "status": 403, "detail": "{Tijdreizen naar de toekomst wordt niet ondersteund, verwijder de tijdreisparameters of gebruik een tijdstip in het verleden}", "instance": "/resource/#id"}</code></td>
</tr>
</tbody></table></section><section id="robustness"><h3 id="x11-2-robustness"><span class="secno">11.2 </span>Robustness</h3><p>Users have to be informed of the lack of historical data and general requests in a resource collection when processing time travelling requests:</p><table>
<thead>
<tr>
<th>Request</th>
<th>HTTP status code and explanation</th>
</tr>
</thead>
<tbody><tr>
<td>Specific resource</td>
<td><code>HTTP/1.1 404 Content-Type: application/problem+json Content-Language: nl {"type": ".../id/&lt;c&gt;/BestaatNiet", "title": "De gevraagde versie bestaat niet.", "status": 404, "detail": "Versie 2017-01-01 van regeling 123 bestaat niet.", "instance": "/regelingen/v1/123?geldigOp=2017-01-01"}</code></td>
</tr>
<tr>
<td>Resource-collectie</td>
<td><code>GET .../regelingen/v1?beschikbaarOp=2017-01-01T00:00:00 HTTP/1.1 200 Content-Type: application/json+hal {"_links": {"self": {"href": "/r-n/v1/123?beschikbaarOp=2017-01-01T00:00:00" }, "items": [ { "href": "/r-n/v1/123?beschikbaarOp=2017-01-01T00:00:00" }, { "href": "/r-n/v1/456?beschikbaarOp=2017-01-01T00:00:00" }, { "href": "/r-n/v1/789?beschikbaarOp=2017-01-01T00:00:00" }] } }</code></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="geospatial"><!--OddPage--><h2 id="x12-geospatial"><span class="secno">12. </span>Geospatial</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-10"><div role="heading" class="warning-title marker" id="h-warning-6" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>REST APIs for handling geospatial features may provide spatial filtering. There is a distinction between retrieving geometries in the result (response) and supplying a spatial filter in the call (request). When requesting parcel information, users do not necessarily require the geometry. A name or parcel ID may be sufficient.</p><div class="rule" id="api-34">
<p class="rulelab"><strong>API-34</strong>: Support GeoJSON for geospatial APIs</p>
<p>For geospatial APIs, preferably use the GeoJSON format [<cite><a class="bibref" href="#bib-rfc7946">rfc7946</a></cite>].</p>
</div><section id="result-response"><h3 id="x12-1-result-response"><span class="secno">12.1 </span>Result (response)</h3><p>In a JSON API the geometry is returned as GeoJSON, wrapped in a separate GeoJSON object.</p><div class="rule" id="api-35">
<p class="rulelab"><strong>API-35</strong>: Embed GeoJSON as part of the JSON resource</p>
<p>When a JSON (<code>application/json</code>) response contains a geometry, represent it in the same way as the <code>geometry</code> object of GeoJSON.</p>
<pre aria-busy="false"><code class="hljs json">  {
    <span class="hljs-attr">"naam"</span>: <span class="hljs-string">"Paleis Soestdijk"</span>,
    <span class="hljs-attr">"locatie"</span>:  {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Point"</span>,
      <span class="hljs-attr">"coordinates"</span>: [<span class="hljs-number">125.6</span>, <span class="hljs-number">10.1</span>]
    }
  }
  </code></pre>
</div></section><section id="call-requests"><h3 id="x12-2-call-requests"><span class="secno">12.2 </span>Call (requests)</h3><p>A spatial filter can be complex and large. It is best practice to supply complex queries in the body, not in the request URI. Since <code>GET</code> may not have a payload (although supported by some clients) use a <code>POST</code> request to a separate endpoint. For example, a GEO query to all <em>panden</em> where the geometry in the field <code>_geo</code> (there may be multiple geometry fields) contains a GeoJSON object (in this case a <code>Point</code>, so one coordinate pair):</p><div class="rule" id="api-36">
<p class="rulelab"><strong>API-36</strong>: Provide a <code>POST</code> endpoint for geo queries</p>
<p>Spatial queries are sent in a <code>POST</code> to a dedicated endpoint.</p>
<pre aria-busy="false"><code class="hljs json">  <span class="hljs-comment">// POST /api/v1/panden/_zoek with request body:</span>
  {
    <span class="hljs-attr">"_geo"</span>: {
      <span class="hljs-attr">"contains"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Point"</span>,
        <span class="hljs-attr">"coordinates"</span>: [<span class="hljs-number">5.9623762</span>, <span class="hljs-number">52.2118093</span>]
      }
    }
  }
  </code></pre>
<p>Other geospatial operators like <code>intersects</code> or <code>within</code> can be used as well.</p>
</div><div class="rule" id="api-37">
<p class="rulelab"><strong>API-37</strong>: Support mixed queries at <code>POST</code> endpoints</p>
<p>The <code>POST</code> endpoint is preferably set up as a generic query endpoint to support combined queries:</p>
<pre aria-busy="false"><code class="hljs json">  <span class="hljs-comment">// POST /api/v1/panden/_zoek with request body:</span>
  {
    <span class="hljs-attr">"_geo"</span>: {
      <span class="hljs-attr">"contains"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Point"</span>,
        <span class="hljs-attr">"coordinates"</span>: [<span class="hljs-number">5.9623762</span>, <span class="hljs-number">52.2118093</span>]
      }
    },
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"Actief"</span>
  }
  </code></pre>
</div><div class="rule" id="api-38">
<p class="rulelab"><strong>API-38</strong>: Put results of a global spatial query in the relevant geometric context</p>
<p>In case of a global query <code>/api/v1/_zoek</code>, results should be placed in the relevant geometric context, because results from different collections are retrieved. Express the name of the collection to which the results belongs in the singular form using the property <code>type</code>. For example:</p>
<pre aria-busy="false"><code class="hljs json">  <span class="hljs-comment">// POST /api/v1/_zoek:</span>
  {
    <span class="hljs-attr">"currentPage"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"nextPage"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">"pageSize"</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">"_embedded"</span>: {
      <span class="hljs-attr">"items"</span>: [
        {
          <span class="hljs-attr">"type"</span>: <span class="hljs-string">"enkelbestemming"</span>,
          <span class="hljs-attr">"_links"</span>: {
            <span class="hljs-attr">"self"</span>: {
              <span class="hljs-attr">"href"</span>: <span class="hljs-string">"https://api.example.org/v1/enkelbestemmingen/1234"</span>
            }
          }
        },
        {
          <span class="hljs-attr">"type"</span>: <span class="hljs-string">"dubbelbestemming"</span>,
          <span class="hljs-attr">"_links"</span>: {
            <span class="hljs-attr">"self"</span>: {
              <span class="hljs-attr">"href"</span>: <span class="hljs-string">"https://api.example.org/v1/dubbelbestemmingen/8765"</span>
            }
          }
        }
      ]
    }
  }
  </code></pre>
</div></section><section id="crs-negotiation"><h3 id="x12-3-crs-negotiation"><span class="secno">12.3 </span>CRS negotiation</h3><p>The default CRS (Coordinate Reference System) for GeoJSON is WGS84. This is the global coordinate reference system that can be applied world-wide. Due the datum and the tectonic displacements it is not accurate enough for local coordinate reference systems like ETRS89 (EPSG:4258, European), or RD/Amersfoort (EPSG:28992, Dutch).</p><p>Since most client-side mapping libraries use WGS84, the W3C/OGC working group <em>Spatial Data on the Web</em> recommends to use this as the default coordinate reference system. Thus, spatial data can be mapped without any complex transformations. The API strategy caters for this supporting not only ETRS89 and RD/Amersfoort, but also WGS84 and Web Mercator (EPSG:3857).</p><div class="rule" id="api-39">
<p class="rulelab"><strong>API-39</strong>: Use ETRS89 as the preferred coordinate reference system (CRS)</p>
<p>General usage of the European ETRS89 coordinate reference system (CRS) is preferable, but is not necessarily the default CRS. Hence, the CRS has to be explicitly included in each request.</p>
</div><p>The CRS can be specified for request and response individually using custom headers: RD/Amersfoort, ETRS89, WGS84, and Web Mercator.</p><p>The guiding priciples for CRS support:</p><ul>
<li>Source systems record coordinates as they enter the system (legal context);</li>
<li>Define a default CRS in the API, if the consumer does not specify the CRS it is assumed it uses the default.</li>
<li>Coordinate reference systems API strategy: request/response in RD; ETRS89; WGS84; Web Mercator;</li>
<li>Consider no-regret: record both in ETRS89 and RD/Amersfoort instead of on-the-fly transformation;</li>
<li>Use RDNAPTRANS™ 2018 to transform RD/Amersfoort to ETRS89 (correction grid);</li>
<li>Presentation depending on context (e.g. user requirements);</li>
<li>Exchange format (notation) ETRS89 and WGS84 X Y in decimal degrees: DD.ddddddddd (for example: <code>5.962376256, 52.255023450</code>)</li>
<li>Exchange format (notation) RD and Web Mercator X Y in meters: <code>195427.5200 311611.8400</code></li>
</ul><div class="rule" id="api-40">
<p class="rulelab"><strong>API-40</strong>: Pass the coordinate reference system (CRS) of the request and the response in the headers</p>
<p>The coordinate reference system (CRS) for both the request and the response are passed as part of the request headers and reponse headers. In case this header is missing, send the HTTP status code <code>412 Precondition Failed</code>.</p>
</div><p>The following headers are purely meant for negotiation between the client and the server. Depending on the application, the request not only contains geometries but also specific meta data, e.g. the original realistion including the collection date.</p><p>Request and response may be based on another coordinate reference system. This applies the HTTP-mechanism for content negotiation. The CRS of the geometry in the request (request body) is specified using the header <code>Content-Crs</code>.</p><table>
<thead>
<tr>
<th>HTTP header</th>
<th>Value</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td><code>Content-Crs</code></td>
<td>EPSG:4326</td>
<td>WGS84, global</td>
</tr>
<tr>
<td><code>Content-Crs</code></td>
<td>EPSG:3857</td>
<td>Web Mecator, global</td>
</tr>
<tr>
<td><code>Content-Crs</code></td>
<td>EPSG:4258</td>
<td>ETRS89, European</td>
</tr>
<tr>
<td><code>Content-Crs</code></td>
<td>EPSG:28992</td>
<td>RD/Amersfoort, Dutch</td>
</tr>
</tbody></table><p>The preferred CRS for the geometry in the response (response body) is specified using the header <code>Accept-Crs</code>.</p><table>
<thead>
<tr>
<th>HTTP header</th>
<th>Value</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td><code>Accept-Crs</code></td>
<td>EPSG:4326</td>
<td>WGS84, global</td>
</tr>
<tr>
<td><code>Accept-Crs</code></td>
<td>EPSG:3857</td>
<td>Web Mercator, global</td>
</tr>
<tr>
<td><code>Accept-Crs</code></td>
<td>EPSG:4258</td>
<td>ETRS89, European</td>
</tr>
<tr>
<td><code>Accept-Crs</code></td>
<td>EPSG:28992</td>
<td>RD/Amersfoort, Dutch</td>
</tr>
</tbody></table></section><section id="crs-transformation"><h3 id="x12-4-crs-transformation"><span class="secno">12.4 </span>CRS transformation</h3><p>Certified software is available to the national government to transform between coordinate reference systems.</p><div class="rule" id="api-41">
<p class="rulelab"><strong>API-41</strong>: Use content negotiation to serve different CRSs</p>
<p>The CRS for the geometry in the response body is defined using the <code>Accept-Crs</code> header. In case the API does not support the requested CRS, send the HTTP status code <code>406 Not Acceptable</code>.</p>
</div></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="hypermedia"><!--OddPage--><h2 id="x13-hypermedia"><span class="secno">13. </span>Hypermedia</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="note" role="note" id="issue-container-generatedID-11"><div role="heading" class="note-title marker" id="h-note-3" aria-level="3"><span>Note</span></div><p class="">The working group has indicated this extension to be stable.</p></div><p>Hypermedia relates to the use of hyperlinks (from now on called <em>links</em>) as part of a document's payload, which are essentially URIs pointing to other resources. Typically, but not necessarily, these links are retrievable (also called <em>dereferencable</em>) from the web over the HTTP protocol. We intentionally make a clear separation between navigation controls and external links. Both kinds can easily be combined as part of a single API.</p><div class="rule" id="api-70">
<p class="rulelab"><strong>API-70</strong>: Provide absolute URIs for hyperlinks</p>
<p>Only absolute URIs may be provided since this enables simple traversal of links by following URIs. While relative links are more compact and may be practical when having multi-environment deployments, they introduce extra complexity for the client and may potentially result in erroneous behaviour (e.g. when dealing with trailing slashes or dot segments). For the same reasons, absolute URIs may not be templated.</p>
</div><div class="note" role="note" id="issue-container-generatedID-12"><div role="heading" class="note-title marker" id="h-note-4" aria-level="3"><span>Note</span></div><p class="">This design rule does explicitly NOT intend the use of hyperlinks as an implementation of the often debated HATEOAS constraint, as described in the well-known REST thesis (Roy Fielding) or the Richardson Maturity Model (Level 3). An API specification must offer a strict and stable contract between server and client, which should guarantee backwards compatiblity during the full lifetime of a given major version, whereas true HATEOAS advocates continually evolving interfaces requiring little to no prior knowledge about how to interact with the application.</p></div><section id="navigation-controls"><h3 id="x13-1-navigation-controls"><span class="secno">13.1 </span>Navigation controls</h3><p>Navigation controls are references to URIs within the scope of the originating API, i.e. these paths are typically specified in the same OpenAPI specification and thus residing on the same domain within the same base path. The main (and only) purpose is to increase discoverability by providing navigation links, which can be leveraged by client applications or by developers while building applications or evaluating APIs. Since internal links only serve a navigational purpose, they can only be provided as part of response messages.</p><div class="note" role="note" id="issue-container-generatedID-13"><div role="heading" class="note-title marker" id="h-note-5" aria-level="4"><span>Note</span></div><p class="">The only exception when navigation controls are allowed to point to other APIs is when they share governance and security context. When doing so, the governing party must guarantee stability of links between the APIs, which means the target operation of navigational links may never change during the lifetime of (a major version of) the originating API. They must also share the same security context, otherwise clients have to exchange mixed credentials for different endpoints.</p></div><div class="rule" id="api-71">
<p class="rulelab"><strong>API-71</strong>: Support the HAL media type for every GET response</p>
<p>The [<cite><a class="bibref" href="#bib-hal">HAL</a></cite>] standard is a universal and widely adopted standard for serializing hyperlinks in JSON responses. As standardized by the HAL specification, navigation controls must be provided in a dedicated links-container, named <code>_links</code>. This introduces a clear separation between the data and the interface controls, preventing possible naming conflicts. Link objects can reside on any level in the JSON tree. HAL response messages must explictly specify the corresponding media type.</p>
<div class="example">
<p>For example, a book resource may provide a self-referencing link.</p>
<pre aria-busy="false"><code class="hljs json"><span class="hljs-comment">// Content-Type: application/hal+json</span>
{
  <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"14d3030c-3b61-4070-b902-342f80e99364"</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Da Vinci Code"</span>,
  <span class="hljs-attr">"isbn"</span>: <span class="hljs-string">"902455991X"</span>,
  <span class="hljs-attr">"_links"</span>: {
    <span class="hljs-attr">"self"</span>: {
      <span class="hljs-attr">"href"</span>: <span class="hljs-string">"https://api.example.org/v1/books/14d3030c-3b61-4070-b902-342f80e99364"</span>
    }
  }
}
    </code></pre>
</div>
</div><div class="note" role="note" id="issue-container-generatedID-14"><div role="heading" class="note-title marker" id="h-note-6" aria-level="4"><span>Note</span></div><p class="">Navigation controls should not be intermixed with functional identification. Information resources represent real-world entities, which are functionally identified outside the context of an individual API. The same entities may be exchanged via other channels or other (versions of) APIs, providing the same functional identifiers.</p></div><div class="rule" id="api-72">
<p class="rulelab"><strong>API-72</strong>: Provide at least an <code>href</code> attribute for every link object</p>
<p>A link object must at least contain an <code>href</code> attribute with an absolute URI as value. Additionally, a <code>title</code> attribute may be provided for providing a human-readable description of the link. Other attributes should not be used.</p>
</div><div class="rule" id="api-73">
<p class="rulelab"><strong>API-73</strong>: Provide self-referencing links for all resources</p>
<p>In case a JSON object represents an entity which is exposed as an individual resource within the API, a self-referencing link with relation type <code>self</code> must be provided. This includes resources which are (partially) embedded in other resources. Self-referencing links typically do not contain a <code>title</code> attribute.</p>
<div class="example">
<p>For example, a book resource may provide a self-reference for itself and for its author (which resides in a nested object).</p>
<pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"14d3030c-3b61-4070-b902-342f80e99364"</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Da Vinci Code"</span>,
  <span class="hljs-attr">"isbn"</span>: <span class="hljs-string">"902455991X"</span>,
  <span class="hljs-attr">"_embedded"</span>: {
    <span class="hljs-attr">"author"</span>: {
      <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"8e1dbefc-452f-47f9-a104-3faa7eb217aa"</span>,
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Dan Brown"</span>,
      <span class="hljs-attr">"_links"</span>: {
        <span class="hljs-attr">"self"</span>: {
          <span class="hljs-attr">"href"</span>: <span class="hljs-string">"https://api.example.org/v1/authors/8e1dbefc-452f-47f9-a104-3faa7eb217aa"</span>,
        }
      }
    }
  },
  <span class="hljs-attr">"_links"</span>: {
    <span class="hljs-attr">"self"</span>: {
      <span class="hljs-attr">"href"</span>: <span class="hljs-string">"https://api.example.org/v1/books/14d3030c-3b61-4070-b902-342f80e99364"</span>
    }
  }
}
    </code></pre>
</div>
</div><div class="rule" id="api-74">
<p class="rulelab"><strong>API-74</strong>: Provide navigational links pointing to GET operations only</p>
<p>Navigation controls may be provided, only when pointing to read (GET) operations. Other operations require more prior knowledge for client applications to be able to use them in a meaningful manner.</p>
</div><div class="rule" id="api-75">
<p class="rulelab"><strong>API-75</strong>: Only provide navigational links when there is a clear functional goal</p>
<p>While it might be tempting to provide navigation controls for every possible client interaction, navigation links must be added sparingly. Only when there is a clear functional goal / added value, additional navigation controls should be provided.</p>
</div></section><section id="external-links"><h3 id="x13-2-external-links"><span class="secno">13.2 </span>External links</h3><p>External links are references to URIs outside of the scope of the originating API. These links can point to literally any location on the web; they may even point to URIs which are not dereferencable at all (e.g. in case they are used as a universal identifier only). A few examples:</p><ul>
<li>Links to related documents, such as images, PDF documents etc.</li>
<li>Links to HTML web pages, providing human-friendly content</li>
<li>Links to universal standards, such as RDF vocabularies</li>
</ul><div class="rule" id="api-76">
<p class="rulelab"><strong>API-76</strong>: Treat external links as regular resource attributes</p>
<p>External links must be considered in the same way as regular resource attributes.</p>
<div class="example">
<p>For example, a book resource may provide a link to the cover image:</p>
<pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"14d3030c-3b61-4070-b902-342f80e99364"</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Da Vinci Code"</span>,
  <span class="hljs-attr">"isbn"</span>: <span class="hljs-string">"902455991X"</span>,
  <span class="hljs-attr">"cover"</span>: <span class="hljs-string">"https://cdn.example.org/covers/davincicode.png"</span>,
  <span class="hljs-attr">"website"</span>: <span class="hljs-string">"https://danbrown.com/the-davinci-code/"</span>,
  <span class="hljs-attr">"_links"</span>: {
    <span class="hljs-attr">"self"</span>: {
      <span class="hljs-attr">"href"</span>: <span class="hljs-string">"https://api.example.org/v1/books/14d3030c-3b61-4070-b902-342f80e99364"</span>
    }
  }
}
    </code></pre>
</div>
</div></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="pagination"><!--OddPage--><h2 id="x14-pagination"><span class="secno">14. </span>Pagination</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="rule" id="api-42">
<p class="rulelab"><strong>API-42</strong>: Provide standard navigation controls for pagination</p>
<p>For collection resources, navigation controls must be provided to simplify pagination for client applications. The standard link relation types <code>next</code> and <code>prev</code> (see [<cite><a class="bibref" href="#bib-iana-relations">IANA-RELATIONS</a></cite>]) must be used if relevant. When no next or previous page exists, the link must be fully omitted. By providing standard links, clients can build and re-use generic pagination components, regardless of the pagination strategy (e.g. offset or cursor-based).</p>
<div class="example">
<p>For example, a collection resource for books provides a <code>self</code> and <code>next</code> link. Since this is the first page, no <code>prev</code> link is provided.</p>
<pre aria-busy="false"><code class="hljs json"><span class="hljs-comment">// GET /books</span>
{
  <span class="hljs-attr">"currentPage"</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">"nextPage"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">"pageSize"</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">"_embedded"</span>: {
    <span class="hljs-attr">"items"</span>: [
      {
        <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"14d3030c-3b61-4070-b902-342f80e99364"</span>,
        <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Da Vinci Code"</span>,
        <span class="hljs-attr">"isbn"</span>: <span class="hljs-string">"902455991X"</span>,
        <span class="hljs-attr">"_links"</span>: {
          <span class="hljs-attr">"self"</span>: {
            <span class="hljs-attr">"href"</span>: <span class="hljs-string">"https://api.example.org/v1/books/14d3030c-3b61-4070-b902-342f80e99364"</span>
          }
        }
      }
    ]
  },
  <span class="hljs-attr">"_links"</span>: {
    <span class="hljs-attr">"self"</span>: {
      <span class="hljs-attr">"href"</span>: <span class="hljs-string">"https://api.example.org/v1/books"</span>
    },
    <span class="hljs-attr">"next"</span>: {
      <span class="hljs-attr">"href"</span>: <span class="hljs-string">"https://api.example.org/v1/books?page=2"</span>
    }
  }
}
    </code></pre>
</div>
</div><div class="note" role="note" id="issue-container-generatedID-15"><div role="heading" class="note-title marker" id="h-note-7" aria-level="3"><span>Note</span></div><p class="">Providing the total count and/or last page of a collection should be considered carefully, since this may have a considerable impact on performance when dealing with larger collections. Therefore, providing such information or links is generally discouraged. Most often, this is not a problem since this does not add significant value for end users. Most modern user interfaces provide next/prev links only (e.g. a <em>load more</em> control).</p></div></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="caching"><!--OddPage--><h2 id="x15-caching"><span class="secno">15. </span>Caching</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-16"><div role="heading" class="warning-title marker" id="h-warning-7" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>For some resources, caching is required. HTTP provides default mechanisms for caching. Furthermore, both clients and infrastructure already handle these mechanisms by default.</p><p>The requirements to leverage these default caching mechanisms:</p><ul>
<li>Add a few HTTP response headers;</li>
<li>Handle a few HTTP request headers.</li>
</ul><p>There are 2 ways to implement caching: <code>ETag</code> and <code>Last-Modified</code>.</p><section id="etag"><h3 id="x15-1-etag"><span class="secno">15.1 </span>ETag</h3><p>An ETag (Entity Tag) is a hash code or checksum of a resource. A modification of a resource results in another ETag. Hence, an ETag is unique to a particular version of a resource. Returning a resource, the ETag is added as the HTTP header <code>ETag</code>. The client caches both the resource and the ETag. Requesting the same resource, this ETag is supplied in the HTTP request header <code>If-None-Match</code>. The server matches the ETag in the HTTP request header <code>If-None-Match</code> to the ETag for the resource available to the server. In case these match, the server returns a HTTP response status code <code>304 Not Modified</code> terug. The client retrieves the resource from its own cache. This only applies to client-side caching, in case the client sends the request headers along, otherewise it receives an HTTP status code <code>200 OK</code>.</p></section><section id="last-modified"><h3 id="x15-2-last-modified"><span class="secno">15.2 </span>Last-Modified</h3><p>It works just like ETag, but uses timestamps instead. The response HTTP header <code>Last-Modified</code> contains a timestamp that corresponds to the RFC 1123 notation and is valided against the request HTTP header <code>If-Modified-Since</code>. The server checks whether the resource has been modified since the timestamp provided. If not, the server returns an HTTP status code <code>304 Not Modified</code>. The client retrieves the resource from its own cache. This only applies to client-side caching, in case the client sends the request headers along, otherewise it receives an HTTP status code <code>200 OK</code>.</p><div class="rule" id="api-43">
<p class="rulelab"><strong>API-43</strong>: Apply caching to improve performance</p>
<p>For caching apply the default HTTP caching mechanisms using a few additional HTTP headers (<code>ETag</code> or <code>Last-Modified</code>) and functionality to determine wether a few specific HTTP headers are supplied (<code>If-None-Match</code> or <code>If-Modified-Since</code>).</p>
</div></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="rate-limiting"><!--OddPage--><h2 id="x16-rate-limiting"><span class="secno">16. </span>Rate limiting</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-17"><div role="heading" class="warning-title marker" id="h-warning-8" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>APIs limit the amount of requests that can be sent within a particular time frame to prevent server overload and to guarantee a high service level. APIs may track a rate limit (quota) per month that is enforced per 60 second time interval.</p><p>HTTP headers communicate the rate limit to the users.</p><table>
<thead>
<tr>
<th>HTTP header</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td><code>X-Rate-Limit-Limit</code></td>
<td>Amount of client requests per time frame</td>
</tr>
<tr>
<td><code>X-Rate-Limit-Remaining</code></td>
<td>Amount of remaining client request in the current time frame</td>
</tr>
<tr>
<td><code>X-Rate-Limit-Reset</code></td>
<td>Amount of remaing seconds in the current time frame</td>
</tr>
</tbody></table><div class="rule" id="api-44">
<p class="rulelab"><strong>API-44</strong>: Apply rate limiting</p>
<p>To prevent server overload and to guarantee a high service level, apply rate limiting to API requests.</p>
</div><p>[<cite><a class="bibref" href="#bib-rfc6585">rfc6585</a></cite>] introduces an HTTP status code <code>429 Too Many Requests</code> to inform users the rate limit has been reached.</p><div class="rule" id="api-45">
<p class="rulelab"><strong>API-45</strong>: Provide rate limiting information</p>
<p>Use the HTTP header <code>X-Rate-Limit</code> to inform users of rate limits. In case the rate limits are exceeded, send the HTTP status code <code>429 Too Many Requests</code>.</p>
</div><section id="expose-api-key"><h3 id="x16-1-expose-api-key"><span class="secno">16.1 </span>Expose API-key</h3><p>API keys are "unrestricted" by default. There are no usage restrictions and these API keys should therefore not be exposed in a web application. Using API keys without usage restrictions in JavaScript creates a real change for abuse and quota theft. To prevent this, restricted API keys should be issued and used.</p><div class="rule" id="api-49">
<p class="rulelab"><strong>API-49</strong>: Use *public* API-keys</p>
<p>In JavaScript, only use *restricted* API-keys, linked to specific characteristics of the client-application (web application or mobile
application), e.g. a clientId and/or referring URL.</p>
</div></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="error-handling-0"><!--OddPage--><h2 id="x17-error-handling"><span class="secno">17. </span>Error handling</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-18"><div role="heading" class="warning-title marker" id="h-warning-9" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>Like a Web page displays useful error messages to visitors in case of an error, an API should return useful error message in a known and manageable format. The representation of an error is no different from the representation of a random resource, but with a particular set of fields.</p><p>APIs should always return useful HTTP status codes. HTTP status codes are divided in two categories:</p><ul>
<li>400 range: content errors</li>
<li>500 range: internal server errors</li>
</ul><p>A JSON representation of an error should contain a few details to assist developers, operators, and users:</p><ul>
<li>A unique error type formulated as a URI pointing to further informtion in external (HTML) documentation;</li>
<li>A short, but useful error message;</li>
<li>A detailed description of the error (that assists in solving the issue);</li>
<li>A unique identifier formulated as a URI point to the specific occurence of the error (the error instance). Preferably, the URN should only allow authorized users to search the error logs.</li>
</ul><p>The base for these default formats is [<cite><a class="bibref" href="#bib-rfc7807">rfc7807</a></cite>]. A JSON-representation of an error is formulated like the following object:</p><pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"URI: https://content.omgevingswet.overheid.nl/id/[/{categorie}]/{fout}"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-string">"Systeemcode die het type fout aangeeft"</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Hier staat wat er is misgegaan"</span>,
  <span class="hljs-attr">"status"</span>: <span class="hljs-number">401</span>,
  <span class="hljs-attr">"detail"</span>: <span class="hljs-string">"Meer details over de fout staan hier"</span>,
  <span class="hljs-attr">"instance"</span>: <span class="hljs-string">"urn:uuid:ebd2e7f0-1b27-11e8-accf-0ed5f89f718b"</span> <span class="hljs-comment">// The error instance</span>
}
</code></pre><p>Validation errors for <code>POST</code>, <code>PUT</code>, and <code>PATCH</code> requests are specified per field. The full list of errors is returned concurrently. The response consists of a fixed top level and error code for validation error and additional error fields with detailed errors per field:</p><pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"https://content.omgevingswet.overheid.nl/id//ValidatieFout"</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Hier staat wat er is misgegaan…"</span>,
  <span class="hljs-attr">"status"</span>: <span class="hljs-number">400</span>,
  <span class="hljs-attr">"invalidParams"</span>: [{
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"voornaam"</span>,
    <span class="hljs-attr">"code"</span>: <span class="hljs-string">"Systeemcode die het type fout aangeeft"</span>,
    <span class="hljs-attr">"reason"</span>: <span class="hljs-string">"De voornaam mag geen speciale karakters bevatten."</span>
  }, {
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">" https://content...//fouten/validatie/Wachtwoord"</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"wachtwoord"</span>,
    <span class="hljs-attr">"reason"</span>: <span class="hljs-string">"Het wachtwoord is verplicht."</span>
  }],
  <span class="hljs-attr">"instance"</span>: <span class="hljs-string">"urn:uuid:4017fabc-1b28-11e8-accf-0ed5f89f718b"</span> <span class="hljs-comment">// De fout-instantie</span>
}
</code></pre><div class="rule" id="api-46">
<p class="rulelab"><strong>API-46</strong>: Use default error handling</p>
<p>API support the default error messages of the HTTP 400 and 500 status code ranges, including the parsable JSON representation
[<cite><a class="bibref" href="#bib-rfc7807">rfc7807</a></cite>].</p>
</div><section id="http-status-codes"><h3 id="x17-1-http-status-codes"><span class="secno">17.1 </span>HTTP status codes</h3><p>HTTP defines a range of default status codes for APIs. These assist users to of the APIs to handle errors.</p><div class="rule" id="api-47">
<p class="rulelab"><strong>API-47</strong>: Use the required HTTP status codes</p>
<p>APIs should at least support the following HTTP status codes: 200, 201, 204, 304, 400, 401, 403, 404, 405, 406, 409, 410, 415, 422, 429, 500, and 503.</p>
</div><p>Summary of HTTP operations and the primary HTTP status codes:</p><table>
<thead>
<tr>
<th>Operation</th>
<th>CRUD</th>
<th>Full collection (e.g. <code>/resource</code>) <br> specific item (e.g. <code>/resource/\&lt;id&gt;</code>)</th>
</tr>
</thead>
<tbody><tr>
<td><code>POST</code></td>
<td>Create</td>
<td>201 (Created), HTTP header <code>Location</code> with the URI to the new resource (<code>/resource/\&lt;id&gt;</code>)<br>405 (Method Not Allowed), 409 (Conflict) in case the resource already exists</td>
</tr>
<tr>
<td><code>GET</code></td>
<td>Read</td>
<td>200 (OK), list of resources. Use paging, filtering and sorting to ease the handling of large collections<br>200 (OK) single resource, 404 (Not Found) if the ID does not exist or is invalid</td>
</tr>
<tr>
<td><code>PUT</code></td>
<td>Update</td>
<td>405 (Method Not Allowed), except for the purpose to modify or replace every resource in a collection<br>409 in case a modification is not possible due to the current state of an instance<br>200 (OK) or 204 (No Content), 404 (Not Found) if the ID does not exist or is invalid</td>
</tr>
<tr>
<td><code>PATCH</code></td>
<td>Update</td>
<td>405 (Method Not Allowed), except for the purpose to replace the full collection. <br>409 if a modification is not possible due to the current state of an instance.<br>200 (OK) or 204 (No Content), 404 (Not Found) if the ID does not exist or is invalid</td>
</tr>
<tr>
<td><code>DELETE</code></td>
<td>Delete</td>
<td>405 (Method Not Allowed), except for the purpose to remove the full collection.<br>200 (OK) or 404 (Not Found) if the ID does not exist or is invalid</td>
</tr>
</tbody></table><p>A short list and description of HTTP status codes:</p><table>
<thead>
<tr>
<th>HTTP status code</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>200 OK</td>
<td>Response to a successful <code>GET</code>, <code>PUT</code>, patch or <code>DELETE</code>. Also suitable for <code>POST</code> that does not result in a creation</td>
</tr>
<tr>
<td>201 Created</td>
<td>Response to a <code>POST</code> that results in a creation. Should be combined with a location header that points to the location of the newly created resource</td>
</tr>
<tr>
<td>204 No Content</td>
<td>Response to a successful request that does not return content (e.g. a <code>DELETE</code>)</td>
</tr>
<tr>
<td>304 Not Modified</td>
<td>If HTTP caching headers are applied</td>
</tr>
<tr>
<td>400 Bad Request</td>
<td>The request is invalid, e.g. in case the request (body) cannot be interpreted</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>If no or invalid authentication credentials are supplied. Also useful to display an authentication window if the API is used in a Web browser</td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>Response to a successful authentication, but the verified users is not authorised to access the resource</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>Response to a request for a non-existing resource</td>
</tr>
<tr>
<td>405 Method Not Allowed</td>
<td>Response to an HTTP method that is not allowed for the authenticated user</td>
</tr>
<tr>
<td>406 Not Acceptable</td>
<td>Reponse to an unsupported format request (part of content negotiation)</td>
</tr>
<tr>
<td>409 Conflict</td>
<td>The request cannot be handled due to a conflict with the current state of the resource</td>
</tr>
<tr>
<td>410 Gone</td>
<td>Indicates the resource is no longer available at the requested endpoint. Useful top level response to requests for previous API versions</td>
</tr>
<tr>
<td>412 Precondition Failed</td>
<td>The preconditions supplied in one or more fields in the request header have been omitted or failed upon validation by the server</td>
</tr>
<tr>
<td>415 Unsupported Media Type</td>
<td>If the wrong content type is supplied as part of the request</td>
</tr>
<tr>
<td>422 Unprocessable Entity</td>
<td>Response to a request (body) that is correct but that cannot be handled by the server</td>
</tr>
<tr>
<td>429 Too Many Requests</td>
<td>Response if the rate limit has been exceeded.</td>
</tr>
<tr>
<td>500 Internal Server Error</td>
<td>If an unexpected error occured and server cannot respond.</td>
</tr>
<tr>
<td>503 Service Unavailable</td>
<td>If an API is not available (e.g. due to planned maintenance)</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table></section></section>
    <section class="informative" data-format="markdown" aria-busy="false" id="signing-and-encryption"><!--OddPage--><h2 id="x18-signing-and-encryption"><span class="secno">18. </span>Signing and Encryption</h2><p><em>Dit onderdeel is niet normatief.</em></p><div class="warning" id="issue-container-generatedID-19"><div role="heading" class="warning-title marker" id="h-warning-10" aria-level="3"><span>Warning</span></div><p class="">This extension is in development and may be modified at any time.</p></div><p>Signing and encryption are mechanisms that can provide additional security on top of the transport layer security that is provided by HTTP TLS in combination with some form of authentication and authorization.</p><p>In this API strategy we concern ourselves with RESTful APIs. In RESTful APIs you request the current value of a resource. This is different from SOAP based protocols where content is transported using messages. Using SOAP part of or all of the content is signed and/or encrypted by the sender of the message. This has utitlity as there are no pre conceptions about resources and their behaviour. When using REST you have to ask yourself what is being signed or encrypted. The value of a resource at a certain date and time. Does this have utility above and beyond the transport layer security thats already there?
[Opmerking: Je voert via een RESTful API een operatie uit op een resource, Het kan bv ook gaan om een update/delete/insert op een resource waarbij controle op integriteit van zowel operatie als resource URL wenselijk/zinvol is vanuit security perspectief]
Because in RESTful API's you operate on a resource with read, insert, update, delete commands it can be necessary to especially protect against manipulation by signing the http header containing the operation (eg. command GET/POST/PATCH/DELETE) and the resource-URI along with additional header and payload data. </p><p>Be aware that signing and encryption are "expensive". There is a performance hit (especially for encryption), but most of all in the real world implementation of an API using these security methods will be more expensive. Knowledge among programmers is usually not complete, leading to extra time learning new skills. The added complexity leads to all manner of extra possibilities to create incorrect code, meaning testing will take longer.</p><p>Have a long hard look at alternatives to the technical solution of signing and encryption before commiting to using them.</p><ul>
<li>can the same goals be achieved using different (better) software architecture?</li>
<li>can the goals be achieved using (business) contracts, audits etc... ?
The alternatives above may seem expensive as well but in practice could be cheaper.</li>
</ul><section id="signing"><h3 id="x18-1-signing"><span class="secno">18.1 </span>Signing</h3><p>Signing can be used to achieve:</p><ul>
<li><strong>authentication:</strong> Establishes the identity of the original sender of a request/response even when send through intermediaries.</li>
<li><strong>integrity:</strong> allows the receiver of a request/response to establish that the request/response (or parts there of) have not been tampered with </li>
<li><strong>non-repudiation:</strong> ensures that the sender of a request/respons cannot plausibly deny that a request/reponse (or parts thereof) was sent by him. </li>
</ul><section id="detached-enveloping-and-enveloped-signatures"><h4 id="x18-1-1-detached-enveloping-and-enveloped-signatures"><span class="secno">18.1.1 </span>Detached, Enveloping and Enveloped signatures</h4><p>Generally speaking there are three distinct types of signature: Detached, Enveloping and Enveloped.
A signature can be detached, that is the signature is separate from the content it is signing.
Signatures can be enveloping, that is the content being signed is contained within the signature itself. The last option is an enveloped signature, that is the signature structure/element is contained wihin the content that is signed.</p></section><section id="canonicalization"><h4 id="x18-1-2-canonicalization"><span class="secno">18.1.2 </span>Canonicalization</h4><p>Canonicalization(C14n) ensures that syntactically irrelavant information such as trailing whitespaces, different line terminators or tabs do not invalidate a signature. This is especially important with detached signatures where a different rendering of (semantically) the same content can invalidate a signature. A C14n algorithm ensures semantically identical content receives the same signature.</p></section><section id="signing-within-encoding-formats"><h4 id="x18-1-3-signing-within-encoding-formats"><span class="secno">18.1.3 </span>Signing within encoding formats</h4><p>When signing takes place within an encoding format the way information is exchanged(e.g. through APIs) is not directly relevant to the way signatures are applied. The API design rules do not currently express any normative preference for encoding formats. We do have the JSON extension that expresses a non normative preference for JSON. Therefor we do include information on signing within the two most common encoding formats (XML &amp; JSON) themselves even if it is not directly related to APIs. </p><section id="signing-xml"><h5 id="x18-1-3-1-signing-xml"><span class="secno">18.1.3.1 </span>Signing XML</h5><p>The standard for XML digital signatures allows for Detached, enveloping and enveloped signatures of any XML format. <a href="https://www.w3.org/TR/xmldsig-core1/">https://www.w3.org/TR/xmldsig-core1/</a>
When using a specific XML encoding format (or instance GML for geograpic information) one should be aware that when this specific XML format was not made with digital signatures in mind it may be very difficult to implement digital signatures.
For instance for enveloped XML digital signatures most implementations expect the signature element as either the first or last element of the XML root element. An encoding standard such as GML currently does not allow users to add a signature element to the root of an xml document. Making XML signatures practically unimplementable using standard software.</p></section><section id="signing-json"><h5 id="x18-1-3-2-signing-json"><span class="secno">18.1.3.2 </span>Signing JSON</h5></section></section><section id="signing-requests-response"><h4 id="x18-1-4-signing-requests-response"><span class="secno">18.1.4 </span>Signing requests/response</h4><section id="signing-requests-respone-with-knowledge-of-encoding-format"><h5 id="x18-1-4-1-signing-requests-respone-with-knowledge-of-encoding-format"><span class="secno">18.1.4.1 </span>Signing requests/respone with knowledge of encoding format</h5><p>JSON Web Token Best Current Practices: <a href="https://www.rfc-editor.org/rfc/rfc8725.html">RFC 8725</a></p></section><section id="signing-requests-response-without-knowledge-of-encoding-format"><h5 id="x18-1-4-2-signing-requests-response-without-knowledge-of-encoding-format"><span class="secno">18.1.4.2 </span>Signing requests/response without knowledge of encoding format</h5></section></section></section><section id="encryption"><h3 id="x18-2-encryption"><span class="secno">18.2 </span>Encryption</h3></section></section>


<section id="references" class="appendix">
      <!--OddPage--><h2 id="a-references"><span class="secno">A. </span>References</h2>

    <section id="informative-references">
        <h3 id="a-1-informative-references"><span class="secno">A.1 </span>Informative references</h3>
      <dl class="bibliography">
        <dt id="bib-hal">[HAL]</dt><dd><a href="http://stateless.co/hal_specification.html"><cite>HAL - Hypertext Application Language</cite></a>. Mike Kelly. 2013-09-18. URL: <a href="http://stateless.co/hal_specification.html">http://stateless.co/hal_specification.html</a></dd><dt id="bib-iana-relations">[IANA-RELATIONS]</dt><dd><a href="https://www.iana.org/assignments/link-relations/"><cite>Link Relations</cite></a>.  IANA. URL: <a href="https://www.iana.org/assignments/link-relations/">https://www.iana.org/assignments/link-relations/</a></dd><dt id="bib-ncsc.tls">[NCSC.TLS]</dt><dd><a href="https://www.ncsc.nl/documenten/publicaties/2021/januari/19/ict-beveiligingsrichtlijnen-voor-transport-layer-security-2.1"><cite>ICT-beveiligingsrichtlijnen voor Transport Layer Security (TLS)</cite></a>. NCSC.April 2019. URL: <a href="https://www.ncsc.nl/documenten/publicaties/2021/januari/19/ict-beveiligingsrichtlijnen-voor-transport-layer-security-2.1">https://www.ncsc.nl/documenten/publicaties/2021/januari/19/ict-beveiligingsrichtlijnen-voor-transport-layer-security-2.1</a></dd><dt id="bib-oauth2">[OAuth2]</dt><dd><a href="https://tools.ietf.org/html/rfc6749"><cite>The OAuth 2.0 Authorization Framework</cite></a>. D. Hardt. The Internet Engineering Task Force. October 2012. URL: <a href="https://tools.ietf.org/html/rfc6749">https://tools.ietf.org/html/rfc6749</a></dd><dt id="bib-oauth2.browser-based-apps">[OAuth2.Browser-Based-Apps]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-oauth-browser-based-apps"><cite>OAuth 2.0 for Browser-Based Apps</cite></a>. A. Parecki; D. Waite. IETF OAuth Working Group. Internet-Draft. URL: <a href="https://tools.ietf.org/html/draft-ietf-oauth-browser-based-apps">https://tools.ietf.org/html/draft-ietf-oauth-browser-based-apps</a></dd><dt id="bib-openid.core">[OpenID.Core]</dt><dd><a href="https://openid.net/specs/openid-connect-core-1_0.html"><cite>OpenID Connect Core 1.0</cite></a>. N. Sakimura, J. Bradley, M. Jones, B. de Medeiros, C. Mortimore. OpenID foundation. November 8 2014. URL: <a href="https://openid.net/specs/openid-connect-core-1_0.html">https://openid.net/specs/openid-connect-core-1_0.html</a></dd><dt id="bib-rfc3986">[rfc3986]</dt><dd><a href="https://www.rfc-editor.org/rfc/rfc3986"><cite>Uniform Resource Identifier (URI): Generic Syntax</cite></a>. T. Berners-Lee; R. Fielding; L. Masinter. IETF. January 2005. Internet Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc3986">https://www.rfc-editor.org/rfc/rfc3986</a></dd><dt id="bib-rfc6585">[rfc6585]</dt><dd><a href="https://httpwg.org/specs/rfc6585.html"><cite>Additional HTTP Status Codes</cite></a>. M. Nottingham; R. Fielding. IETF. April 2012. Proposed Standard. URL: <a href="https://httpwg.org/specs/rfc6585.html">https://httpwg.org/specs/rfc6585.html</a></dd><dt id="bib-rfc7159">[rfc7159]</dt><dd><a href="https://www.rfc-editor.org/rfc/rfc7159"><cite>The JavaScript Object Notation (JSON) Data Interchange Format</cite></a>. T. Bray, Ed.. IETF. March 2014. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc7159">https://www.rfc-editor.org/rfc/rfc7159</a></dd><dt id="bib-rfc7800">[rfc7800]</dt><dd><a href="https://www.rfc-editor.org/rfc/rfc7800"><cite>Proof-of-Possession Key Semantics for JSON Web Tokens (JWTs)</cite></a>. M. Jones; J. Bradley; H. Tschofenig. IETF. April 2016. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc7800">https://www.rfc-editor.org/rfc/rfc7800</a></dd><dt id="bib-rfc7807">[rfc7807]</dt><dd><a href="https://www.rfc-editor.org/rfc/rfc7807"><cite>Problem Details for HTTP APIs</cite></a>. M. Nottingham; E. Wilde. IETF. March 2016. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc7807">https://www.rfc-editor.org/rfc/rfc7807</a></dd><dt id="bib-rfc7946">[rfc7946]</dt><dd><a href="https://www.rfc-editor.org/rfc/rfc7946"><cite>The GeoJSON Format</cite></a>. H. Butler; M. Daly; A. Doyle; S. Gillies; S. Hagen; T. Schaub. IETF. August 2016. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc7946">https://www.rfc-editor.org/rfc/rfc7946</a></dd><dt id="bib-rfc8252">[RFC8252]</dt><dd><a href="https://www.rfc-editor.org/rfc/rfc8252"><cite>OAuth 2.0 for Native Apps</cite></a>. W. Denniss; J. Bradley. IETF. October 2017. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc8252">https://www.rfc-editor.org/rfc/rfc8252</a></dd>
      </dl></section></section><p role="navigation" id="back-to-top"><a href="#title">
  <abbr title="Back to Top">↑</abbr></a></p><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>
